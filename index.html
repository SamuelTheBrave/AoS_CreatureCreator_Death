<!DOCTYPE html>
<html>
<head>
<title>The Anvil of Apotheosis (Death)</title>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
* {
  box-sizing: border-box;
}

body {
  /*font-family: "Pompei Std", serif;*/
  font-family: "Minion Pro", serif;
  font-size: 20px;
  margin: 0;
  background-image: url("https://i.ibb.co/x8tN7tN/Ao-S-WS-back-old.jpg");
}

/* Farbtabelle
/*  #F2F2F2; /* grey */
/*  #CCC4A1; /* GW dark gold background */
/* background-color: rgb(145 136 77);
/*  #E2DFC9; /* GW light gold background */
/* background-color: rgb(166 156 107);
/* background-color: rgb(185 178 137);
/*  #1abc9c; /* green background */

.outer-page, .main-header, .main-description {
  width: 1100px;
  margin: 0px auto;
}

.first-header {  /* Style the header */
  padding: 2px; /* some padding */
  text-align: center; /* center the text */
  text-shadow: 0px 0px 18px #000;
  background: #CCC4A1; /* GW dark gold background */
  color: white; /* white text color */
}
.first-header .logo {
  position: relative;
  /*margin-right: 27px;*/
}
.first-header .logo:after {
  content: '';
  display: block;
  position: absolute;
  width: 87px; height: 52px;
  right: 12px; top: 18px;
    background: url("https://i.ibb.co/kcXZDfL/Ao-S-WS-unofficial.png")
}
.first-header img {
    vertical-align: middle;
}
.first-header h1 {font-family: "Pompei Std", serif; font-size: 180%;} /* Increase the font size of the h1 element */
.first-header p  {font-size: 110%;}  /* Increase the font size of the p element */
.first-header p1 {font-size: 90%;} /* Increase the font size of the p1 element */

.navbar {  /* Style the top navigation bar */
  position: relative;
  overflow: hidden; /* Hide overflow */
  background-color: #333; /* Dark background color */
}
.navbar a {  /* Style the navigation bar links */
  float: left;            /* Make sure that the links stay side-by-side */
  display: block;         /* Change the display to block, for responsive reasons (see below) */
  color: white;           /* White text color */
  text-align: center;     /* Center the text */
  padding: 10px 20px;     /* Add some padding */
  text-decoration: none;  /* Remove underline */
}
.navbar a:hover {  /* Change color on hover/mouse-over */
  background-color: #ddd; /* Grey background color */
  color: black; /* Black text color */
}
.navbar a.active {  /* Add a color to the active/current link */
  background-color: #4CAF50;
  color: white;
}
.navbar-centered a {  /* Center-aligned link */
  float: none;
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
}
.navbar-right {  /* Right-aligned link */
  float: right; /* Float a link to the right */
}

@page {
  size: 21cm 29.7cm;
  margin: 30mm 45mm 30mm 45mm;
  /* change the margins as you want them to be. */
}

.warscroll {
  overflow: hidden;
  display: block;
  position: relative;
  font-size: 80%;
  margin: 0px auto 20px;
  background-color: white; /*rgb(244,244,244);*/
  -webkit-box-shadow: 0px 1px 12px 0px rgba(0,0,0,0.75);
     -moz-box-shadow: 0px 1px 12px 0px rgba(0,0,0,0.75);
          box-shadow: 0px 1px 12px 0px rgba(0,0,0,0.75);
  padding: 10px;
  z-index: 5;
}

.profile {
  width: 150px; height: 150px;
  position: absolute;
  background: url("https://i.ibb.co/F85GW6v/AoS2_WS_wheel_wtxt.png");
  background-size: 150px 150px;
  z-index: 3;
  /*border: 1px solid black;*/
}
.statsTable .profile {
  width: 112px; height: 112px;
  /*background: url("https://i.ibb.co/F85GW6v/AoS2_WS_wheel_wtxt.png");*/
  background-size: 112px 112px;
  z-index: 4;
}
/*.profile .wheel {
  width: 112px; height: 112px;
  position: absolute;
}*/
.profile .numbers {
  position: absolute;
  top: 14%;
  right: 11%;
  bottom: 8%;
  left: 10%;
}
.profile .numbers ul {
    margin: 0px;
  padding: 0px;
  list-style: none outside none;
  color: black;
  font-family: "Minion Pro", serif;
  font-size: 100%;
  line-height: 0;
  font-style: normal;
  font-weight: bold;
}
.profile .numbers li {
  /*border: 1px solid green;*/
  text-align: center;
  position: absolute;
}
.profile .numbers .q1 {  /* Move */
  width: 100%;
  bottom: 50%;
  margin-bottom: 23%;
}
.profile .numbers .q2 {  /* Save */
  width: 50%;
  bottom: 49%;
  left: 50%;
}
.profile .numbers .q3 {  /* Bravery */
  width: 100%;
  top: 50%;
  margin-top: 20%;
}
.profile .numbers .q4 {  /* Wounds */
  width: 50%;
  bottom: 49%;
  right: 50%;
}
.blackstar {  /* may be added as save, move, or others */
  width: 19px; height: 19px;
  position: absolute;
  background: url("https://i.ibb.co/gPzxHNR/Ao-S-WS-blackstar.png");  
  z-index: 6;
  /* <img src=https://i.ibb.co/gPzxHNR/Ao-S-WS-blackstar.png alt="WarhammerAoS" style="display:block; margin: auto auto -5px;";> */
}

.points {
  width: 49px; height: 49px;  
  position: absolute;
  top: 10px;
  right: 2px;
  /*margin: 0px 730px;*/
  background: url("https://i.ibb.co/602Jhky/Ao-S2-WS-pts-dot.png");
  background-size: 49px 49px;*/
  z-index: 3;
}
.statsTable .points {
  width: 30px; height: 30px;
  background-size: 30px 30px;
}
/*.points .circle {
  width: 30px; height: 30px;
  position: absolute;    
  font-size: 15px;
}*/
.points .numbers {
  position: absolute;
  top: 10%;
  right: 10%;
  bottom: 10%;
  left: 10%;   
}
.points .numbers ul {
  margin: 0px;
  padding: 0px;
  list-style: none outside none;
  color: black;
  font-family: "Minion Pro", serif;
  line-height: 0;
  font-style: normal;
  font-weight: bold;
}
.points .numbers li {
  text-align: center;
  position: absolute;
}
.points .numbers .p1 {  /* destiny points used */
  width: 100%;
  top: 50%;
}

.statsTable .heroName {
  border: 1px solid rgb(166 156 107);
  border-style: solid;
  background-color: #F2F2F2;
  position: relative;
  padding-left: 80px;/* padding-left: 25.4mm;*/
  padding-right: 12px;
  margin: 0px 15px;
  min-height: 89px;/* min-height: 29.6mm;*/
  text-align: center;
  /*border: 1px solid black;*/
}
.heroName table {
  font-family: "Pompei Std", serif;
  font-size: 120%;
  border-spacing: 0;
  border-collapse: collapse;
  width: 100%;
  background-color: #F2F2F2;
  /*border: 1px solid black;*/
}
.heroName td {
  font-size: 72%;
  height: 56px;
  padding: 0%;
}
.heroName th {
  /* border: 1px solid #dddddd; */
  /*background-color: rgb(185 178 137);/*#E2DFC9;*/
  height: 30px;
}

.charSquare {
  flex: 100%;    /* Set the width of the sidebar */
  position: relative;
  min-width: 350px;
  max-width: 700px;
  background-color: white;
  padding: 0px;    /* Some padding */
  /*border: 1px solid black;*/
}
.charSquare .charType {
  /*border: 1px solid rgb(166 156 107);
  border-style: solid solid solid solid;*/
  position: relative;
  margin: 0px 2px 2px 28px;
  text-align: center;
  /*border: 1px solid black;*/
  z-index: 1;
}
.charType table {
  /*font-family: "Minion Pro", serif;*/
  font-family: "Pompei Std", serif;
  font-size: 80%;
  border: 1px solid rgb(166 156 107);
  border-style: solid;
  border-spacing: 0;
  border-collapse: collapse;
  width: 100%;
  max-width: 700px;
  background-color: #F2F2F2;
}
.charType caption {
  height: 30px;
}
.charType th {
  /* border: 1px solid #dddddd; */
  /*background-color: rgb(185 178 137);/*#E2DFC9;*/
  font-size: 150%;
  text-align: center;
  height: 92px;
  padding: 1px 4px 1px 28px;
}
.charType td {
  font-family: "Minion Pro", serif;
  border: 1px solid rgb(166 156 107);
  border-style: solid;
  text-align: left;
  height: 70px;
  padding: 4px;
}
.charType .listArmy {
  font-weight: bold;
  text-align: center;
  background-color: rgb(145 136 77);
}
.charType tr.marked {
  background-color: lime;
}
.colorChanger {
  animation: changeColor 0.5s;
}
@keyframes changeColor {
  0% {background-color: #F2F2F2;}
  50% {background-color: rgb(145 136 77);}
  100% {background-color: #F2F2F2;}
}

.statsTable .gwTable {
  position: relative;
  padding-left: 15px;/* padding-left: 25.4mm;*/
  padding-right: 15px;
  /*border: 1px solid black;*/
}
.gwTable table {
  font-family: "Pompei Std", serif;
  font-size: 80%;
  border: 1px solid rgb(166 156 107);
  border-style: none;
  border-spacing: 0;
  border-collapse: collapse;
  text-align: center;
  width: 100%;
  max-width: 1400px;
  background-color: #F2F2F2;
}
/*.gwTable caption {
  font-size: 110%;
  font-weight: bold;
  letter-spacing: 1px;
  color: white;
  text-align: left;
  background-color: rgb(145 136 77);
  padding: 6px 12px;
}*/
.headCap {
  font-size: 110%;
  font-weight: bold;
  letter-spacing: 1px;
  color: white;
  text-align: left;
  /*background-color: rgb(145 136 77);
  padding: 6px 12px;*/
}
.gwTable th {
  /* border: 1px solid #dddddd; */
  font-size: 100%;
  background-color: rgb(185 178 137);
  height: auto;
  padding: 2px;
}
.gwTable td {
  font-family: "Minion Pro", serif;
  font-size: 110%;
  text-align: center;
  border: 1px solid rgb(166 156 107);
  border-style: solid none solid none;
  height: auto;
  padding: 1px;
}
.main tr:nth-child(odd) {
  /* odd = starting with the first row
  even = starting with the second row */
  /*background-color: white;*/
}
/*.main tr.marked {
  background-color: lime;
}*/
.warscroll .keywords {
  position: relative;
  margin: 0px 15px 0px 15px;
  text-align: center;
  /*border: 1px solid black;*/
}
.keywords table {  
  font-family: "Pompei Std", serif;
  font-size: 80%;
  border: 1px solid rgb(166 156 107);
  border-style: none;
  border-spacing: 0;
  border-collapse: collapse;
  text-align: center;
  height: 40px;
  width: 100%;
  max-width: 1400px;
  background-color: #F2F2F2;
}
.keywords td {
  font-family: "Minion Pro", serif;
  font-size: 100%;
  text-align: left;
  border: 1px solid rgb(166 156 107);
  border-style: solid;
  padding: 4px;
}
.keywords th {
  font-family: "Minion Pro", serif;
  font-size: 100%;
  background-color: rgb(185 178 137);
  border: 1px solid rgb(166 156 107);
  border-style: solid;
  padding: 2px;
}

.sticky {
  position: -webkit-sticky;
  position: sticky;
  top: 0;
  padding: 10px;
}

.row {  /* Column container */
  display: flex;
  flex-wrap: initial;
}
/* Create two unequal columns that sits next to each other */
.side {  /* Sidebar/left column */
  flex: 50%;  /* Set the width of the sidebar */
  min-width: 200px;
  max-width: 700px;
  background-color: #f1f1f1; /* Grey background color */
  padding: 10px;             /* Some padding */
}
.main {  /* Main column */
  flex: 50%;               /* Set the width of the main content */
  min-width: 400px;
  max-width: 1400px;
  background-color: white;   /* White background color */
  padding: 10px;             /* Some padding */
}
.main h2 {font-family: "Pompei Std", serif; font-size: 120%;} /* Increase the font size of the h1 element */
.main p6 {margin: 10px;}

.innerTxtPre {
  max-width: 1400px;
  background-color: white;
  padding: 5px;             /* Some padding */
  column-width: auto;
  column-count: 3;
  text-align: left;
  font-size: 85%;
  margin: 0px 15px 0px 15px;
}
.des {
  border: none;
  border-style: none;
  margin: 0px -3px 2px;
  text-align: left;
}
.des td {
  border: none;
  border-style: none;
  text-align: left;
}
t1 {
  font-family: "Pompei Std", serif;
  /*font-family: "Minion Pro", serif;*/
  font-size: 100%;
  font-weight: bold;
}
.innerT2 {
  flex: 50%;
  min-width: 600px;
  max-width: 1400px;
  background-color: white;
  padding: 5px;             /* Some padding */
  column-width: 600px;
  column-count: 2;
}
.innerT3 {
  flex: 50%;
  min-width: 400px;
  max-width: 1400px;
  background-color: white;
  padding: 5px;             /* Some padding */
  column-width: 400px;
  column-count: 3;
}

.fakeimg {  /* Fake image, just for this example */
  background-color: #aaa;
  /* width: 100%; */
  padding: 20px;
}

.footer {
  display: block;
  /*position: fixed;*/
  bottom: 0;
  padding: 2px; /* Some padding */
  text-align: left; /* Left text*/
  background: #ddd; /* Grey background */
}

.allSteps {
  display: block;
  position: relative;
  max-width: 1400px;
  margin: 0px auto 18px;
  background-color: rgb(244,244,244);
  -webkit-box-shadow: 0px 1px 12px 0px rgba(0,0,0,0.75);
     -moz-box-shadow: 0px 1px 12px 0px rgba(0,0,0,0.75);
          box-shadow: 0px 1px 12px 0px rgba(0,0,0,0.75);
}
/* Hide all steps by default: */
.anvilSteps {
  display: none;   
}
.navButton {
  background-color: #04AA6D;
  color: #ffffff;
  border: none;
  padding: 10px 20px;
  font-size: 110%;
  font-family: Raleway;
  cursor: pointer;
  width: 200px;
  margin: 1px;
}
.navButton:hover {
  opacity: 0.7;
}
#prevBtn, #resetBtn {
  background-color: #bbbbbb;
}
.step {    /* Make circles that indicate the steps of the form: */
  height: 35px;
  width: 35px;
  margin: 0 2px;
  padding: 6px;
  background-color: #bbbbbb;
  border: none;  
  border-radius: 50%;
  display: inline-block;
  opacity: 0.5;
}
.step.active {
  opacity: 1;
}
.step.finish {    /* Mark the steps that are finished and valid: */
  background-color: #04AA6D;
}
.grandButton {
/*
  rgb(145 136 77);  // active, dark gold
  rgb(166 156 107);
  rgb(185 178 137);  // inactive, light gold
*/
  background-color: rgb(185 178 137);
  color: #ffffff;
  border: none;
  padding: 10px 20px;
  font-size: 110%;
  font-family: "Minion Pro", serif;
  text-decoration: none;
  cursor: pointer;
  width: 350px;
  margin: 1px;
}
.grandButton:hover {
  opacity: 0.7;
}
.grandButton.active {
  background-color: rgb(145 136 77);
  opacity: 1;
}
.setButton {
  background-color: #04AA6D;
  color: #ffffff;
  border: none;
  padding: 2px 2px;
  font-size: 90%;
  font-family: "Minion Pro", serif;
  cursor: pointer;
  width: 45px;
  margin: 1px;
}

/* Responsive layout - when the screen is less than 700px wide, make the two columns stack on top of each other instead of next to each other */
@media screen and (max-width: 700px) {
  .row {   
    flex-direction: column;
  }
}

/* Responsive layout - when the screen is less than 400px wide, make the navigation links stack on top of each other instead of next to each other */
@media screen and (max-width: 400px) {
 .navbar a, .navbar-right {
    float: none;
    display: block;
    width:100%;
  }
  .navbar-centered a {
    position: relative;
    top: 0;
    left: 0;
    transform: none;
  }
}

</style>
</head>

<body onclick="showTagProperty(event)" onload="show_hide('none')">

  <div class="first-header">
    <h1><span class="logo">
      <img src=https://www.games-workshop.com/resources/touts/Embedded-Medias/AoS/AoSLogo-EM.png alt="LogoWarhammerAoS2.0">
      </span>
      The Anvil of Death</h1><p>An completely unofficial tool to create your own hero/villain for Warhammer – Age of Sigmar. <span style="font-size: 75%;">(Modzilla Firefox Edition)</span>
    </h1>
  </div>
  
  <div class="navbar" style="display: block;">
    <!-- Left-aligned links (default) -->
    <!-- <a href="#home" class="active" >Home</a> -->
    <a href="https://samuelthebrave.github.io/AoS_CreatureCreator/">Anvil of Apotheosis</a>
    <a href="https://samuelthebrave.github.io/AoS_CreatureCreator_Death/" class="active" >Anvil of Death</a>
    <a href="https://samuelthebrave.github.io/AoS_CreatureCreator_Chaos/">Anvil of Chaos</a>
    <a href="https://samuelthebrave.github.io/AoS_CreatureCreator_Blood/">Anvil of Blood</a>
    <a href="https://samuelthebrave.github.io/AoS_CreatureCreator_Destruction/">Anvil of Destruction</a>
    <!-- Right-aligned links -->
    <div class="navbar-right">
      <a href="#links">Links</a>
      <a href="#about">About</a>
    </div>
  </div><!-- end of navbar -->
  <br>

  <div class="sticky" id="warscrollshow" style="display: block; z-index: 9; text-align: right";>
    <p1 style="font-size: 17px"><input type="checkbox" id="showhideCard" onclick="clickCard()" checked> show/hide Warscroll</p1>
  
  <div class="sticky" id="warscrollcard" style="display: block; z-index: 9;";>
    <!-- <p style="margin: 0px auto 10px; text-align: center; width: 794px;"><b>This is a short preview of your Warscroll:</b></p> -->
    <div id="yourWarscroll" class="warscroll" style="width: 210mm; min-height: 59mm; display: block;">
      <div id="card">
        <div class="statsTable">
          <div class="profile">
            <div class="numbers">
              <ul>
                <li class="q1" id="move" value='1"'>1"</li>
                <!--<img src=https://i.ibb.co/gPzxHNR/Ao-S-WS-blackstar.png alt="WarhammerAoS" style="display:block; margin: auto auto -4px;";>-->
                <li class="q2" id="save" value="-">-</li>
                <li class="q3" id="brav" value="1">1</li>
                <li class="q4" id="woun" value="1">1</li>                
              </ul>
            </div><!-- end of profile numbers -->
          </div><!-- end of profile -->
          
          <div class="points" style="right: 9px; z-index: 5;">            
            <div class="numbers">
              <ul>
                <li class="p1" id="ptsAct" value=0>0</li>
              </ul>
            </div>
          </div><!-- end of points -->
          <div id="roleDP" class="points" style="right: 9px; top: 40px; display: block; z-index: 4;">
            <div class="numbers">
              <ul>
                <li class="p1" id="ptsMax">-</li>
              </ul>
            </div>
          </div><!-- end of points2 -->
          
          <div style="border: none; height: 12px;">
            <caption></caption>
          </div>
          
          <div class="heroName">            
            <table>
              <tr>
                <th id="heroName" value="your heros name">your heros name</th>
              <tr>
              </tr>
                <td id="heroDescr" value="a description of your hero">a short description of your hero.</td>
              </tr>
            </table>
          </div><!-- end or heroName -->
            
          <div id="weaTablePreview" class="gwTable">
            <div id="missileTablePre" style="display: none;">
              <table id="missileWeaTablePre" class="missile">
                <tr>
                  <th>MISSILE WEAPONS</th>
                  <th style="width: 10%;">Range</th>
                  <th style="width: 10%;">Attacks</th>
                  <th style="width: 10%;">To Hit</th>
                  <th style="width: 10%;">To Wound</th>
                  <th style="width: 10%;">Rend</th>
                  <th style="width: 10%;">Damage</th>
                </tr>
              </table>
            </div>
            <div id="meleeTablePre" style="display: none;">
              <table id="meleeWeaTablePre" class="melee">
                <tr>
                  <th>MELEE WEAPONS</th>
                  <th style="width: 10%;">Range</th>
                  <th style="width: 10%;">Attacks</th>
                  <th style="width: 10%;">To Hit</th>
                  <th style="width: 10%;">To Wound</th>
                  <th style="width: 10%;">Rend</th>
                  <th style="width: 10%;">Damage</th>
                </tr>
              </table>
              <!--<img class="line-bottom" src="https://runebrush.pa-sy.com/warscroll/image/border-bottom.png">-->
            </div>
          </div><!-- end of gwTable -->

          <div id="damageTable" class="damageTable" style="display: none;"><br></div><!-- end of behemoth -->
        </div><!-- end of stats-table -->

        
        <div class="innerTxtPre">
          <div id="description" class="description" style="display: block; margin: 0px 0px 4px 0px;">
            <t1>DESCRIPTION</t1><br>
            <table style="margin: 0px -3px 2px;">
              <tr>
                <td>                
                <t2><span id="yourHerosName">Your hero</span> is a single model and <span id="yourHeroArmoury">currently unarmed</span>.</t2>
                </td>
              </tr>
            </table>
          </div>
          <div id="abilities" class="abilities" style="display: none; margin: 0px 0px 4px 0px;"><t1>ABILITIES</t1><br></div>
          <div id="magic" class="magic" style="display: none; margin: 0px 0px 4px 0px;"><t1>MAGIC</t1><br></div>
          <div id="command" class="command" style="display: none; margin: 0px 0px 4px 0px;"><t1>COMMAND ABILITIES</t1><br></div>          
        </div>

        <div class="keywords" style="display: block;">
          <table>
            <tr>
              <th style="width: 90px;">KEYWORDS</th>
              <td id="heroKeys"></td>
            </tr>
          </table>
        </div><!-- end of keywords -->

      </div><!-- end of card -->

    </div><!-- end of warscroll -->
  </div><!-- end of warscrollcard -->
  
  </div><!-- end of warscrollShow -->


<div class="allSteps">

<div id="step0" class="anvilSteps"><!-- Anvil of Apotheosis: THE BEGINNING -->
  <div class="row">
    <div class="main">
      <h2 style="font-size: 150%;"><b>THE ANVIL OF DEATH</b></h2>
      <p><b>As undead warlords rise to prominence all over the mortal realms, some of them begin to make names for themselves on the fields of battle. Such martial skill and bloodthirsty savagery will not go unnoticed by the most benevolent Lord of Undeath.</b></p>
      <p>The rules in this tool, as found and originally printed in White Dwarf No°461, will enable you to create a unique hero of your own design for either the Flesh-eater Courts or the Ossiarch Bonereapers. This could be an existing Citadel Miniature that you wish to give its own bespoke rules or a conversion you have made.</p>
      <p>There are 5 steps to follow to create your own hero. As you follow the steps, you will have a host of options to choose from, including powerful weapons and ferocious mounts. After completing all of the steps, you will be able to field your hero in your narrative play games of Age of Sigmar.</p>
      <p>A blank warscroll to record your hero upon can be printed out from <a href="https://www.warhammer-community.com/wp-content/uploads/2020/07/Ic3zN7w7Cm1K3VeO.pdf" target="_blank">www.warhammer-community.com</a>.</p>
      <p>The 5 steps are as follows:</p>
      <p6>1. Set a destiny point limit for your hero.</p>
      <p6>2. Choose your hero’s archetype.</p>
      <p6>3. Equip your hero with weapons from the armoury.</p>
      <p6>4. Choose a bestial companion (if any) for your hero.</p>
      <p6>5. Spend your remaining destiny points on any characteristic enhancements or abilities for your hero.</p>
      <br>
      <h2><b>CHARACTERISTIC ENHANCEMENTS AND ABILITIES</b></h2>
      <p>Many of the steps include <b>options</b> to give your hero a [Characteristic Enhancement] or an [Ability]. If the option gives a [Characteristic Enhancement], the specified characteristic will be modify as noted. If it gives an [Ability], the ability will be writen in the ‘Abilities’ section of your hero’s warscroll. The same [Characteristic Enhancement] can be chosen up to 3 times for your hero; however, the same [Ability] cannot be chosen more than once. Lastly, some options will have <b>restrictions</b> that limit which keywords can or cannot take a certain option.</p>
    </div>
  </div>
  <div style="display: none;">
    <p>Valid: </p><p id="validateStep0">validated</p>
  </div>
</div>

<div id="step1" class="anvilSteps"><!-- Anvil of Apotheosis: STEP 1 - THE DESTINY POINT LIMIT -->
  <div class="row">
    <div class="main">
      <h2><b>STEP 1 – THE DESTINY POINT LIMIT</b></h2>
      <p>When creating your hero, the first step is to pick 1 of the following destiny point limits for your hero:</p>
    </div>
  </div>

  <div class="row" style="font-size: 115%;">
      <div class="main gwTable">
        <table onclick="setPointLimit(20)">
          <tr>
            <td width=20% rowspan="2" style="text-align: center;";><input type="radio" name="ptLimit" id="champion" onclick="setPointLimit(20)"></td>
            <td width=80% style="text-align: left; padding: 4px; border-style: solid none none none;"><b>Champion</b></td>
          </tr>
          <tr>
            <td style="text-align: left; padding: 4px; border-style: none;">Limit: 20 destiny points</td>
          </tr>
        </table>    
      </div>
      <div class="main gwTable">    
        <table onclick="setPointLimit(40)">
          <tr>
            <td width=20% rowspan="2" style="text-align: center;";><input type="radio" name="ptLimit" id="conqueror" onclick="setPointLimit(40)"></td>
            <td width=80% style="text-align: left; padding: 4px; border-style: solid none none none;"><b>Conqueror</b></td>
          </tr>
          <tr>
            <td style="text-align: left; padding: 4px; border-style: none;">Limit: 40 destiny points</td>
          </tr>
        </table>
      </div>
  </div>

  <div class="row">
    <div class="main">
      <p>As you complete the rest of the steps, each option you pick for your hero will cost a certain number of <b>destiny points</b>. This will often be abbreviated as <b>DP</b>. Keep a running tally of the number of destiny ponits you have spent. The tally cannot exceed the limit you have set.</p>
    </div>
  </div>
  <div style="display: none;">
    <p>Valid: <span id="validateStep1">not valid</span></p>
  </div>
</div>

<div id="step2" class="anvilSteps"><!-- Anvil of Apotheosis: STEP 2 - THE ANCESTRY -->
  <div class="row">
    <div class="main">
      <h2><b>STEP 2 – ARCHETYPES</b></h2>
      <p>The second step is to pick the archetype for your hero. There are 4 to choose from in total: 2 for the Flesh-eater Courts – Abhorrant and Courtier – and 2 for the Ossiarch Bonereapers – Liege and Mortisan. The archetype you pick will cost a number of destiny points (as indicated in the upper-right corner of the archetype) and will populate your hero’s Move, Wounds, Bravery and Save characteristics. The archetype will also give them a set of keywords and starting abilities, and there may be an optional rule you can choose for them. Write all of these down on your hero’s warscroll after making your choice.</p>
    </div>
  </div>
  
  <div class="main" style="overflow:auto; padding: 0px 0px 15px;">
    <div style="text-align:center;">  <!-- style="float:right;" -->
      <button class="grandButton" id="grandALL" onclick="showAlliance(this.id)">ALL</button>
      <!-- <button class="navButton" id="resetBtn" onclick="resetStep(0)">Reset</button> -->
      <button class="grandButton" id="grandFLESH-EATER COURTS" onclick="showAlliance(this.id)">FLESH-EATER COURTS</button>
      <button class="grandButton" id="grandOSSIARCH BONEREAPERS" onclick="showAlliance(this.id)">OSSIARCH BONEREAPERS</button>
    </div>
  </div>
  
  <div class="row">
    <div class="innerT3" id="step2chars">
      
      <div class="charSquare" id="ABHORRANT" onclick="clickChar(this.id)" style="display: block;">
        <div class="profile">
          <div class="numbers">
            <ul>
              <li class="q1">6"</li>
              <li class="q2">5+</li>
              <li class="q3">10</li>
              <li class="q4">6</li>
            </ul>
          </div><!-- end of profile numbers -->
        </div><!-- end of profile -->
        <div class="points" style="z-index: 2;">
          <div class="numbers">
            <ul>
              <li class="p1" id="ptsCost">7</li>
            </ul>
          </div>
        </div><!-- end of points -->
        <div class="charType">
          <table>
            <caption></caption>
            <tr>
              <th width=15%></th>
              <th width=85% class="charName">ABHORRANT</th>
            </tr>
            <tr>
              <td style="font-weight: bold;">[Ability]</td>
              <td class="gwTable">(Add the following to the warscroll):<br><br><b>MAGIC</b><br>
                <div id="Magic_Abi0" class="des" style="font-size: 110%;">
                  <table>
                    <tr>
                      <td class="des">This <t1>HERO</t1> is a <t1>WIZARD</t1>. They can attempt to cast 1 spell in your hero phase and attempt to unbind 1 spell in the enemy hero phase. They know the Arcane Bolt and Mystic Shield spells. In addition, they know any spells you have picked for them from the Spell Table.</td>
                    </tr>
                  </table>
                </div>
                <br><b>COMMAND ABILITIES</b><br>
                <div id="CommAbi_ABHORRANT" class="des" style="font-size: 110%;">
                  <table>
                    <tr>
                      <td class="des"><t1>Summon Men-at-arms:</t1>. You can use this command ability at the end of your movement phase. If you do so, pick 1 friendly model that has this command ability and has not used it before in the battle. That model summons 1 unit of up to 10 <t1>SERFS</t1> to the battlefield. The summoned unit is added to your army and must be set up wholly within 6" of the edge of the battlefield and more than 9" from any enemy units.</td>
                    </tr>
                  </table>
                </div>
              </td>
            </tr>
            <tr>
              <td style="font-weight: bold;">Optional Rule:</td>
              <td>You can pick 1 spell from the table below and add it to the warscroll.</td>
            </tr>
            <tr>
              <td style="font-weight: bold;">Keywords:</td>
              <td class="charKeys" id="KeysABHORRANT">DEATH, VAMPIRE, FLESH-EATER COURTS, ABHORRANT, HERO, WIZARD</td>
            </tr>
          </table>
        </div><!-- end of charType -->
      </div><!-- end of charSquare -->
      
      <div class="charSquare" id="COURTIER" onclick="clickChar(this.id)" style="display: block;">
        <div class="profile">
          <div class="numbers">
            <ul>
              <li class="q1">6"</li>
              <li class="q2">5+</li>
              <li class="q3">10</li>
              <li class="q4">4</li>
            </ul>
          </div><!-- end of profile numbers -->
        </div><!-- end of profile -->
        <div class="points" style="z-index: 2;">
          <div class="numbers">
            <ul>
              <li class="p1" id="ptsCost">5</li>
            </ul>
          </div>
        </div><!-- end of points -->
        <div class="charType">
          <table>
            <caption></caption>
            <tr>
              <th width=15%></th>
              <th width=85% class="charName">COURTIER</th>
            </tr>
            <tr>
              <td style="font-weight: bold;">[Ability]</td>
              <td class="gwTable">(Add the following to the warscroll):<br><br><b>ABILITIES</b><br>
                <div id="Abi_COURTIER" class="des" style="font-size: 110%;">
                  <table>
                    <tr>
                      <td class="des"><t1>Muster Serfs:</t1>. In your hero phase, if this model is in your army and on the battlefield, roll 6 dice. For each 2+, you can return 1 slain model to a friendly <t1>SERFS</t1> unit that is within 10" of this model. Slain models can be returned to more than one unit if you wish, but each successful dice roll can only be used to return a model to a single unit.</td>
                    </tr>
                  </table>
                </div>
              </td>
            </tr>
            <tr>
              <td style="font-weight: bold;">Keywords:</td>
              <td class="charKeys" id="KeysCOURTIER">DEATH, MORDANT, FLESH-EATER COURTS, COURTIER, HERO</td>
            </tr>
          </table>
        </div><!-- end of charType -->
      </div><!-- end of charSquare -->
      
      <div class="charSquare" id="LIEGE" onclick="clickChar(this.id)" style="display: block;">
        <div class="profile">
          <div class="numbers">
            <ul>
              <li class="q1">5"</li>
              <li class="q2">4+</li>
              <li class="q3">10</li>
              <li class="q4">5</li>
            </ul>
          </div><!-- end of profile numbers -->
        </div><!-- end of profile -->
        <div class="points" style="z-index: 2;">
          <div class="numbers">
            <ul>
              <li class="p1" id="ptsCost">6</li>
            </ul>
          </div>
        </div><!-- end of points -->
        <div class="charType">
          <table>
            <caption></caption>
            <tr>
              <th width=15%></th>
              <th width=85% class="charName">LIEGE</th>
            </tr>
            <tr>
              <td style="font-weight: bold;">[Ability]</td>
              <td class="gwTable">(Add the following to the warscroll):<br><br><b>COMMAND ABILITIES</b><br>
                <div id="CommAbi_LIEGE" class="des" style="font-size: 110%;">
                  <table>
                    <tr>
                      <td class="des"><t1>Endless Dutys:</t1>. You can use this command ability in your shooting phase or any combat phase. If you do so, pick 1 friendly <t1>OSSIARCH BONEREAPERS</t1> unit that is wholly within 12" of a model with this command ability. Add 1 to the Attacks characteristic of weapons used by that unit in that phase. You cannot pick the same unit to benefit from this command ability more than once per phase.</td>
                    </tr>
                  </table>
                </div>
              </td>
            </tr>
            <tr>
              <td style="font-weight: bold;">Optional Rule:</td>
              <td>You can chose to give this hero the LIEGE-KAVALOS keyword. If you want to do so, it must be given the Mounted Beast option (see step 4).</td>
            </tr>
            <tr>
              <td style="font-weight: bold;">Keywords:</td>
              <td class="charKeys" id="KeysLIEGE">DEATH, OSSIARCH BONEREAPERS, LIEGE, HERO</td>
            </tr>
          </table>
        </div><!-- end of charType -->
      </div><!-- end of charSquare -->
      
      <div class="charSquare" id="MORTISAN" onclick="clickChar(this.id)" style="display: block;">
        <div class="profile">
          <div class="numbers">
            <ul>
              <li class="q1">5"</li>
              <li class="q2">4+</li>
              <li class="q3">10</li>
              <li class="q4">5</li>
            </ul>
          </div><!-- end of profile numbers -->
        </div><!-- end of profile -->
        <div class="points" style="z-index: 2;">
          <div class="numbers">
            <ul>
              <li class="p1" id="ptsCost">6</li>
            </ul>
          </div>
        </div><!-- end of points -->
        <div class="charType">
          <table>
            <caption></caption>
            <tr>
              <th width=15%></th>
              <th width=85% class="charName">MORTISAN</th>
            </tr>
            <tr>
              <td style="font-weight: bold;">[Ability]</td>
              <td class="gwTable">(Add the following to the warscroll):<br><br><b>MAGIC</b><br>
                <div id="Magic_MORTISAN" class="des" style="font-size: 110%;">
                  <table>
                    <tr>
                      <td class="des">This <t1>HERO</t1> is a <t1>WIZARD</t1>. They can attempt to cast 1 spell in your hero phase and attempt to unbind 1 spell in the enemy hero phase. They know the Arcane Bolt and Mystic Shield spells. In addition, they know any spells you have picked for them from the Spell Table.</td>
                    </tr>
                  </table>
                </div>
              </td>
            </tr>
            <tr>
              <td style="font-weight: bold;">Optional Rule:</td>
              <td>You can pick 1 spell from the table below and add it to the warscroll.</td>
            </tr>
            <tr>
              <td style="font-weight: bold;">Keywords:</td>
              <td class="charKeys" id="KeysMORTISAN">DEATH, OSSIARCH BONEREAPERS, MORTISAN, HERO, WIZARD</td>
            </tr>
          </table>
        </div><!-- end of charType -->
      </div><!-- end of charSquare -->
      
    </div><!-- end of innerT3 -->
  </div><!-- end of row -->
  
  <div class="row" id="allCommandAbilities" style="display: none;">
    <div class="main">
      <p style="padding: 3px;">You can rename any command ability by double-clicking on the command ability name. If you want to assign a renamed command ability to your hero, make sure this command ability is renamed <b>before</b> you add it to the warscroll. Otherwise the new name will not show up on the warscroll.</p>
    
      <div style="overflow-x:auto;">
        <form id="commandAbilitiesForm" class="gwTable">
        <table id="commandAbiTable">
          <tr id="h0_coms__">
            <th class="headCap" id="h0_coms_c1" colspan="4" style="background-color: rgb(145 136 77); padding: 6px 14px;";>COMMAND ABILITIES – BLADES OF KHORNE</th>
            <th id="h0_coms__hi">x</th>
          </tr>
          
          <tr>
            <td id="r1_com_01c0" width=3%><input type="radio" name="archetype" id="com_01" onclick="extendedAddToWS(Lead_the_Attack, 'command', currentTab, this.id);"></td>
            <td id="r1_com_01c1" ondblclick="renameOne(event)" style="cursor: pointer; font-weight: bold;" width=25%>Lead the Attack</td>
            <td id="r1_com_01c2" style="font-size: 125%; padding: 2px 0px 0px 2px" width=70%>
              <div id="Lead_the_Attack" class="des">
                <table>
                  <tr>
                    <td class="des"><t1>Lead the Attack:</t1> You can use this command ability at the start of the combat phase. If you do so, pick 1 friendly unit wholly within 18" of this <t1>HERO</t1>. Add 1 to hit rolls for attacks made by that unit until the end of that phase.</td>
                  </tr>
                </table>
              </div>
            </td>
            <td width=2%></td>
            <td id="r1_com_01c9hi">Lead the Attack</td>            
          </tr>
          
          <tr>
            <td id="r1_com_02c0"><input type="radio" name="archetype" id="com_02" onclick="extendedAddToWS(Lead_the_Defence, 'command', currentTab, this.id);"></td>
            <td id="r1_com_02c1" ondblclick="renameOne(event)" style="cursor: pointer; font-weight: bold;">Lead the Defence</td>
            <td id="r1_com_02c2" style="font-size: 125%; padding: 2px 0px 0px 2px">
              <div id="Lead_the_Defence" class="des">
                <table>
                  <tr>
                    <td class="des"><t1>Lead the Defence:</t1> You can use this command ability at the start of the combat phase. If you do so, pick 1 friendly unit wholly within 18" of this <t1>HERO</t1>. Add 1 to save rolls for attacks that target that unit until the end of that phase.</td>
                  </tr>
                </table>
              </div>
            </td>
            <td></td>
            <td id="r1_com_02c9hi">Lead the Defence</td>            
          </tr>
          
        </table>
        </form>
      </div><!-- end of commandAbiTable -->
    
    </div><!-- end of main -->
  </div><!-- end of row (allCommandAbilities) -->

  <div class="row" id="allSpells" style="display: none;">
    <div class="main">
      <p style="padding: 3px;">You can rename any spell by double-clicking on the spell name. If you want to assign a renamed spell to your hero, make sure this spell is renamed <b>before</b> you add it to the warscroll. Otherwise the new name will not show up on the warscroll.</p>
    
      <div style="overflow-x:auto;">
        <form id="spellsForm" class="gwTable">
        <table id="spellsTable">
          <tr id="h1_spes__">
            <th class="headCap" id="h1_spes_c1" colspan="4" style="background-color: rgb(145 136 77); padding: 6px 14px;";>SPELL TABLE</th>
            <th id="h2_spes__hi">x</th>
          </tr>
          
          <tr>
            <td id="r1_spe_01c0" width=3%><input type="radio" name="arches" id="spe_01" onclick="extendedAddToWS(Ravenous_Hunger, 'magic', currentTab, this.id);"></td>
            <td id="r1_spe_01c1" ondblclick="renameOne(event)" style="cursor: pointer; font-weight: bold;" width=25%>Ravenous Hunger</td>
            <td id="r1_spe_01c2" style="font-size: 125%; padding: 2px 0px 0px 2px" width=70%>
              <div id="Ravenous_Hunger" class="des">
                <table>
                  <tr>
                    <td class="des"><t1>Ravenous Hunger:</t1> <i>The wizard invokes a relentless hunger for the flesh of the living, driving the warriors into a rabid frenzy.</i><br>This spell has a casting value of 5. If successfully cast, pick 1 friendly unit wholly within 18" of the caster that is visible to them. Add 1 to the Attacks characteristic of melee weapons used by that unit until your next hero phase.</td>
                  </tr>
                </table>
              </div>
            </td>
            <td width=2%></td>
            <td id="r1_spe_01c9hi">Ravenous Hunger</td>
          </tr>
          
          <tr>
            <td id="r1_spe_02c0"><input type="radio" name="arches" id="spe_02" onclick="extendedAddToWS(Raise_the_Dead, 'magic', currentTab, this.id);"></td>
            <td id="r1_spe_02c1" ondblclick="renameOne(event)" style="cursor: pointer; font-weight: bold;">Raise the Dead</td>
            <td id="r1_spe_02c2" style="font-size: 125%; padding: 2px 0px 0px 2px">
              <div id="Raise_the_Dead" class="des">
                <table>
                  <tr>
                    <td class="des"><t1>Raise the Dead:</t1> <i>Powerful necromancy saturates the land around this wizard, bringing warriors back to the fore to fight again.</i><br>This Spell has a casting value of 7. If successfully cast, pick 1 friendly unit within 12" of the caster that is visible to them. You may return a number of slain models that have a combined Wounds characteristic of D6 or less to that unit.</td>
                  </tr>
                </table>
              </div>
            </td>
            <td></td>
            <td id="r1_spe_02c9hi">Raise the Dead</td>
          </tr>
          
          <tr>
            <td id="r1_spe_03c0"><input type="radio" name="arches" id="spe_03" onclick="extendedAddToWS(Necrotic_Leech, 'magic', currentTab, this.id);"></td>
            <td id="r1_spe_03c1" ondblclick="renameOne(event)" style="cursor: pointer; font-weight: bold;">Necrotic Leech</td>
            <td id="r1_spe_03c2" style="font-size: 125%; padding: 2px 0px 0px 2px">
              <div id="Necrotic_Leech" class="des">
                <table>
                  <tr>
                    <td class="des"><t1>Necrotic Leech:</t1> <i>Amethyst tendrils reach out from the caster, sapping the life force of the enemy before replenishing their allies with stolen vigour.</i><br>This Spell has a casting value of 6. If successfully cast, pick 1 enemy unit within 12" of the caster that is visible to them and 1 friendly unit wholly within 12" of the caster that is visible to them. That enemy unit suffers D3 mortal wounds, then you can heal up to D3 wounds allocated to that friendly unit.</td>
                  </tr>
                </table>
              </div>
            </td>
            <td></td>
            <td id="r1_spe_03c9hi">Necrotic Leech</td>
          </tr>
          
          <tr>
            <td id="r1_spe_04c0"><input type="radio" name="arches" id="spe_04" onclick="extendedAddToWS(Immortal_Will, 'magic', currentTab, this.id);"></td>
            <td id="r1_spe_04c1" ondblclick="renameOne(event)" style="cursor: pointer; font-weight: bold;">Immortal Will</td>
            <td id="r1_spe_04c2" style="font-size: 125%; padding: 2px 0px 0px 2px">
              <div id="Immortal_Will" class="des">
                <table>
                  <tr>
                    <td class="des"><t1>Immortal Will:</t1> <i>Nearby allies are in thrall to the will of the caster, who drives them forward to unleash fury upon the enemy.</i><br>This Spell has a casting value of 6. If successfully cast, pick 1 friendly unit wholly within 18" of the caster that is visible to them. You can re-roll hit rolls of 1 for attacks made by that unit until your next hero phase.</td>
                  </tr>
                </table>
              </div>
            </td>
            <td></td>
            <td id="r1_spe_04c9hi">Immortal Will</td>
          </tr>
          
          <tr>
            <td id="r1_spe_05c0"><input type="radio" name="arches" id="spe_05" onclick="extendedAddToWS(Wall_of_Dust, 'magic', currentTab, this.id);"></td>
            <td id="r1_spe_05c1" ondblclick="renameOne(event)" style="cursor: pointer; font-weight: bold;">Wall of Dust</td>
            <td id="r1_spe_05c2" style="font-size: 125%; padding: 2px 0px 0px 2px">
              <div id="Wall_of_Dust" class="des">
                <table>
                  <tr>
                    <td class="des"><t1>Wall of Dust:</t1> <i>The caster conjures forth a wall of dust with the ferocity to strip flesh from bone.</i><br>This Spell has a casting value of 5. If successfully cast, pick 1 enemy unit and roll 1 dice for each model from that unit that is within 18" of the caster and visible to them. For each 6, that unit suffers 1 mortal wound.</td>
                  </tr>
                </table>
              </div>
            </td>
            <td></td>
            <td id="r1_spe_05c9hi">Wall of Dust</td>
          </tr>
          
          <tr>
            <td id="r1_spe_06c0"><input type="radio" name="arches" id="spe_06" onclick="extendedAddToWS(Circle_of_Death, 'magic', currentTab, this.id);"></td>
            <td id="r1_spe_06c1" ondblclick="renameOne(event)" style="cursor: pointer; font-weight: bold;">Circle of Death</td>
            <td id="r1_spe_06c2" style="font-size: 125%; padding: 2px 0px 0px 2px">
              <div id="Circle_of_Death" class="des">
                <table>
                  <tr>
                    <td class="des"><t1>Circle of Death:</t1> <i>The caster draws upon powerful Shyishan energies to unleash a wave of necrotic magic that engulfs nearby foes.</i><br>This Spell has a casting value of 7. If successfully cast, roll 1 dice for each enemy unit within 12" of the caster and visible to them. On a 1, nothing happens. On a 2-3, that unit suffers 1 mortal wound. On a 4+, that unit suffers D3 mortal wounds.</td>
                  </tr>
                </table>
              </div>
            </td>
            <td></td>
            <td id="r1_spe_06c9hi">Circle of Death</td>
          </tr>
          
        </table>
        </form>
      </div><!-- end of spellsTable -->
    
    </div><!-- end of main -->
  </div><!-- end of row (allSpells) -->
  <table style="width: 100%; background-color: white;"><tr><td></td></tr></table>
    
  <div style="display: none;">
    <p>Valid: <span id="validateStep2">not valid</span></p>
    <p id="rewriteSpellsCommand">needed to rewrite spells and command abilities</p>
  </div>
</div>

<div id="step3" class="anvilSteps"><!-- Anvil of Apotheosis: STEP 3 - THE ARMOURY -->
  <div class="row">
    <div class="main">
      <div>
        <h2><b>STEP 3 – THE ARMOURY</b></h2>
        <p>The next step is to arm your hero with weapons from the armoury. There are different weapon options for the Ossiarch Bonereapers and the Flesh-eater Courts, as well as a Shield option that can be taken by both. A hero can be armed with 1 of the following weapon options:</p>
        <p id="weaChosen"> • 1 one-handed melee weapon.<br>
         • 2 different one-handed melee weapons.<br>
         • 2 of the same one-handed melee weapon (+1 DP).<br>
         • 1 one-handed melee weapon and a shield.<br>
         • 1 two-handed melee weapon.<br>
         </p>
         <p>The weapon options and their profiles are listed in the table below, and each weapon option costs a number of destiny points as noted in the rightmost column of the table.</p>
         <p>For each weapon chosen, add the profil to your hero's warscroll and write the name of the weapon in the description section. For added flavour, you may wish to personalise your weapons – for example, your hero's Sword could be named 'The Blade of Doom' or you could use the Handbow profile to represent an arcane zap or other ranged attack.</p>
         <p>If your hero is armed with 2 of the same one-handed melee weapon, only add the weapon profile once to the warscroll but double its Attacks characteristic. This costs 1 additional destiny point on top of the destiny points cost for each weapon. For example, if your hero was armed with 2 Nadirite Blades, the Attacks characteristic would be 6 and it would cost 5 destiny points in total.</p>
         <p>In step 5, you will be presented with options to improve your hero's weapons.</p>
         <p>You can rename any weapon by double-clicking on the weapon name. If you want to assign a renamed weapon to your hero, make sure this weapon is renamed <b>before</b> you add it to the warscroll. Otherwise the new name will not show up on the warscroll.<br>(You cannot rename the shield because it will not show up on your warscroll directly, but only increase the save characteristic of your hero.)</p>
      </div><!-- end of step description -->

      <div style="overflow-x:auto;">
        <form id="weaponsForm" class="gwTable">
        <table>
          <tr id="h0_ohWs__">
            <th class="headCap" id="h0_ohWs_c1" colspan="9" style="background-color: rgb(145 136 77); padding: 6px 14px;";>OSSIARCH BONEREAPERS – ONE-HANDED WEAPONS</th>
            <th id="h0_ohWs__hi">x</th>
          </tr>
          <!-- <caption><b>ONE-HANDED WEAPONS</b></caption> -->
          <tr id="h1_ohW__">
            <th id="h1_ohW___c0" width=3%></th>
            <th id="h1_ohW___c1" width=48%>MELEE WEAPONS</th>
            <th id="h1_ohW___c2" width=7%>Rng</th>
            <th id="h1_ohW___c3" width=7%>Att</th>
            <th id="h1_ohW___c4" width=7%>Hit</th>
            <th id="h1_ohW___c5" width=7%>Wnd</th>
            <th id="h1_ohW___c6" width=7%>Rnd</th>
            <th id="h1_ohW___c7" width=7%>Dmg</th>
            <th id="h1_ohW___c8" width=7%>DP</th>
            <th id="h1_ohW___c9hi">x</th>
          </tr>
          <tr id="r1_ohW_01">
            <td id="r1_ohW_01c0"><input type="checkbox" id="ohW_01" onclick="clickWea(this.id)"></td>
            <td id="r1_ohW_01c1" ondblclick="renameOne(event)" style="cursor: pointer;">Spirit Dagger</td>
            <td id="r1_ohW_01c2">1"</td>
            <td id="r1_ohW_01c3">3</td>
            <td id="r1_ohW_01c4">4+</td>
            <td id="r1_ohW_01c5">4+</td>
            <td id="r1_ohW_01c6">-1</td>
            <td id="r1_ohW_01c7">1</td>
            <td id="r1_ohW_01c8">1</td>
            <td id="r1_ohW_01c9hi">Spirit Dagger</td>
          </tr>
          <tr id="r1_ohW_02">
            <td id="r1_ohW_02c0"><input type="checkbox" id="ohW_02" onclick="clickWea(this.id)"></td>
            <td id="r1_ohW_02c1" ondblclick="renameOne(event)" style="cursor: pointer;">Nadirite* Blade</td>
            <td id="r1_ohW_02c2">1"</td>
            <td id="r1_ohW_02c3">3</td>
            <td id="r1_ohW_02c4">3+</td>
            <td id="r1_ohW_02c5">4+</td>
            <td id="r1_ohW_02c6">-</td>
            <td id="r1_ohW_02c7">1</td>
            <td id="r1_ohW_02c8">2</td>
            <td id="r1_ohW_02c9hi">Nadirite* Blade</td>
          </tr>
          <tr id="r1_ohW_03">
            <td id="r1_ohW_03c0"><input type="checkbox" id="ohW_03" onclick="clickWea(this.id)"></td>
            <td id="r1_ohW_03c1" ondblclick="renameOne(event)" style="cursor: pointer;">Dread Falchion</td>
            <td id="r1_ohW_03c2">1"</td>
            <td id="r1_ohW_03c3">3</td>
            <td id="r1_ohW_03c4">4+</td>
            <td id="r1_ohW_03c5">3+</td>
            <td id="r1_ohW_03c6">-1</td>
            <td id="r1_ohW_03c7">1</td>
            <td id="r1_ohW_03c8">1</td>
            <td id="r1_ohW_03c9hi">Dread Falchion</td>
          </tr>
          <tr id="r1_ohW_04">
            <td id="r1_ohW_04c0"><input type="checkbox" id="ohW_04" onclick="clickWea(this.id)"></td>
            <td id="r1_ohW_04c1" ondblclick="renameOne(event)" style="cursor: pointer;">Nadirite* Spear</td>
            <td id="r1_ohW_04c2">2"</td>
            <td id="r1_ohW_04c3">3</td>
            <td id="r1_ohW_04c4">4+</td>
            <td id="r1_ohW_04c5">4+</td>
            <td id="r1_ohW_04c6">-</td>
            <td id="r1_ohW_04c7">1</td>
            <td id="r1_ohW_04c8">2</td>
            <td id="r1_ohW_04c9hi">Nadirite* Spear</td>
          </tr>
          <tr id="r1_ohW_05">
            <td id="r1_ohW_05c0"><input type="checkbox" id="ohW_05" onclick="clickWea(this.id)"></td>
            <td id="r1_ohW_05c1" ondblclick="renameOne(event)" style="cursor: pointer;">Ossified Talon</td>
            <td id="r1_ohW_05c2">1"</td>
            <td id="r1_ohW_05c3">2</td>
            <td id="r1_ohW_05c4">4+</td>
            <td id="r1_ohW_05c5">4+</td>
            <td id="r1_ohW_05c6">-1</td>
            <td id="r1_ohW_05c7">1</td>
            <td id="r1_ohW_05c8">0</td>
            <td id="r1_ohW_05c9hi">Ossified Talon</td>
          </tr>
          <!-- <caption><b>abilities</b></caption> -->
          <tr id="r1_abi_01">
            <td class="gwTable" colspan="9" style="text-align: left; padding: 6px;"><i>* If your hero is armed with a Nadirite weapon, add the following ability to your hero’s warscroll:</i><br><b>ABILITIES</b><br>
              <div id="Abi_NADIRITE" class="des" style="font-size: 110%;">
                <table>
                  <tr>
                    <td class="des"><t1>Nadirite Weapons:</t1>. If the unmodified hit roll for an attack made with a Nadirite weapon is 6, that attack scores 2 hits on the target instead of 1. Make a wound and save roll for each hit.</td>
                  </tr>
                </table>
              </div>
            </td>
          </tr>
          <tr id="h1_ohWs__">
            <th class="headCap" id="h1_ohWs_c1" colspan="9" style="background-color: rgb(145 136 77); padding: 6px 14px;";>FLESH-EATER COURTS – ONE-HANDED WEAPONS</th>
            <th id="h1_ohWs__hi">x</th>
          </tr>
          <!-- <caption><b>ONE-HANDED WEAPONS</b></caption> -->
          <tr id="h2_ohW__">
            <th id="h2_ohW___c0" width=3%></th>
            <th id="h2_ohW___c1" width=48%>MELEE WEAPONS</th>
            <th id="h2_ohW___c2" width=7%>Rng</th>
            <th id="h2_ohW___c3" width=7%>Att</th>
            <th id="h2_ohW___c4" width=7%>Hit</th>
            <th id="h2_ohW___c5" width=7%>Wnd</th>
            <th id="h2_ohW___c6" width=7%>Rnd</th>
            <th id="h2_ohW___c7" width=7%>Dmg</th>
            <th id="h2_ohW___c8" width=7%>DP</th>
            <th id="h2_ohW___c9hi">x</th>
          </tr>
          <tr id="r1_ohW_06">
            <td id="r1_ohW_06c0"><input type="checkbox" id="ohW_06" onclick="clickWea(this.id)"></td>
            <td id="r1_ohW_06c1" ondblclick="renameOne(event)" style="cursor: pointer;">Bone Club</td>
            <td id="r1_ohW_06c2">1"</td>
            <td id="r1_ohW_06c3">3</td>
            <td id="r1_ohW_06c4">4+</td>
            <td id="r1_ohW_06c5">3+</td>
            <td id="r1_ohW_06c6">-</td>
            <td id="r1_ohW_06c7">2</td>
            <td id="r1_ohW_06c8">1</td>
            <td id="r1_ohW_06c9hi">Bone Club</td>
          </tr>
          <tr id="r1_ohW_07">
            <td id="r1_ohW_07c0"><input type="checkbox" id="ohW_07" onclick="clickWea(this.id)"></td>
            <td id="r1_ohW_07c1" ondblclick="renameOne(event)" style="cursor: pointer;">Bloodied Fangs</td>
            <td id="r1_ohW_07c2">1"</td>
            <td id="r1_ohW_07c3">1</td>
            <td id="r1_ohW_07c4">4+</td>
            <td id="r1_ohW_07c5">3+</td>
            <td id="r1_ohW_07c6">-1</td>
            <td id="r1_ohW_07c7">3</td>
            <td id="r1_ohW_07c8">1</td>
            <td id="r1_ohW_07c9hi">Bloodied Fangs</td>
          </tr>
          <tr id="r1_ohW_08">
            <td id="r1_ohW_08c0"><input type="checkbox" id="ohW_08" onclick="clickWea(this.id)"></td>
            <td id="r1_ohW_08c1" ondblclick="renameOne(event)" style="cursor: pointer;">Barrow Blade</td>
            <td id="r1_ohW_08c2">1"</td>
            <td id="r1_ohW_08c3">3</td>
            <td id="r1_ohW_08c4">3+</td>
            <td id="r1_ohW_08c5">4+</td>
            <td id="r1_ohW_08c6">-</td>
            <td id="r1_ohW_08c7">1</td>
            <td id="r1_ohW_08c8">1</td>
            <td id="r1_ohW_08c9hi">Barrow Blade</td>
          </tr>
          <tr id="r1_ohW_09">
            <td id="r1_ohW_09c0"><input type="checkbox" id="ohW_09" onclick="clickWea(this.id)"></td>
            <td id="r1_ohW_09c1" ondblclick="renameOne(event)" style="cursor: pointer;">Decrepit Spear</td>
            <td id="r1_ohW_09c2">2"</td>
            <td id="r1_ohW_09c3">3</td>
            <td id="r1_ohW_09c4">4+</td>
            <td id="r1_ohW_09c5">4+</td>
            <td id="r1_ohW_09c6">-</td>
            <td id="r1_ohW_09c7">1</td>
            <td id="r1_ohW_09c8">1</td>
            <td id="r1_ohW_09c9hi">Decrepit Spear</td>
          </tr>
          <tr id="r1_ohW_10">
            <td id="r1_ohW_10c0"><input type="checkbox" id="ohW_10" onclick="clickWea(this.id)"></td>
            <td id="r1_ohW_10c1" ondblclick="renameOne(event)" style="cursor: pointer;">Filthy Talons</td>
            <td id="r1_ohW_10c2">1"</td>
            <td id="r1_ohW_10c3">4</td>
            <td id="r1_ohW_10c4">4+</td>
            <td id="r1_ohW_10c5">4+</td>
            <td id="r1_ohW_10c6">-</td>
            <td id="r1_ohW_10c7">1</td>
            <td id="r1_ohW_10c8">1</td>
            <td id="r1_ohW_10c9hi">Filthy Talons</td>
          </tr>
          
          <tr>
            <td colspan="9" style="background-color: white;";></td>
          </tr>
          
          <tr id="r1_oh2_01">
            <td id="r1_oh2_01c0"><input type="checkbox" id="oh2_01" onclick="clickWea(this.id)"></td>
            <td id="r1_oh2_01c1">two of the same one-handed melee weapon</td>
            <td id="r1_oh2_01c3" colspan=3> doubles the attack characteristic</td>
            <td id="r1_oh2_01c4" colspan=3>(costs 2* weapons DP +1 DP)</td>
            <td id="r1_oh2_01c8">0</td> 
            <td id="r1_oh2_01c9hi">x</td>
          </tr>
          
          <tr>
            <td colspan="9" style="background-color: white;";></td>
          </tr>
          
          <tr id="h0_thWs__">
            <th class="headCap" id="h0_thWs_c1" colspan="9" style="background-color: rgb(145 136 77); padding: 6px 14px;";>OSSIARCH BONEREAPERS – TWO-HANDED WEAPONS</th>
            <th id="h0_thWs__hi">x</th>
          </tr>
          <!-- <caption><b>TWO-HANDED WEAPONS</b></caption> -->
          <tr id="h1_thW__">
            <th id="h1_thW___c0"></th>
            <th id="h1_thW___c1">MELEE WEAPONS</th>
            <th id="h1_thW___c2">Rng</th>
            <th id="h1_thW___c3">Att</th>
            <th id="h1_thW___c4">Hit</th>
            <th id="h1_thW___c5">Wnd</th>
            <th id="h1_thW___c6">Rnd</th>
            <th id="h1_thW___c7">Dmg</th>
            <th id="h1_thW___c8">DP</th>
            <th id="h1_thW___c9hi">x</th>
          </tr>
          <tr id="r1_thW_01">
            <td id="r1_thW_01c0"><input type="checkbox" id="thW_01" onclick="clickWea(this.id)"></td>
            <td id="r1_thW_01c1" ondblclick="renameOne(event)" style="cursor: pointer;">Soulcleaver Greatblade</td>
            <td id="r1_thW_01c2">1"</td>
            <td id="r1_thW_01c3">3</td>
            <td id="r1_thW_01c4">3+</td>
            <td id="r1_thW_01c5">3+</td>
            <td id="r1_thW_01c6">-2</td>
            <td id="r1_thW_01c7">2</td>
            <td id="r1_thW_01c8">3</td>
            <td id="r1_thW_01c9hi">Soulcleaver Greatblade</td>
          </tr>
          <tr id="r1_thW_02">
            <td id="r1_thW_02c0"><input type="checkbox" id="thW_02" onclick="clickWea(this.id)"></td>
            <td id="r1_thW_02c1" ondblclick="renameOne(event)" style="cursor: pointer;">Soul Scythe</td>
            <td id="r1_thW_02c2">2"</td>
            <td id="r1_thW_02c3">4</td>
            <td id="r1_thW_02c4">4+</td>
            <td id="r1_thW_02c5">4+</td>
            <td id="r1_thW_02c6">-1</td>
            <td id="r1_thW_02c7">1</td>
            <td id="r1_thW_02c8">1</td>
            <td id="r1_thW_02c9hi">Soul Scythe</td>
          </tr>
          <tr id="r1_thW_03">
            <td id="r1_thW_03c0"><input type="checkbox" id="thW_03" onclick="clickWea(this.id)"></td>
            <td id="r1_thW_03c1" ondblclick="renameOne(event)" style="cursor: pointer;">Soul Staff</td>
            <td id="r1_thW_03c2">1"</td>
            <td id="r1_thW_03c3">3</td>
            <td id="r1_thW_03c4">4+</td>
            <td id="r1_thW_03c5">3+</td>
            <td id="r1_thW_03c6">-1</td>
            <td id="r1_thW_03c7">D3</td>
            <td id="r1_thW_03c8">1</td>
            <td id="r1_thW_03c9hi">Soul Staff</td>
          </tr>
          <tr id="r1_thW_04">
            <td id="r1_thW_04c0"><input type="checkbox" id="thW_04" onclick="clickWea(this.id)"></td>
            <td id="r1_thW_04c1" ondblclick="renameOne(event)" style="cursor: pointer;">Dread Halberd</td>
            <td id="r1_thW_04c2">2"</td>
            <td id="r1_thW_04c3">3</td>
            <td id="r1_thW_04c4">4+</td>
            <td id="r1_thW_04c5">3+</td>
            <td id="r1_thW_04c6">-2</td>
            <td id="r1_thW_04c7">2</td>
            <td id="r1_thW_04c8">2</td>
            <td id="r1_thW_04c9hi">Dread Halberd</td>
          </tr>
          <tr id="h1_thWs__">
            <th class="headCap" id="h1_thWs_c1" colspan="9" style="background-color: rgb(145 136 77); padding: 6px 14px;";>FLESH-EATER COURTS – TWO-HANDED WEAPONS</th>
            <th id="h1_thWs__hi">x</th>
          </tr>
          <!-- <caption><b>TWO-HANDED WEAPONS</b></caption> -->
          <tr id="h2_thW__">
            <th id="h2_thW___c0"></th>
            <th id="h2_thW___c1">MELEE WEAPONS</th>
            <th id="h2_thW___c2">Rng</th>
            <th id="h2_thW___c3">Att</th>
            <th id="h2_thW___c4">Hit</th>
            <th id="h2_thW___c5">Wnd</th>
            <th id="h2_thW___c6">Rnd</th>
            <th id="h2_thW___c7">Dmg</th>
            <th id="h2_thW___c8">DP</th>
            <th id="h2_thW___c9hi">x</th>
          </tr>
          <tr id="r1_thW_05">
            <td id="r1_thW_05c0"><input type="checkbox" id="thW_05" onclick="clickWea(this.id)"></td>
            <td id="r1_thW_05c1" ondblclick="renameOne(event)" style="cursor: pointer;">Massive Bone Club</td>
            <td id="r1_thW_05c2">1"</td>
            <td id="r1_thW_05c3">3</td>
            <td id="r1_thW_05c4">4+</td>
            <td id="r1_thW_05c5">3+</td>
            <td id="r1_thW_05c6">-1</td>
            <td id="r1_thW_05c7">3</td>
            <td id="r1_thW_05c8">2</td>
            <td id="r1_thW_05c9hi">Massive Bone Club</td>
          </tr>
          <tr id="r1_thW_06">
            <td id="r1_thW_06c0"><input type="checkbox" id="thW_06" onclick="clickWea(this.id)"></td>
            <td id="r1_thW_06c1" ondblclick="renameOne(event)" style="cursor: pointer;">Rusty Halberd</td>
            <td id="r1_thW_06c2">2"</td>
            <td id="r1_thW_06c3">3</td>
            <td id="r1_thW_06c4">4+</td>
            <td id="r1_thW_06c5">3+</td>
            <td id="r1_thW_06c6">-1</td>
            <td id="r1_thW_06c7">2</td>
            <td id="r1_thW_06c8">2</td>
            <td id="r1_thW_06c9hi">Rusty Halberd</td>
          </tr>
          <tr id="r1_thW_07">
            <td id="r1_thW_07c0"><input type="checkbox" id="thW_07" onclick="clickWea(this.id)"></td>
            <td id="r1_thW_07c1" ondblclick="renameOne(event)" style="cursor: pointer;">Ancient Great Sword</td>
            <td id="r1_thW_07c2">1"</td>
            <td id="r1_thW_07c3">3</td>
            <td id="r1_thW_07c4">3+</td>
            <td id="r1_thW_07c5">3+</td>
            <td id="r1_thW_07c6">-1</td>
            <td id="r1_thW_07c7">2</td>
            <td id="r1_thW_07c8">2</td>
            <td id="r1_thW_07c9hi">Ancient Great Sword</td>
          </tr>
          
          <tr>
            <td colspan="9" style="background-color: white;";></td>
            <td id="p2___c9hi">x</td>  <!-- clear row no2 -->
          </tr>
          
          <tr id="h0_shis__">
            <th class="headCap" id="h0_shis_c1" colspan="9" style="background-color: rgb(145 136 77); padding: 6px 14px;";>SHIELD</th>
            <th id="h0_shis__hi">x</th>
          </tr>
          <!-- <caption><b>SHIELD</b></caption> -->
          <tr id="r1_shi_01">
            <td id="r1_shi_01c0"><input type="checkbox" id="shi_01" onclick="clickWea(this.id)"></td>
            <td id="r1_shi_01c1" colspan=7><b>[Characteristic Enhancement]</b><br>Improve your hero's Save characteristic by 1</td>
            <td id="r1_shi_01c8">2</td> 
            <td id="r1_shi_01c9hi">x</td>
          </tr>
          
          <tr>
            <td colspan="9" style="background-color: white; border-style: none;";></td>
          </tr>
        </table>
        </form>
      </div><!-- end of weaponTable -->
    </div><!-- end of calls "main" -->
    <p></p>
  </div><!-- end of class "row" -->

  <div style="display: none;">
    letzte Spalte ausblenden <button onclick="show_hide('none');">verstecke</button><br>
    <br>
    letzte Spalte ausblenden <button onclick="show_hide('inline');">zeige</button><br>
    <br>
    <button onclick="resetCheckStep3()">Reset CheckBoxes</button>
    <button onclick="resetWeaName()">Reset WeaNames</button>
    <br>
    <p>Valid: <span id="validateStep3">not valid</span></p>
    <p id="rewriteHeroArmoury">needed to rewrite hero's armoury</p>
  </div>
</div><!-- end of class "anvilSteps" -->

<!--<div id="step4" class="anvilSteps">
  <div class="row">
    <div class="main">
      <div>
        <h2><b>STEP 4 – ARCHETYPES</b></h2>
        <p>Next, you need to pick 1 of the following archtypes for your hero and then any associated abilities. There are 3 archetypes to choose from: <b>Commander</b>, <b>Acolyte</b> or <b>Mage</b>. Each of these will unlock different types of abilities for your hero. Commanders have access to command abilities. Acolytes have access to prayers and Mages have access to spells. Archetypes do not cost any destiny points.</p>
        <p>You can rename any ability by double-clicking on the command ability name, prayer name or spell name. If you want to assign it to your hero, make sure it's renamed <b>before</b> you add it to the warscroll. Otherwise the new name will not show up on the warscroll.</p>
      </div>
      <div style="overflow-x:auto;">
        <form id="archetypeForm" class="gwTable">
        <table id="archetypesTable">
          <tr id="h0_arcs__">
            <th class="headCap" id="h0_arcs_c1" colspan="4" style="background-color: rgb(145 136 77); padding: 6px 14px;";>COMMANDER</th>
            <th id="h0_arcs__hi">x</th>
          </tr>
          <tr>
            <td colspan="3" style="text-align: left; padding: 6px 14px;"><t1>Keywords:</t1> None</td>
            <td></td>
          </tr>
          <tr>
            <td colspan="3" style="text-align: left; padding: 6px 14px;"><t1>Restrictions:</t1> No <t1>DEATHMAGE</t1> or <t1>MASTERCLAN</t1></td>
            <td id=""></td>
          </tr>
          <tr>
            <td colspan="3" style="text-align: left; padding: 6px 14px;"><t1>[Ability]</t1> Pick 1 of the following command abilities to add it to your hero’s warscroll.</td>
            <td></td>
          </tr>
          
          <tr>
            <td id="r1_arc_01c0"><input type="radio" name="archestype" id="arc_01" onclick="extAddToWS(Lead_the_Attack, 'command', currentTab, this.id);"></td>
            <td id="r1_arc_01c1" ondblclick="renameOne(event)" style="cursor: pointer; font-weight: bold;">Lead the Attack</td>
            <td id="r1_arc_01c2" style="font-size: 125%; padding: 2px 0px 0px 2px">
              <div id="Lead_the_Attack" class="des">
                <table>
                  <tr>
                    <td class="des"><t1>Lead the Attack:</t1> You can use this command ability at the start of the combat phase. If you do so, pick 1 friendly unit wholly within 18" of this <t1>HERO</t1>. Add 1 to hit rolls for attacks made by that unit until the end of that phase.</td>
                  </tr>
                </table>
              </div>
            </td>
            <td></td>
            <td id="r1_arc_01c9hi">Lead the Attack</td>            
          </tr>
          
          <tr>
            <td id="r1_arc_02c0"><input type="radio" name="archetype" id="arc_02" onclick="extAddToWS(Lead_the_Defence, 'command', currentTab, this.id);"></td>
            <td id="r1_arc_02c1" ondblclick="renameOne(event)" style="cursor: pointer; font-weight: bold;">Lead the Defence</td>
            <td id="r1_arc_02c2" style="font-size: 125%; padding: 2px 0px 0px 2px">
              <div id="Lead_the_Defence" class="des">
                <table>
                  <tr>
                    <td class="des"><t1>Lead the Defence:</t1> You can use this command ability at the start of the combat phase. If you do so, pick 1 friendly unit wholly within 18" of this <t1>HERO</t1>. Add 1 to save rolls for attacks that target that unit until the end of that phase.</td>
                  </tr>
                </table>
              </div>
            </td>
            <td></td>
            <td id="r1_arc_02c9hi">Lead the Defence</td>            
          </tr>
          
          <tr style="background-color: white;";>
            <td id="" width=3%><br></td>
            <td id="" width=25%></td>
            <td id="" width=70%></td>
            <td id="" width=2%></td>
            <td id="p3___c9hi">x</td>
          </tr>
          
          <tr id="h1_arcs__">
            <th class="headCap" id="h1_arcs_c1" colspan="4" style="background-color: rgb(145 136 77); padding: 6px 14px;";>ACOLYTE</th>
            <th id="h1_arcs__hi">x</th>
          </tr>
          <tr>
            <td colspan="3" style="text-align: left; padding: 6px 14px;"><t1>Keywords:</t1> <t1>PRIEST</t1></td>
            <td id=""></td>
          </tr>
          <tr>
            <td colspan="3" style="text-align: left; padding: 6px 14px;"><t1>Restrictions:</t1> No <t1>DAEMON</t1>, <t1>DEATHMAGE</t1>, <t1>SAURUS</t1> or <t1>SKAVEN</t1> (except <t1>CLANS PESTILENS</t1>)</td>
            <td></td>
          </tr>
          <tr>
            <td class="des" colspan="3" style="text-align: left; padding: 6px 14px;">
              <t1>[Ability]</t1> Pick 1 of the following prayers bellow to add the following ability and the chosen prayer to your hero’s warscroll.<br><br>
              <div id="Divine_Prayers" class="des" style="font-size: 115%;">
                <table>
                  <tr>
                    <td class="des"><t1>Divine Prayers:</t1> In your hero phase, this <t1>HERO</t1> can chant the following prayer. If they do so, make a prayer roll by rolling a dice. On a 1-2, the prayer is not answered. On a 3+, the prayer is answered.</td>
                  </tr>
                </table>
              </div>
            </td>
            <td></td>
          </tr>
          
          <tr>
            <td id="r1_arc_03c0"><input type="radio" name="archetype" id="arc_03" onclick="extAddToWS(Wrathful_Invocation, 'abilities', currentTab, this.id);"></td>
            <td id="r1_arc_03c1" ondblclick="renameOne(event)" style="cursor: pointer; font-weight: bold;">Wrathful Invocation</td>
            <td id="r1_arc_03c2" style="font-size: 125%; padding: 2px 0px 0px 2px">
              <div id="Wrathful_Invocation" class="des">
                <table>
                  <tr>
                    <td class="des"><t1>Wrathful Invocation:</t1> If this prayer is answered, pick 1 enemy unit within 18" of this <t1>HERO</t1>. That unit suffers D3 mortal wounds.</td>
                  </tr>
                </table>
              </div>
            </td>
            <td></td>
            <td id="r1_arc_03c9hi">Wrathful Invocation</td>
          </tr>
          
          <tr>
            <td id="r1_arc_04c0"><input type="radio" name="archetype" id="arc_04" onclick="extAddToWS(Shield_of_Faith, 'abilities', currentTab, this.id);"></td>
            <td id="r1_arc_04c1" ondblclick="renameOne(event)" style="cursor: pointer; font-weight: bold;">Shield of Faith</td>
            <td id="r1_arc_04c2" style="font-size: 125%; padding: 2px 0px 0px 2px">
              <div id="Shield_of_Faith" class="des">
                <table>
                  <tr>
                    <td class="des"><t1>Shield of Faith:</t1> If this prayer is answered, pick 1 friendly unit wholly within 12" of this <t1>HERO</t1>. Until the start of your next hero phase, roll a dice each time a wound or mortal wound is allocated to that unit. On a 6, that wound or mortal wound is negated.</td>
                  </tr>
                </table>
              </div>
            </td>
            <td></td>
            <td id="r1_arc_04c9hi">Shield of Faith</td>
          </tr>
          
          <tr style="background-color: white;";>
            <td><br></td>
            <td colspan=3></td>
            <td id="p4___c9hi">x</td>
          </tr>
          
          <tr id="h1_arcs__">
            <th class="headCap" id="h1_arcs_c1" colspan="4" style="background-color: rgb(145 136 77); padding: 6px 14px;";>MAGE</th>
            <th id="h2_arcs__hi">x</th>
          </tr>
          <tr>
            <td colspan="3" style="text-align: left; padding: 6px 14px;"><t1>Keywords:</t1> <t1>WIZARD</t1></td>
            <td></td>
          </tr>
          <tr>
            <td colspan="3" style="text-align: left; padding: 6px 14px;"><t1>Restrictions:</t1> No <t1>DUARDIN</t1>, <t1>KHORNE</t1> or <t1>SAURUS</t1></td>
            <td id=""></td>
          </tr>
          <tr>
            <td colspan="3" style="text-align: left; padding: 6px 14px;">
              <t1>[Ability]</t1> Pick up to 1 spell from the Spell Table and add it to your hero’s warscroll.<br><br><t1>MAGIC</t1><br>
              <div id="Magic_Abi" class="des" style="font-size: 115%;">
                <table>
                  <tr>
                    <td class="des">This <t1>HERO</t1> is a <t1>WIZARD</t1>. They can attempt to cast 1 spell in your hero phase and attempt to unbind 1 spell in the enemy hero phase. They know the Arcane Bolt and Mystic Shield spells. In addition, they know any spells you have picked for them from the Spell Table.</td>
                  </tr>
                </table>
              </div>
            </td>
            <td></td>
          </tr>
          
          <tr>
            <td id="r1_arc_05c0"><input type="radio" name="archetype" id="arc_05" onclick="extAddToWS(Aura_of_Protection, 'magic', currentTab, this.id);"></td>
            <td id="r1_arc_05c1" ondblclick="renameOne(event)" style="cursor: pointer; font-weight: bold;">Aura of Protection</td>
            <td id="r1_arc_05c2" style="font-size: 125%; padding: 2px 0px 0px 2px">
              <div id="Aura_of_Protection" class="des">
                <table>
                  <tr>
                    <td class="des"><t1>Aura of Protection:</t1> This spell has a casting value of 7. If successfully cast, until the start of your next hero phase, roll a dice each time a wound or mortal wound is allocated to a friendly unit wholly within 12" of the caster. On a 6, that wound or mortal wound is negated.</td>
                  </tr>
                </table>
              </div>
            </td>
            <td></td>
            <td id="r1_arc_05c9hi">Aura of Protection</td>
          </tr>
          
          <tr>
            <td id="r1_arc_06c0"><input type="radio" name="archetype" id="arc_06" onclick="extAddToWS(Curse_of_Damnation, 'magic', currentTab, this.id);"></td>
            <td id="r1_arc_06c1" ondblclick="renameOne(event)" style="cursor: pointer; font-weight: bold;">Curse of Damnation</td>
            <td id="r1_arc_06c2" style="font-size: 125%; padding: 2px 0px 0px 2px">
              <div id="Curse_of_Damnation" class="des">
                <table>
                  <tr>
                    <td class="des"><t1>Curse of Damnation:</t1> This spell has a casting value of 7. If successfully cast, pick 1 enemy unit within 12" of the caster and visible to them. That unit suffers D3 mortal wounds. In addition, subtract 1 from save rolls for attacks that target that unit until the start of your next hero phase.</td>
                  </tr>
                </table>
              </div>
            </td>
            <td></td>
            <td id="r1_arc_06c9hi">Curse of Damnation</td>
          </tr>
          
          <tr>
            <td id="r1_arc_07c0"><input type="radio" name="archetype" id="arc_07" onclick="extAddToWS(Wildfire, 'magic', currentTab, this.id);"></td>
            <td id="r1_arc_07c1" ondblclick="renameOne(event)" style="cursor: pointer; font-weight: bold;">Wildfire</td>
            <td id="r1_arc_07c2" style="font-size: 125%; padding: 2px 0px 0px 2px">
              <div id="Wildfire" class="des">
                <table>
                  <tr>
                    <td class="des"><t1>Wildfire:</t1> This spell has a casting value of 6. If successfully cast, pick 1 enemy unit. Roll 1 dice for each model in that unit that is within 12" of the caster and visible to them. For each 5+, that unit suffers 1 mortal wound. If that unit has only 1 model, roll 3 dice instead of 1.</td>
                  </tr>
                </table>
              </div>
            </td>
            <td></td>
            <td id="r1_arc_07c9hi">Wildfire</td>
          </tr>
          
          <tr>
            <td id="r1_arc_08c0"><input type="radio" name="archetype" id="arc_08" onclick="extAddToWS(Raise_Dead, 'magic', currentTab, this.id);"></td>            
            <td id="r1_arc_08c1" ondblclick="renameOne(event)" style="cursor: pointer; font-weight: bold;">Raise Dead</td>
            <td id="r1_arc_08c2" style="font-size: 125%; padding: 2px 0px 0px 2px">
              <div id="Raise_Dead" class="des">
                <table>
                  <tr>
                    <td class="des"><t1>Raise Dead:</t1> This spell has a casting value of 6. If successfully cast, pick 1 friendly unit within 12" of the caster and visible to them. You may return a number of slain models that have a combined Wounds characteristic of D3 or less to that unit.</td>
                  </tr>
                </table>
              </div>
            </td>
            <td></td>
            <td id="r1_arc_08c9hi">Raise Dead</td>
          </tr>
          <tr>
            <td colspan="3" style="background-color: white; border-style: none;";></td>
          </tr>
          
        </table>
        </form>
      </div>
    </div>
    <p></p>
  </div>

  <div style="display: none;">
    letzte Spalte ausblenden <button onclick="show_hide('none');">verstecke</button><br>
    <br>
    letzte Spalte ausblenden <button onclick="show_hide('inline');">zeige</button><br>
    <br>
    <button onclick="resetCheckStep4()">Reset CheckBoxes</button>
    <button onclick="resetDescrName('archetypeForm')">Reset AbiNames</button>
    <br>
    <p>Valid: <span id="validateStep4">not valid</span></p>
    <p id="rewriteSpellsPrayers">needed to rewrite spells and prayers</p>
  </div>
</div> -->

<div id="step4" class="anvilSteps"><!-- Anvil of Apotheosis: STEP 5 - BESTIAL COMPANION -->
  <div class="row" id="beastialCompanions1">
    <div class="main">
      <div>
        <h2><b>STEP 4 – BESTIAL COMPANION</b></h2>
        <p>In this step, you need to decide whether or not your hero will have a bestial companion. There are 3 types of bestial companion: <b>Minor Beast</b>, <b>Mounted Beast</b> or <b>Gargantuan Beast</b>. A hero can only have 1 bestial companion picked for them. A Minor Beast follows or guards your hero, such as a swarm of bats or a constructed throne of bones. A Mounted Beast can be anything from an undead stallion to an ethereal steed. A Gargantuan Beast is a truly colossal mount, such as a Zombie Dragon, Terrorgheist or Dread Abyssal. If you do not want to choose a bestial companion for your hero, you can skip this step.</p>
        <p>You can pick 1 of the following bestial companions. Each costs a number of destiny points as listed in the table.</p>
        <p>You can rename any beastial weapon by double-clicking on the weapon name. You can also give your beastial Companion a name, if you like. If you want to assign a bestial companion with renamed weapon(s) and/or its own name to your hero, make sure to rename anything you want <b>before</b> you add the beast to the warscroll. Otherwise the new name(s) will not show up on the warscroll.</p>
      </div><!-- end of step description -->

      <div style="overflow-x:auto;">
        <form id="beastsForm" class="gwTable">
        <table id="weaponsTable">
          <tr id="h0_miBs__">
            <th id="r1_miB_00c0" class="headCap" colspan=2 style="background-color: rgb(145 136 77); padding: 6px 14px;";>MINOR BEAST</th>
            <th id="r1_miB_00c1" class="headCap" ondblclick="renameOne(event)" colspan=6 style="background-color: rgb(145 136 77); padding: 6px 14px; cursor: pointer;";>[double-click here to name your beast]</th>
            <th id="r1_miB_00c9hi">[double-click here to name your beast]</th>
          </tr>
          <tr id="h1_miB_01">
            <td id="h1_miB_01c0"><input type="radio" name="beast" id="miB_01" onclick="beastAddToWS(Minor_Beast, 'description', currentTab, this.id)"></td>
            <td id="h1_miB_01c1" colspan=6><b>[Characteristic Enhancement]</b><br>Add 1 to your hero’s Wounds characteristic</td>
            <td id="r1_miB_01c8">4</td>
            <td id="h1_miB_01c9hi">x</td>
          </tr>
          <tr id="h1_miB__">
            <th id="h1_miB___c1" colspan=2>MELEE WEAPONS</th>
            <th id="h1_miB___c2">Rng</th>
            <th id="h1_miB___c3">Att</th>
            <th id="h1_miB___c4">Hit</th>
            <th id="h1_miB___c5">Wnd</th>
            <th id="h1_miB___c6">Rnd</th>
            <th id="h1_miB___c7">Dmg</th>
            <th id="h1_miB___c9hi">x</th>
          </tr>
          <tr id="r1_miB_02">
            <td id="r1_miB_02c1" ondblclick="renameOne(event)" style="cursor: pointer;" colspan=2>Claws</td>
            <td id="r1_miB_02c2">1"</td>
            <td id="r1_miB_02c3">2</td>
            <td id="r1_miB_02c4">5+</td>
            <td id="r1_miB_02c5">5+</td>
            <td id="r1_miB_02c6">-</td>
            <td id="r1_miB_02c7">1</td>
            <td id="r1_miB_02c9hi">Claws</td>
          </tr>
          <tr id="r1_miB_03">
            <td id="r1_miB_03c1" ondblclick="renameOne(event)" style="cursor: pointer;" colspan=2>Maw</td>
            <td id="r1_miB_03c2">1"</td>
            <td id="r1_miB_03c3">1</td>
            <td id="r1_miB_03c4">4+</td>
            <td id="r1_miB_03c5">3+</td>
            <td id="r1_miB_03c6">-1</td>
            <td id="r1_miB_03c7">D3</td>
            <td id="r1_miB_03c9hi">Maw</td>
          </tr>
          <tr>
            <td colspan=8 style="text-align: left; padding: 6px 14px;">
              Add the following text to your hero’s description:<br><br>
              <div id="Minor_Beast" class="des" style="font-size: 115%;">
                <table>
                  <tr>
                    <td class="des" style="border: none;"><t1>MINOR BEAST:</t1> This model’s Minor Beast attacks with its Claws and Maw. For rules purposes, it is treated the same as a mount.</td>
                  </tr>
                </table>
              </div>
            </td>
          </tr>

          <tr style="background-color: white;";>
            <td width=3%><br></td>
            <td width=37%></td>
            <td width=10%></td>
            <td width=10%></td>
            <td width=10%></td>
            <td width=10%></td>
            <td width=10%></td>
            <td width=10%></td>
            <td id="p5___c9hi">x</td>  <!-- clear row no5 -->
          </tr>

          <tr id="h0_moBs__">
            <th id="r1_moB_00c0" class="headCap" colspan=2 style="background-color: rgb(145 136 77); padding: 6px 14px;";>MOUNTED BEAST</th>
            <th id="r1_moB_00c1" class="headCap" ondblclick="renameOne(event)" colspan=6 style="background-color: rgb(145 136 77); padding: 6px 14px; cursor: pointer;";>[double-click here to name your beast]</th>
            <th id="r1_moB_00c9hi">[double-click here to name your beast]</th>
          </tr>
          <tr id="h1_moB_01">
            <td id="h1_moB_01c0"><input type="radio" name="beast" id="moB_01" onclick="beastAddToWS(Mounted_Beast, 'description', currentTab, this.id)"></td>
            <td id="h1_moB_01c1" colspan=6><b>[Characteristic Enhancement]</b><br>Add 2 to your hero’s Wounds characteristic<br>Change your hero’s Move characteristic to 8"</td>
            <td id="r1_moB_01c8">6</td> 
            <td id="h1_moB_01c9hi">x</td>
          </tr>
          <tr id="h1_moB__">
            <th id="h1_moB___c1" colspan=2>MELEE WEAPONS</th>
            <th id="h1_moB___c2">Rng</th>
            <th id="h1_moB___c3">Att</th>
            <th id="h1_moB___c4">Hit</th>
            <th id="h1_moB___c5">Wnd</th>
            <th id="h1_moB___c6">Rnd</th>
            <th id="h1_moB___c7">Dmg</th>
            <th id="h1_moB___c9hi">x</th>
          </tr>
          <tr id="r1_moB_02">
            <td id="r1_moB_02c1" ondblclick="renameOne(event)" style="cursor: pointer;" colspan=2>Claws</td>
            <td id="r1_moB_02c2">1"</td>
            <td id="r1_moB_02c3">2</td>
            <td id="r1_moB_02c4">5+</td>
            <td id="r1_moB_02c5">5+</td>
            <td id="r1_moB_02c6">-</td>
            <td id="r1_moB_02c7">1</td>
            <td id="r1_moB_02c9hi">Claws</td>
          </tr>
          <tr id="r1_moB_03">
            <td id="r1_moB_03c1" ondblclick="renameOne(event)" style="cursor: pointer;" colspan=2>Maw</td>
            <td id="r1_moB_03c2">1"</td>
            <td id="r1_moB_03c3">1</td>
            <td id="r1_moB_03c4">4+</td>
            <td id="r1_moB_03c5">3+</td>
            <td id="r1_moB_03c6">-1</td>
            <td id="r1_moB_03c7">D3</td>
            <td id="r1_moB_03c9hi">Maw</td>
          </tr>
          <tr>
      <td colspan=8 style="text-align: left; padding: 6px 14px;">
              Add the following text to your hero’s description:<br><br>
              <div id="Mounted_Beast" class="des" style="font-size: 115%;">
                <table>
                  <tr>
                    <td class="des" style="border: none;"><t1>MOUNT:</t1> This model’s Mounted Beast attacks with its Claws and Maw.</td>
                  </tr>
                </table>
              </div>
            </td>
          </tr>

          <tr style="background-color: white;";>
            <td><br></td>
            <td colspan=7></td>
            <td id="p6___c9hi">x</td>  <!-- clear row no6 -->
          </tr>

          <tr id="h0_gaBs__">
            <th id="r1_gaB_00c0" class="headCap" colspan=2 style="background-color: rgb(145 136 77); padding: 6px 14px;";>GARGANTUAN BEAST</th>
            <th id="r1_gaB_00c1" class="headCap" ondblclick="renameOne(event)" colspan=6 style="background-color: rgb(145 136 77); padding: 6px 14px; cursor: pointer;";>[double-click here to name your beast]</th>
            <th id="r1_gaB_00c9hi">[double-click here to name your beast]</th>
          </tr>
          <tr id="h1_gaB_01">
            <td id="h1_gaB_01c0"><input type="radio" name="beast" id="gaB_01" onclick="beastAddToWS(Gargantuan_Beast, 'description', currentTab, this.id)"></td>
            <td id="h1_gaB_01c1" colspan=6><b>[Characteristic Enhancement]</b><br>Add 8 to your hero’s Wounds characteristic<br>Change your hero’s Move characteristic to <img src=https://i.ibb.co/gPzxHNR/Ao-S-WS-blackstar.png alt="WarhammerAoS" style="display:inline; margin: auto auto -2px;";></td>
            <td id="r1_gaB_01c8">15</td> 
            <td id="h1_gaB_01c9hi">x</td>
          </tr>
          <tr id="h1_gaB__">
            <th id="h1_gaB___c1" colspan=2>MELEE WEAPONS</th>
            <th id="h1_gaB___c2">Rng</th>
            <th id="h1_gaB___c3">Att</th>
            <th id="h1_gaB___c4">Hit</th>
            <th id="h1_gaB___c5">Wnd</th>
            <th id="h1_gaB___c6">Rnd</th>
            <th id="h1_gaB___c7">Dmg</th>
            <th id="h1_gaB___c9hi">x</th>
          </tr>
          <tr id="r1_gaB_02">
            <td id="r1_gaB_02c1" ondblclick="renameOne(event)" style="cursor: pointer;" colspan=2>Claws</td>
            <td id="r1_gaB_02c2">2"</td>
            <td id="r1_gaB_02c3"><img src=https://i.ibb.co/gPzxHNR/Ao-S-WS-blackstar.png alt="WarhammerAoS" style="display:block; margin: auto;";></td>
            <td id="r1_gaB_02c4">4+</td>
            <td id="r1_gaB_02c5">3+</td>
            <td id="r1_gaB_02c6">-1</td>
            <td id="r1_gaB_02c7">2</td>
            <td id="r1_gaB_02c9hi">Claws</td>
          </tr>
          <tr id="r1_gaB_01">
            <td id="r1_gaB_03c1" ondblclick="renameOne(event)" style="cursor: pointer;" colspan=2>Maw</td>
            <td id="r1_gaB_03c2">2"</td>
            <td id="r1_gaB_03c3">2</td>
            <td id="r1_gaB_03c4">3+</td>
            <td id="r1_gaB_03c5">3+</td>
            <td id="r1_gaB_03c6">-2</td>
            <td id="r1_gaB_03c7"><img src=https://i.ibb.co/gPzxHNR/Ao-S-WS-blackstar.png alt="WarhammerAoS" style="display:block; margin: auto;";></td>
            <td id="r1_gaB_03c9hi">Maw</td>
          </tr>
          <tr>
      <td colspan=2 rowspan=2 style="text-align: left; padding: 6px 14px;">
              Add the following text to your hero’s description:<br><br>
              <div id="Gargantuan_Beast" class="des" style="font-size: 115%;">
                <table>
                  <tr>
                    <td class="des" style="border: none;"><t1>MOUNT:</t1> This model’s Gargantuan Beast attacks with its Claws and Maw.</td>
                  </tr>
                </table>
              </div><br>
        Add the following keywords to your hero’s warscroll: <t1>MONSTER</t1><br>
        Add the damage table on the right to your hero’s warscroll.
            </td>
          </tr>
          <tr>
            <td colspan=6>
              <div id="GarBeast_DmgTable" class="gwTable" style="font-size: 105%;">
              <table>
                <tr>
                  <th class="headCap" id="" colspan=4 style="text-align: center; background-color: rgb(145 136 77); padding: 3px 14px; font-size: 100%;";>DAMAGE TABLE</th>
                </tr>
                <tr>
                  <th width=25%>Wounds Suffered</th>
                  <th width=25%>Move</th>
                  <th width=25%>Claws</th>
                  <th width=25%>Maw</th>
                </tr>
                <tr>
                  <td>0-3</td>
                  <td>10"</td>
                  <td>6</td>
                  <td>4</td>
                </tr>
                <tr>
                  <td>4-6</td>
                  <td>8"</td>
                  <td>5</td>
                  <td>3</td>
                </tr>
                <tr>
                  <td>7-9</td>
                  <td>6"</td>
                  <td>4</td>
                  <td>2</td>
                </tr>
                <tr>
                  <td>10-11</td>
                  <td>4"</td>
                  <td>3</td>
                  <td>1</td>
                </tr>
                <tr>
                  <td>12+</td>
                  <td>2"</td>
                  <td>2</td>
                  <td>1</td>
                </tr>
              </table>
              </div>
            </td>
          </tr>

          <tr style="background-color: white;";>
            <td><br></td>
            <td colspan=7></td>
            <td id="p7___c9hi">x</td>  <!-- clear row no7 -->
          </tr>

          <tr id="h1_noB_01">
            <td id="h1_noB_01c0"><input type="radio" name="beast" id="noB_01" onclick="beastAddToWS(none, 'description', currentTab, this.id)"></td>
            <td id="h1_noB_01c1"><b>SKIP THIS STEP</b> (go on without a beastial companion)</td>
            <td id="h1_noB_01c2" colspan=6></td>
            <td id="h1_noB_01c9hi"><div id="none">x</div></td>
          </tr>
          <tr>
            <td colspan="8" style="background-color: white; border-style: none;";></td>
          </tr>
        </table>
        </form>
      </div><!-- end of weaponTable -->
      
    </div><!-- end of main -->
  </div><!-- end of row -->
  
  <div class="row" id="beastialCompanions2" style="display: none;">
    <div class="main">
      <div>
        <h2><b>STEP 4 – BESTIAL COMPANION</b></h2>
        <p>If you have picked a bestial companion for your hero, you can pick any of the following options for them. Each option costs a number of destiny points as listed in the table.</p>
        <p>You can rename any ability by double-clicking on the ability name. If you want to assign a renamed ability to your hero, make sure this ability is renamed <b>before</b> you add it to the warscroll. Otherwise the new name will not show up on the warscroll.<br>(You cannot rename characteristic enhancements because they will not show up on your warscroll directly, but only increase the characteristic stats of your hero.)</p>
        <p>If your desired selection is not allowed due to restrictions (e.g. improve the rend characteristic over -3), it will not be executed.</p>
      </div><!-- end of step description -->
    
      <div class="beastsEnhAndAbi" style="overflow-x:auto;">
        <form id="beastsAbiForm" class="gwTable">
          <table id="beastsAbisTable">
            
            <tr id="h0_beas__">
              <th class="headCap" id="h0_beas_c1" colspan="7" style="background-color: rgb(145 136 77); padding: 6px 14px;";>CHARACTERISTIC ENHANCEMENTS</th>
              <th id="h0_beas__hi">x</th>
            </tr>
            
            <tr id="r1_bea_01">
              <td id="r1_bea_01c0"><input type="checkbox" id="bea_01" onclick="addBeastEnh(this.id);"></td>
              <td id="r1_bea_01c3"><input type="number" id="bea_01a" min="1" max="3" value="1" maxlength="1" size="1"></td>
              <td id="r1_bea_01c0"><input type="checkbox" id="bea_01b" onclick="addBeastEnh(this.id);"></td>
              <td id="r1_bea_01c3"><input type="number" id="bea_01c" min="1" max="3" value="1" maxlength="1" size="1"></td>
              <td id="r1_bea_01c1" style="font-weight: bold;">Savage Frency</td>
              <td id="r1_bea_01c2" class="des" style="text-align: left;">Pick either the bestial companion’s Claws or Maw. Add 1 to the Attacks characteristic of that weapon. For Gargantuan Beasts, add 1 to each row of the appropriate column in the damage table.</td>
              <td id="r1_bea_01c8">1</td>
              <td id="r1_bea_01c9hi">Savage Frenzy</td>
            </tr>
            
            <tr id="r1_bea_02">
              <td id="r1_bea_02c0"><input type="checkbox" id="bea_02" onclick="addBeastEnh(this.id);"></td>
              <td id="r1_bea_02c3"><input type="number" id="bea_02a" min="1" max="3" value="1" maxlength="1" size="1"></td>
              <td id="r1_bea_02c0"><input type="checkbox" id="bea_02b" onclick="addBeastEnh(this.id);"></td>
              <td id="r1_bea_02c3"><input type="number" id="bea_02c" min="1" max="3" value="1" maxlength="1" size="1"></td>
              <td id="r1_bea_02c1" style="font-weight: bold;">Savage Ferocity</td>
              <td id="r1_bea_02c2" class="des" style="text-align: left;">Pick either the bestial companion’s Claws or Maw. Improve the To Hit characteristic of that weapon by 1.</td>
              <td id="r1_bea_02c8">1</td>
              <td id="r1_bea_02c9hi">Savage Ferocity</td>
            </tr>
            
            <tr id="r1_bea_03">
              <td id="r1_bea_03c0"><input type="checkbox" id="bea_03" onclick="addBeastEnh(this.id);"></td>
              <td id="r1_bea_03c3"><input type="number" id="bea_03a" min="1" max="3" value="1" maxlength="1" size="1"></td>
              <td id="r1_bea_03c0"><input type="checkbox" id="bea_03b" onclick="addBeastEnh(this.id);"></td>
              <td id="r1_bea_03c3"><input type="number" id="bea_03c" min="1" max="3" value="1" maxlength="1" size="1"></td>
              <td id="r1_bea_03c1" style="font-weight: bold;">Savage Strength</td>
              <td id="r1_bea_03c2" class="des" style="text-align: left;">Pick either the bestial companion’s Claws or Maw. Improve the To Wound characteristic of that weapon by 1.</td>
              <td id="r1_bea_03c8">1</td>
              <td id="r1_bea_03c9hi">Savage Strength</td>
            </tr>
            
            <tr id="r1_bea_04">
              <td id="r1_bea_04c0"><input type="checkbox" id="bea_04" onclick="addBeastEnh(this.id);"></td>
              <td id="r1_bea_04c3"><input type="number" id="bea_04a" min="1" max="3" value="1" maxlength="1" size="1"></td>
              <td></td>
              <td></td>
              <td id="r1_bea_04c1" style="font-weight: bold;">Razor-sharp Claws</td>
              <td id="r1_bea_04c2" class="des" style="text-align: left;">Improve the Rend characteristic of the bestial companion’s Claws by 1 (to a maximum of -3).</td>
              <td id="r1_bea_04c8">2</td>
              <td id="r1_bea_04c9hi">Razor-sharp Claws</td>
            </tr>
            
            <tr style="background-color: white;";>
              <td id="" width=3%><br></td>  <!-- checkboxes -->
              <td id="" width=3%></td>  <!-- valueboxes -->
              <td id="" width=3%></td>  <!-- checkboxes -->
              <td id="" width=3%></td>  <!-- valueboxes -->
              <td id="" width=15%></td>  <!-- ABILITY NAME -->
              <td id="" width=68%></td>  <!-- DESCRIPTION-->
              <td id="" width=5%></td>  <!-- DPs -->
              <td id="p8___c9hi">x</td>  <!-- clear row no8 -->
            </tr>
            
            <tr id="h0_be2s__">
              <th class="headCap" id="h0_be2s_c1" colspan="7" style="background-color: rgb(145 136 77); padding: 6px 14px;";>ABILITIES</th>
              <th id="h0_be2s__hi">x</th>
            </tr>
            
            <tr id="r1_bea_05">
              <td id="r1_bea_05c0"><input type="checkbox" id="bea_05" onclick="addToWS(Fly_Beast, 'description', currentTab, this.id);"></td>
              <td id="r1_bea_05c1" ondblclick="renameOne(event)" style="cursor: pointer; font-weight: bold;" colspan=4;>Winged Beast</td>
              <td id="r1_bea_05c2" style="font-size: 125%; padding: 2px 0px 0px 2px">
                <div id="Fly_Beast" class="des">
                  <table>
                    <tr>
                      <td class="des" style="border: none;"><t1>Fly:</t1> This model can fly.</td>
                    </tr>
                  </table>
                </div>
                <p id="r1_bea_05c7" class="des" style="font-size: 85%;"><b>Restrictions: </b>No Minor Beast</p>
              </td>
              <td id="r1_bea_05c8">4</td>
              <td id="r1_bea_05c9hi">Winged Beast</td>
            </tr>
            
            <tr id="r1_bea_06">
              <td id="r1_bea_06c0"><input type="checkbox" id="bea_06" onclick="addToWS(Breath_Attack, 'abilities', currentTab, this.id);"></td>
              <td id="r1_bea_06c1" ondblclick="renameOne(event)" style="cursor: pointer; font-weight: bold;" colspan=4;>Breath Attack</td>
              <td id="r1_bea_06c2" style="font-size: 125%; padding: 2px 0px 0px 2px">
                <div id="Breath_Attack" class="des">
                  <table>
                    <tr>
                      <td class="des" style="border: none;"><t1>Breath Attack:</t1> In your shooting phase, you can pick 1 enemy unit within 6" of this model. Roll a number of dice equal to the number of models from that enemy unit that are within 6" of this model. For each 6, that enemy unit suffers 1 mortal wound.</td>
                    </tr>
                  </table>
                </div>
                <p id="r1_bea_06c7" class="des" style="font-size: 85%;"><b>Restrictions: </b>Gargantuan Beast only</p>
              </td>
              <td id="r1_bea_06c8">4</td>
              <td id="r1_bea_06c9hi">Breath Attack</td>
            </tr>
            
            <tr id="r1_bea_07">
              <td id="r1_bea_07c0"><input type="checkbox" id="bea_07" onclick="addToWS(Vicious_Charge, 'abilities', currentTab, this.id);"></td>
              <td id="r1_bea_07c1" ondblclick="renameOne(event)" style="cursor: pointer; font-weight: bold;" colspan=4;>Vicious Charge</td>
              <td id="r1_bea_07c2" style="font-size: 125%; padding: 2px 0px 0px 2px">
                <div id="Vicious_Charge" class="des">
                  <table>
                    <tr>
                      <td class="des" style="border: none;"><t1>Vicious Charge:</t1> After this model makes a charge move, you can pick 1 enemy unit within 1" of this model and roll a dice. On a 2+, that enemy unit suffers D3 mortal wounds.</td>
                    </tr>
                  </table>
                </div>
              </td>
              <td id="r1_bea_07c8">1</td>
              <td id="r1_bea_07c9hi">Vicious Charge</td>
            </tr>
            
            <tr id="r1_bea_08">
              <td id="r1_bea_08c0"><input type="checkbox" id="bea_08" onclick="addToWS(Poisonous_Bite, 'abilities', currentTab, this.id);"></td>
              <td id="r1_bea_08c1" ondblclick="renameOne(event)" style="cursor: pointer; font-weight: bold;" colspan=4;>Poisonous Bite</td>
              <td id="r1_bea_08c2" style="font-size: 125%; padding: 2px 0px 0px 2px">
                <div id="Poisonous_Bite" class="des">
                  <table>
                    <tr>
                      <td class="des" style="border: none;"><t1>Poisonous Bite:</t1> If the unmodified hit roll for an attack made with the bestial companion’s Maw is 6, that attack inflicts 1 mortal wound on the target in addition to any normal damage.</td>
                    </tr>
                  </table>
                </div>
              </td>
              <td id="r1_bea_08c8">2</td>
              <td id="r1_bea_08c9hi">Poisonous Bite</td>
            </tr>
            
            <tr id="r1_bea_09">
              <td id="r1_bea_09c0"><input type="checkbox" id="bea_09" onclick="addToWS(Gobble_Attack, 'abilities', currentTab, this.id);"></td>
              <td id="r1_bea_09c1" ondblclick="renameOne(event)" style="cursor: pointer; font-weight: bold;" colspan=4;>Gobble Attack</td>
              <td id="r1_bea_09c2" style="font-size: 125%; padding: 2px 0px 0px 2px">
                <div id="Gobble_Attack" class="des">
                  <table>
                    <tr>
                      <td class="des" style="border: none;"><t1>Gobble Attack:</t1> Each time this model attacks, after all of this model’s attacks have been resolved, you can pick 1 enemy model within 1" of this model and roll a dice. If the roll is equal to or greater than that enemy model’s Wounds characteristic, it is slain.</td>
                    </tr>
                  </table>
                </div>
                <p id="r1_bea_09c7" class="des" style="font-size: 85%;"><b>Restrictions: </b>Gargantuan Beast only</p>
              </td>
              <td id="r1_bea_09c8">3</td>
              <td id="r1_bea_09c9hi">Gobble Attack</td>
            </tr>
            
            <tr id="r1_bea_10">
              <td id="r1_bea_10c0"><input type="checkbox" id="bea_10" onclick="addToWS(Terror, 'abilities', currentTab, this.id);"></td>
              <td id="r1_bea_10c1" ondblclick="renameOne(event)" style="cursor: pointer; font-weight: bold;" colspan=4;>Terror</td>
              <td id="r1_bea_10c2" style="font-size: 125%; padding: 2px 0px 0px 2px">
                <div id="Terror" class="des">
                  <table>
                    <tr>
                      <td class="des" style="border: none;"><t1>Terror:</t1> Subtract 1 from the Bravery characteristic of enemy units while they are within 3" of any friendly units with this ability.</td>
                    </tr>
                  </table>
                </div>
                <p id="r1_bea_10c7" class="des" style="font-size: 85%;"><b>Restrictions: </b>Gargantuan Beast only</p>
              </td>
              <td id="r1_bea_10c8">1</td>
              <td id="r1_bea_10c9hi">Terror</td>
            </tr>
            
            <tr id="r1_bea_11">
              <td id="r1_bea_11c0"><input type="checkbox" id="bea_11" onclick="addToWS(Lashing_Tail, 'abilities', currentTab, this.id);"></td>
              <td id="r1_bea_11c1" ondblclick="renameOne(event)" style="cursor: pointer; font-weight: bold;" colspan=4;>Lashing Tail</td>
              <td id="r1_bea_11c2" style="font-size: 125%; padding: 2px 0px 0px 2px">
                <div id="Lashing_Tail" class="des">
                  <table>
                    <tr>
                      <td class="des" style="border: none;"><t1>Lashing Tail:</t1> At the end of the combat phase, roll a dice for each enemy unit within 3" of this model. If the roll is less than the number of models in that unit, that unit suffers D3 mortal wounds.</td>
                    </tr>
                  </table>
                </div>
                <p id="r1_bea_11c7" class="des" style="font-size: 85%;"><b>Restrictions: </b>Gargantuan Beast only</p>
              </td>
              <td id="r1_bea_11c8">3</td>
              <td id="r1_bea_11c9hi">Lashing Tail</td>
            </tr>
            
            <tr id="r1_bea_12">
              <td id="r1_bea_12c0"><input type="checkbox" id="bea_12" onclick="addToWS(Stomp, 'abilities', currentTab, this.id);"></td>
              <td id="r1_bea_12c1" ondblclick="renameOne(event)" style="cursor: pointer; font-weight: bold;" colspan=4;>Stomp</td>
              <td id="r1_bea_12c2" style="font-size: 125%; padding: 2px 0px 0px 2px">
                <div id="Stomp" class="des">
                  <table>
                    <tr>
                      <td class="des" style="border: none;"><t1>Stomp:</t1> At the end of the combat phase, you can pick 1 enemy unit within 1" of this unit and roll a dice. On a 2+, that enemy unit suffers D3 mortal wounds.</td>
                    </tr>
                  </table>
                </div>
                <p id="r1_bea_12c7" class="des" style="font-size: 85%;"><b>Restrictions: </b>Gargantuan Beast only</p>
              </td>
              <td id="r1_bea_12c8">2</td>
              <td id="r1_bea_12c9hi">Stomp</td>
            </tr>
          
            <tr>
              <td colspan="7" style="background-color: white; border-style: none;";></td>
            </tr>
            
          </table>
        </form>
      </div><!-- end of weaponTable -->
      
    </div><!-- end of main -->
  </div><!-- end of row -->
  
  <div id="showBeaAbis" class="main" style="overflow:auto; padding: 0px 0px 15px; display: none;">
    <div style="text-align:center;">  <!-- style="float:right;" -->
      <button class="grandButton" id="beastEnhAbis" onclick="showBeastAbis(this.id)" style="width: 500px;">SHOW BEASTIAL COMPANION ENHANCEMENTS AND ABILITIES</button>
    </div>
    <p></p>
  </div>

  <div style="display: none;">
    letzte Spalte ausblenden <button onclick="show_hide('none');">verstecke</button><br>
    <br>
    letzte Spalte ausblenden <button onclick="show_hide('inline');">zeige</button><br>
    <br>
    <button onclick="resetCheckStep5()">Reset CheckBoxes</button>
    <button onclick="resetDescrName('beastsForm')">Reset BeastsNames</button>
    <br>
    <p>Valid: <span id="validateStep4">not valid</span></p>
    <p id="rewriteBeasts">needed to rewrite beast description</p>
  </div>
</div>

<div id="step5" class="anvilSteps"><!-- Anvil of Apotheosis: STEP 6 - CHARACTERISTIC ENHANCEMENTS AND ABILITIES -->
  <div class="row">
    <div class="main">
      <div>
        <h2><b>STEP 5 – CHARACTERISTIC ENHANCEMENTS AND ABILITIES</b></h2>
        <p>The final step is to pick any other options for your hero. Each costs a number of destiny points as listed in the tables.</p>
        <p>In this step, you can also choose for your hero to be accompanied by a Spirit Host. If you do so, this can be in addition to any other bestial companion they already have.</p>
        <p>You can rename any ability by double-clicking on the ability name. If you want to assign a renamed ability to your hero, make sure this ability is renamed <b>before</b> you add it to the warscroll. Otherwise the new name will not show up on the warscroll.<br>(You cannot rename characteristic enhancements because they will not show up on your warscroll directly, but only increase the characteristic stats of your hero.)</p>
        <p>If your desired selection is not allowed due to restrictions (e.g. improve the save characteristic over 3+), it will not be executed.</p>
      </div><!-- end of step description -->
   
    
      <div class="enhancementANDabilities" style="overflow-x:auto;">
        <form id="abilitiesForm" class="gwTable">
          <table>
            
            <tr id="h0_enhs__">
              <th class="headCap" id="h0_enhs_c1" colspan="7" style="background-color: rgb(145 136 77); padding: 6px 14px;";>CHARACTERISTIC ENHANCEMENTS</th>
              <th id="h0_enhs__hi">x</th>
            </tr>
            
            <tr id="r1_enh_01">
              <td id="r1_enh_01c0"><input type="checkbox" id="enh_01" onclick="addCharEnh(this.id);"></td>
              <td id="r1_enh_01c3"><input type="number" id="enh_01a" min="1" max="3" value="1" maxlength="1" size="1"></td>
              <td></td>
              <td></td>
              <td id="r1_enh_01c1" style="font-weight: bold;">Unnatural Speed</td>
              <td id="r1_enh_01c2" class="des" style="text-align: left;">Add 1 to your hero’s Move characteristic.</td>
              <td id="r1_enh_01c8">2</td>
              <td id="r1_enh_01c9hi">Unnatural Speed</td>
            </tr>
            
            <tr id="r1_enh_02">
              <td id="r1_enh_02c0"><input type="checkbox" id="enh_02" onclick="addCharEnh(this.id);"></td>
              <td id="r1_enh_02c3"><input type="number" id="enh_02a" min="1" max="3" value="1" maxlength="1" size="1"></td>
              <td></td>
              <td></td>
              <td id="r1_enh_02c1" style="font-weight: bold;">Dark Fortitude</td>
              <td id="r1_enh_02c2" class="des" style="text-align: left;">Add 1 to your hero’s Wounds characteristic.</td>
              <td id="r1_enh_02c8">1</td>
              <td id="r1_enh_02c9hi">Dark Fortitude</td>
            </tr>
            
            <!--<tr id="r1_enh_03">
              <td id="r1_enh_03c0"><input type="checkbox" id="enh_03" onclick="addCharEnh(this.id);"></td>
              <td id="r1_enh_03c3"><input type="number" id="enh_03a" min="1" max="3" value="1" maxlength="1" size="1"></td>
              <td></td>
              <td></td>
              <td id="r1_enh_03c1" style="font-weight: bold;">Superior Leadership</td>
              <td id="r1_enh_03c2" class="des" style="text-align: left;">Add 1 to your hero’s Bravery characteristic.</td>
              <td id="r1_enh_03c8">1</td>
              <td id="r1_enh_03c9hi">Superior Leadership</td>
            </tr>-->
            
            <tr id="r1_enh_04">
              <td id="r1_enh_04c0"><input type="checkbox" id="enh_04" onclick="addCharEnh(this.id);"></td>
              <td id="r1_enh_04c3"><input type="number" id="enh_04a" min="1" max="3" value="1" maxlength="1" size="1"></td>
              <td></td>
              <td></td>
              <td id="r1_enh_04c1" style="font-weight: bold;">Extra Armour</td>
              <td id="r1_enh_04c2" class="des" style="text-align: left;">Improve your hero’s Save characteristic by 1 (to a maximum of 3+).</td>
              <td id="r1_enh_04c8">2</td>
              <td id="r1_enh_04c9hi">Extra Armour</td>
            </tr>
            
            <!--<tr id="r1_enh_07">
              <td id="r1_enh_07c0"><input type="checkbox" id="enh_07" onclick="addCharEnh(this.id);"></td>
              <td></td>
              <td></td>
              <td></td>
              <td id="r1_enh_07c1" style="font-weight: bold;">Battle Standard Bearer</td>
              <td id="r1_enh_07c2" class="des" style="text-align: left;">This model gains the TOTEM keyword.</td>
              <td id="r1_enh_07c8">1</td>
              <td id="r1_enh_07c9hi">Battle Standard Bearer</td>
            </tr>-->
            
            <tr id="r1_enh_10">
              <td id="r1_enh_10c0"><input type="checkbox" id="enh_10" onclick="addCharEnh(this.id);"></td>
              <td id="r1_enh_10c3"><input type="number" id="enh_10a" min="1" max="3" value="1" maxlength="1" size="1"></td>
              <td id="r1_enh_10c0"><input type="checkbox" id="enh_10b" onclick="addCharEnh(this.id);"></td>
              <td id="r1_enh_10c3"><input type="number" id="enh_10c" min="1" max="3" value="1" maxlength="1" size="1"></td>
              <td id="r1_enh_10c1" style="font-weight: bold;">Ferocity</td>
              <td id="r1_enh_10c2" class="des" style="text-align: left;">Pick 1 of your hero’s weapons (not including mount weapons). Add 1 to the Attacks characteristic of that weapon.</td>
              <td id="r1_enh_10c8">2</td>
              <td id="r1_enh_10c9hi">Ferocity</td>
            </tr>
            
            <tr id="r1_enh_08">
              <td id="r1_enh_08c0"><input type="checkbox" id="enh_08" onclick="addCharEnh(this.id);"></td>
              <td id="r1_enh_08c3"><input type="number" id="enh_08a" min="1" max="3" value="1" maxlength="1" size="1"></td>
              <td id="r1_enh_08c0"><input type="checkbox" id="enh_08b" onclick="addCharEnh(this.id);"></td>
              <td id="r1_enh_08c3"><input type="number" id="enh_08c" min="1" max="3" value="1" maxlength="1" size="1"></td>
              <td id="r1_enh_08c1" style="font-weight: bold;">Weapon Master</td>
              <td id="r1_enh_08c2" class="des" style="text-align: left;">Pick 1 of your hero’s weapons (not including mount weapons). Improve the To Hit characteristic of that weapon by 1.</td>
              <td id="r1_enh_08c8">2</td>
              <td id="r1_enh_08c9hi">Weapon Master</td>
            </tr>
            
            <tr id="r1_enh_09">
              <td id="r1_enh_09c0"><input type="checkbox" id="enh_09" onclick="addCharEnh(this.id);"></td>
              <td id="r1_enh_09c3"><input type="number" id="enh_09a" min="1" max="3" value="1" maxlength="1" size="1"></td>
              <td id="r1_enh_09c0"><input type="checkbox" id="enh_09b" onclick="addCharEnh(this.id);"></td>
              <td id="r1_enh_09c3"><input type="number" id="enh_09c" min="1" max="3" value="1" maxlength="1" size="1"></td>
              <td id="r1_enh_09c1" style="font-weight: bold;">Unholy Strength</td>
              <td id="r1_enh_09c2" class="des" style="text-align: left;">Pick 1 of your hero’s weapons (not including mount weapons). Improve the To Wound characteristic of that weapon by 1.</td>
              <td id="r1_enh_09c8">2</td>
              <td id="r1_enh_09c9hi">Unholy Strength</td>
            </tr>
            
            <tr id="r1_enh_06">
              <td id="r1_enh_06c0"><input type="checkbox" id="enh_06" onclick="addCharEnh(this.id);"></td>
              <td id="r1_enh_06c3"><input type="number" id="enh_06a" min="1" max="3" value="1" maxlength="1" size="1"></td>
              <td id="r1_enh_06c0"><input type="checkbox" id="enh_06b" onclick="addCharEnh(this.id);"></td>
              <td id="r1_enh_06c3"><input type="number" id="enh_06c" min="1" max="3" value="1" maxlength="1" size="1"></td>
              <td id="r1_enh_06c1" style="font-weight: bold;">Honed Edge</td>
              <td id="r1_enh_06c2" class="des" style="text-align: left;">Pick 1 of your hero’s weapons (not including mount weapons). Improve the Rend characteristic of that weapon by 1 (to a maximum of -3).</td>
              <td id="r1_enh_06c8">2</td>
              <td id="r1_enh_06c9hi">Honed Edge</td>
            </tr>
            
            <tr id="r1_enh_05">
              <td id="r1_enh_05c0"><input type="checkbox" id="enh_05" onclick="addCharEnh(this.id);"></td>
              <td id="r1_enh_05c3"><input type="number" id="enh_05a" min="1" max="3" value="1" maxlength="1" size="1"></td>
              <td id="r1_enh_05c0"><input type="checkbox" id="enh_05b" onclick="addCharEnh(this.id);"></td>
              <td id="r1_enh_05c3"><input type="number" id="enh_05c" min="1" max="3" value="1" maxlength="1" size="1"></td>
              <td id="r1_enh_05c1" style="font-weight: bold;">Mighty Weapon</td>
              <td id="r1_enh_05c2" class="des" style="text-align: left;">Pick 1 of your hero’s weapons (not including mount weapons). Add 1 to the Damage characteristic of that weapon. Weapons that have a random Damage characteristic cannot be picked.</td>
              <td id="r1_enh_05c8">2</td>
              <td id="r1_enh_05c9hi">Mighty Weapon</td>
            </tr>
            
            <tr id="r1_enh_11">
              <td id="r1_enh_11c0"><input type="checkbox" id="enh_11" onclick="addCharEnh(this.id);"></td>
              <td></td>
              <td></td>
              <td></td>
              <td id="r1_enh_11c1" style="font-weight: bold;">Master of Dark Magic</td>
              <td id="r1_enh_11c2" class="des" style="text-align: left;">Increase the number of spells this hero can attempt to cast and unbind by 1.
              <p id="r1_abi_11c7" class="des"><b>Restrictions: </b><t1>WIZARD</t1> only</p>
              </td>
              <td id="r1_enh_11c8">2</td>
              <td id="r1_enh_11c9hi">Master of Dark Magic</td>
            </tr>
            
            <tr style="background-color: white;";>
              <td id="" width=3%><br></td>  <!-- checkboxes -->
              <td id="" width=3%></td>  <!-- valueboxes -->
              <td id="" width=3%></td>  <!-- checkboxes -->
              <td id="" width=3%></td>  <!-- valueboxes -->
              <td id="" width=15%></td>  <!-- ABILITY NAME -->
              <td id="" width=68%></td>  <!-- DESCRIPTION-->
              <td id="" width=5%></td>  <!-- DPs -->
              <td id="p9___c9hi">x</td>  <!-- clear row no9 -->
            </tr>
            
            <tr id="h0_abis__">
              <th class="headCap" id="h0_abis_c1" colspan="7" style="background-color: rgb(145 136 77); padding: 6px 14px;";>ABILITIES</th>
              <th id="h0_abis__hi">x</th>
            </tr>
            
            <tr id="r1_abi_01">
              <td id="r1_abi_01c0"><input type="checkbox" id="abi_01" onclick="addToWS(Immortal_Champion, 'abilities', currentTab, this.id);"></td>
              <td id="r1_abi_01c1" ondblclick="renameOne(event)" style="cursor: pointer; font-weight: bold;" colspan=4;>Immortal Champion</td>
              <td id="r1_abi_01c2" style="font-size: 125%; padding: 2px 0px 0px 2px">
                <div id="Immortal_Champion" class="des">
                  <table>
                    <tr>
                      <td class="des"><t1>Immortal Champion:</t1> Add 1 to the Attacks characteristic of this model’s melee weapons if it is within 3" of 10 or more enemy models when you pick the target unit(s) for its attacks.</td>
                    </tr>
                  </table>
                </div>
              </td>
              <td id="r1_abi_01c8">3</td>
              <td id="r1_abi_01c9hi">Immortal Champion</td>
            </tr>
            
            <tr id="r1_abi_02">
              <td id="r1_abi_02c0"><input type="checkbox" id="abi_02" onclick="addToWS(Loyal_Adjutant, 'abilities', currentTab, this.id);"></td>
              <td id="r1_abi_02c1" ondblclick="renameOne(event)" style="cursor: pointer; font-weight: bold;" colspan=4;>Loyal Adjutant</td>
              <td id="r1_abi_02c2" style="font-size: 125%; padding: 2px 0px 0px 2px">
                <div id="Loyal_Adjutant" class="des">
                  <table>
                    <tr>
                      <td class="des"><t1>Loyal Adjutant:</t1> This model can be given a command trait in addition to the model picked to be your general.</td>
                    </tr>
                  </table>
                </div>
              </td>
              <td id="r1_abi_02c8">5</td>
              <td id="r1_abi_02c9hi">Loyal Adjutant</td>
            </tr>
            
            <tr id="r1_abi_04">
              <td id="r1_abi_04c0"><input type="checkbox" id="abi_04" onclick="addToWS(Insane_Brilliance, 'abilities', currentTab, this.id);"></td>
              <td id="r1_abi_04c1" ondblclick="renameOne(event)" style="cursor: pointer; font-weight: bold;" colspan=4;>Insane Brilliance</td>
              <td id="r1_abi_04c2" style="font-size: 125%; padding: 2px 0px 0px 2px">
                <div id="Insane_Brilliance" class="des">
                  <table>
                    <tr>
                      <td class="des"><t1>Insane Brilliance:</t1> Each time you spend a command point to allow this model to use a command ability, roll a dice. On a 5+, you receive 1 extra command point.</td>
                    </tr>
                  </table>
                </div>
              </td>
              <td id="r1_abi_04c8">3</td>
              <td id="r1_abi_04c9hi">Insane Brilliance</td>
            </tr>
            
            <tr id="r1_abi_05">
              <td id="r1_abi_05c0"><input type="checkbox" id="abi_05" onclick="addToWS(Feed_on_Necromancy, 'abilities', currentTab, this.id);"></td>
              <td id="r1_abi_05c1" ondblclick="renameOne(event)" style="cursor: pointer; font-weight: bold;" colspan=4;>Feed on Necromancy</td>
              <td id="r1_abi_05c2" style="font-size: 125%; padding: 2px 0px 0px 2px">
                <div id="Feed_on_Necromancy" class="des">
                  <table>
                    <tr>
                      <td class="des"><t1>Feed on Necromancy:</t1> Each time a spell is successfully cast by a <t1>DEATH WIZARD</t1> within 12" of this model, you can heal 1 wound allocated to this model after the spell has been resolved.</td>
                    </tr>
                  </table>
                </div>
              </td>
              <td id="r1_abi_05c8">3</td>
              <td id="r1_abi_05c9hi">Feed on Necromancy</td>
            </tr>
            
            <tr id="r1_abi_06">
              <td id="r1_abi_06c0"><input type="checkbox" id="abi_06" onclick="addToWS(Harrowing_Shriek, 'abilities', currentTab, this.id);"></td>
              <td id="r1_abi_06c1" ondblclick="renameOne(event)" style="cursor: pointer; font-weight: bold;" colspan=4;>Harrowing Shriek</td>
              <td id="r1_abi_06c2" style="font-size: 125%; padding: 2px 0px 0px 2px">
                <div id="Harrowing_Shriek" class="des">
                  <table>
                    <tr>
                      <td class="des"><t1>Harrowing Shriek:</t1> In your hero phase, pick 1 enemy unit within 9" of this model and roll 2D6. If the roll is higher than that enemy unit’s Bravery characteristic, that enemy unit suffers a number of mortal wounds equal to the difference between its Bravery characteristic and the roll.</td>
                    </tr>
                  </table>
                </div>
              </td>
              <td id="r1_abi_06c8">4</td>
              <td id="r1_abi_06c9hi">Harrowing Shriek</td>
            </tr>
            
            <tr id="r1_abi_07">
              <td id="r1_abi_07c0"><input type="checkbox" id="abi_07" onclick="addToWS(Master_of_Fiends, 'abilities', currentTab, this.id);"></td>
              <td id="r1_abi_07c1" ondblclick="renameOne(event)" style="cursor: pointer; font-weight: bold;" colspan=4;>Master of Fiends</td>
              <td id="r1_abi_07c2" style="font-size: 125%; padding: 2px 0px 0px 2px">
                <div id="Master_of_Fiends" class="des">
                  <table>
                    <tr>
                      <td class="des"><t1>Master of Fiends:</t1> In your hero phase, you can pick 1 friendly unit with a Wounds characteristic of 10 or more that is wholly within 9" of this model. If you do so, you can either heal up to 3 wounds that have been allocated to that unit or, if no wounds have been allocated to that unit, you can add 1 to the Damage characteristic of melee weapons used by that unit until your next hero phase.</td>
                    </tr>
                  </table>
                </div>
              </td>
              <td id="r1_abi_07c8">4</td>
              <td id="r1_abi_07c9hi">Master of Fiends</td>
            </tr>
            
            <tr id="r1_abi_08">
              <td id="r1_abi_08c0"><input type="checkbox" id="abi_08" onclick="addToWS(Hunter_of_the_Living, 'abilities', currentTab, this.id);"></td>
              <td id="r1_abi_08c1" ondblclick="renameOne(event)" style="cursor: pointer; font-weight: bold;" colspan=4;>Hunter of the Living</td>
              <td id="r1_abi_08c2" style="font-size: 125%; padding: 2px 0px 0px 2px">
                <div id="Hunter_of_the_Living" class="des">
                  <table>
                    <tr>
                      <td class="des"><t1>Hunter of the Living:</t1> This model can run and still charge in the same turn.</td>
                    </tr>
                  </table>
                </div>
                <p id="r1_abi_09c7" class="des" style="font-size: 85%;"><b>Restrictions: </b><t1>WIZARD</t1> only</p>
              </td>
              <td id="r1_abi_08c8">4</td>
              <td id="r1_abi_08c9hi">Hunter of the Living</td>
            </tr>
            
            <tr id="r1_abi_11">
              <td id="r1_abi_11c0"><input type="checkbox" id="abi_11" onclick="addToWS(Decapitating_Strike, 'abilities', currentTab, this.id);"></td>
              <td id="r1_abi_11c1" ondblclick="renameOne(event)" style="cursor: pointer; font-weight: bold;" colspan=4;>Decapitating Strike</td>
              <td id="r1_abi_11c2" style="font-size: 125%; padding: 2px 0px 0px 2px">
                <div id="Decapitating_Strike" class="des">
                  <table>
                    <tr>
                      <td class="des"><t1>Decapitating Strike:</t1> If the unmodified wound roll for an attack made with this model’s melee weapons (not including mount weapons) is 6, that attack inflicts 1 mortal wound on the target in addition to any normal damage.</td>
                    </tr>
                  </table>
                </div>
              </td>
              <td id="r1_abi_11c8">4</td>
              <td id="r1_abi_11c9hi">Decapitating Strike</td>
            </tr>
            
            <tr id="r1_abi_09">
              <td id="r1_abi_09c0"><input type="checkbox" id="abi_09" onclick="addToWS(Ride_them_Down, 'abilities', currentTab, this.id);"></td>
              <td id="r1_abi_09c1" ondblclick="renameOne(event)" style="cursor: pointer; font-weight: bold;" colspan=4;>Ride them Down</td>
              <td id="r1_abi_09c2" style="font-size: 125%; padding: 2px 0px 0px 2px">
                <div id="Ride_them_Down" class="des">
                  <table>
                    <tr>
                      <td class="des"><t1>Ride them Down:</t1> Add 1 to the Damage characteristic of melee weapons (not including mount weapons) with a Range characteristic of 2" if this model made a charge move in the same turn.</td>
                    </tr>
                  </table>
                </div>
                <p id="r1_abi_09c7" class="des" style="font-size: 85%;"><b>Restrictions: </b>Heroes on a
Mounted Beast only</p>
              </td>
              <td id="r1_abi_09c8">1</td>
              <td id="r1_abi_09c9hi">Ride them Down</td>
            </tr>
            
            <tr id="r1_abi_10">
              <td id="r1_abi_10c0"><input type="checkbox" id="abi_10" onclick="addToWS(Ebon_wrought_Armour, 'abilities', currentTab, this.id);"></td>
              <td id="r1_abi_10c1" ondblclick="renameOne(event)" style="cursor: pointer; font-weight: bold;" colspan=4;>Ebon-wrought Armour</td>
              <td id="r1_abi_10c2" style="font-size: 125%; padding: 2px 0px 0px 2px">
                <div id="Ebon_wrought_Armour" class="des">
                  <table>
                    <tr>
                      <td class="des"><t1>Ebon-wrought Armour:</t1> Each time you allocate a mortal wound to this unit, roll a dice. On a 5+, that mortal wound is negated.</td>
                    </tr>
                  </table>
                </div>
              </td>
              <td id="r1_abi_10c8">4</td>
              <td id="r1_abi_10c9hi">Ebon-wrought Armour</td>
            </tr>
            
            <tr id="r1_abi_12">
              <td id="r1_abi_12c0"><input type="checkbox" id="abi_12" onclick="addToWS(Ethereal_Nature, 'abilities', currentTab, this.id);"></td>
              <td id="r1_abi_12c1" ondblclick="renameOne(event)" style="cursor: pointer; font-weight: bold;" colspan=4;>Ethereal Nature</td>
              <td id="r1_abi_12c2" style="font-size: 125%; padding: 2px 0px 0px 2px">
                <div id="Ethereal_Nature" class="des">
                  <table>
                    <tr>
                      <td class="des"><t1>Ethereal Nature:</t1> Ignore modifiers (positive or negative) when making save rolls for attacks that target this model.</td>
                    </tr>
                  </table>
                </div>
                <p id="r1_abi_12c7" class="des" style="font-size: 85%;"><b>Restrictions: </b>Cannot be taken by a hero with a Save characteristic of 3+ or 2+.</p>
              </td>
              <td id="r1_abi_12c8">4</td>
              <td id="r1_abi_12c9hi">Ethereal Nature</td>
            </tr>
            
            <tr id="r1_abi_13">
              <td id="r1_abi_13c0"><input type="checkbox" id="abi_13" onclick="addToWS(Shyishan_Ward, 'abilities', currentTab, this.id);"></td>
              <td id="r1_abi_13c1" ondblclick="renameOne(event)" style="cursor: pointer; font-weight: bold;" colspan=4;>Shyishan Ward</td>
              <td id="r1_abi_13c2" style="font-size: 125%; padding: 2px 0px 0px 2px">
                <div id="Shyishan_Ward" class="des">
                  <table>
                    <tr>
                      <td class="des"><t1>Shyishan Ward:</t1> Roll a dice each time a wound or mortal wound is allocated to this model. On a 6, that wound or mortal wound is negated.</td>
                    </tr>
                  </table>
                </div>
              </td>
              <td id="r1_abi_13c8">3</td>
              <td id="r1_abi_13c9hi">Shyishan Ward</td>
            </tr>
            
            <tr id="r1_abi_03">
              <td id="r1_abi_03c0"><input type="checkbox" id="abi_03" onclick="addToWS(Fly, 'description', currentTab, this.id);"></td>
              <td id="r1_abi_03c1" ondblclick="renameOne(event)" style="cursor: pointer; font-weight: bold;" colspan=4;>Bat Wings</td>
              <td id="r1_abi_03c2" style="font-size: 125%; padding: 2px 0px 0px 2px">
                <div id="Fly" class="des">
                  <table>
                    <tr>
                      <td class="des"><t1>Fly:</t1> This model can fly.</td>
                    </tr>
                  </table>
                </div>
              </td>
              <td id="r1_abi_03c8">4</td>
              <td id="r1_abi_03c9hi">Bat Wings</td>
            </tr>
            
            <tr id="r1_abi_14">
              <td id="r1_abi_14c0"><input type="checkbox" id="abi_14" onclick="addToWS(Blood_Frenzy, 'abilities', currentTab, this.id);"></td>
              <td id="r1_abi_14c1" ondblclick="renameOne(event)" style="cursor: pointer; font-weight: bold;" colspan=4;>Blood Frenzy</td>
              <td id="r1_abi_14c2" style="font-size: 125%; padding: 2px 0px 0px 2px">
                <div id="Blood_Frenzy" class="des">
                  <table>
                    <tr>
                      <td class="des"><t1>Blood Frenzy:</t1> If the unmodified hit roll for an attack made with this model’s melee weapons (not including mount weapons) is 6, that attack scores 2 hits on the target instead of 1. Make a wound and save roll for each hit.</td>
                    </tr>
                  </table>
                </div>
              </td>
              <td id="r1_abi_14c8">3</td>
              <td id="r1_abi_14c9hi">Blood Frenzy</td>
            </tr>
            
            <tr id="r1_abi_15">
              <td id="r1_abi_15c0"><input type="checkbox" id="abi_15" onclick="addToWS(Deathly_Vigour, 'abilities', currentTab, this.id);"></td>
              <td id="r1_abi_15c1" ondblclick="renameOne(event)" style="cursor: pointer; font-weight: bold;" colspan=4;>Deathly Vigour</td>
              <td id="r1_abi_15c2" style="font-size: 125%; padding: 2px 0px 0px 2px">
                <div id="Deathly_Vigour" class="des">
                  <table>
                    <tr>
                      <td class="des"><t1>Deathly Vigour:</t1> In your hero phase, you can roll a dice for this model. If you do so, on a 4+, heal up to D3 wounds allocated to this model.</td>
                    </tr>
                  </table>
                </div>
              </td>
              <td id="r1_abi_15c8">3</td>
              <td id="r1_abi_15c9hi">Deathly Vigour</td>
            </tr>
          
            <tr>
              <td colspan="7" style="background-color: white; border-style: none;";></td>
            </tr>
            
          </table>
        </form>
      </div><!-- end of weaponTable -->
      
      <div style="overflow-x:auto;">
        <form id="spiritHostForm" class="gwTable">
        <table id="spiritTable">
          <tr id="h0_spHs__">
            <th id="r1_spH_00c0" class="headCap" colspan=10 style="background-color: rgb(145 136 77); padding: 6px 14px;";>SPIRIT HOST</th>
          </tr>
          <tr id="h1_miB_01">
            <td width=3% id="h1_spH_01c0"><input type="checkbox" id="spH_01" onclick="spiritAddToWS(Frightful_Touch, 'abilities', currentTab, this.id)"></td>
            <td width=3% id="r1_spH_01c3"><input type="number" id="spH_01a" min="1" max="3" value="1" maxlength="1" size="1" onchange="setSpiritHost(this.id)"></td>
            <td width=6%></td>
            <td id="h1_spH_01c1" colspan=6>Add the following melee weapon to your warscroll:</td>
            <td id="r1_spH_01c8">4</td>
            <td id="h1_spH_01c9hi">x</td>
          </tr>
          <tr id="h1_spH__">
            <th id="h1_spH___c1" colspan=4>MELEE WEAPONS</th>
            <th id="h1_spH___c2" width=10%>Rng</th>
            <th id="h1_spH___c3" width=10%>Att</th>
            <th id="h1_spH___c4" width=10%>Hit</th>
            <th id="h1_spH___c5" width=10%>Wnd</th>
            <th id="h1_spH___c6" width=10%>Rnd</th>
            <th id="h1_spH___c7" width=10%>Dmg</th>
            <th id="h1_spH___c9hi">x</th>
          </tr>
          <tr id="r1_spH_02">
            <td id="r1_spH_02c1" colspan=4>Spectral Claws and Daggers</td>
            <td id="r1_spH_02c2">1"</td>
            <td id="r1_spH_02c3">2</td>
            <td id="r1_spH_02c4">5+</td>
            <td id="r1_spH_02c5">5+</td>
            <td id="r1_spH_02c6">-</td>
            <td id="r1_spH_02c7">1</td>
            <td id="r1_spH_02c9hi">Spectral Claws and Daggers</td>
          </tr>
          <tr>
            <td colspan=10 style="text-align: left; padding: 6px 14px;">
              Add the following text to your hero’s description:<br><br>
              <div id="COMPANION" class="des" style="font-size: 115%;">
                <table>
                  <tr>
                    <td class="des" style="border: none;"><t1>COMPANION:</t1> This hero is accompanied by a host of spirits that attack with their Spectral Claws and Daggers. For rules purposes, they are treated in the same manner as a mount.</td>
                  </tr>
                </table>
              </div>
            </td>
          </tr>
          <tr>
            <td colspan=3 style="font-weight: bold;">[Ability]</td>
            <td colspan=7 style="text-align: left; padding: 0px 2px 0px 3px;">
              Add the following text to your hero’s warscroll:<br><br>
              <div id="Frightful_Touch" class="des" style="font-size: 115%;">
                <table>
                  <tr>
                    <td class="des" style="border: none;"><t1>Frightful Touch:</t1> If the unmodified hit roll for an attack made with this model’s Spectral Claws and Daggers is 6, that attack inflicts 1 mortal wound on the target and the attack sequence ends (do not make a wound or save roll).</td>
                  </tr>
                </table>
              </div>
            </td>
          </tr>
          <tr>
            <td colspan=3 style="font-weight: bold;">Optional
Rule:</td>
            <td colspan=7 style="text-align: left;">You can spend an additional 2 destiny points to add 2 to the Attacks characteristic of the Spirit Host’s Spectral Claws and Daggers, or you can spend an additional 4 destiny points to add 4 to the Attacks characteristic instead.</td>
          </tr>
          <tr>
            <td colspan=10 style="background-color: white; border-style: none;";></td>
          </tr>
        </table>
        </form>
      </div><!-- end of spirit host table -->
    
    </div><!-- end of main -->
    <p></p>
  </div><!-- end of row -->

  <div style="display: none;">
    letzte Spalte ausblenden <button onclick="show_hide('none');">verstecke</button><br>
    <br>
    letzte Spalte ausblenden <button onclick="show_hide('inline');">zeige</button><br>
    <br>
    <button onclick="resetCheckStep6()">Reset CheckBoxes</button>
    <button onclick="resetDescrName('abilitiesForm')">Reset AbiNames</button>
    <br>
    <p>Valid: <span id="validateStep5">validated</span></p>
  </div>
</div>

<div id="step7" class="anvilSteps"><!-- Anvil of Apotheosis: full WARSCROLL -->
  <div class="row">
    <div class="main">
      <h2><b>YOUR WARSCROLL</b></h2>
      <p>It is done! Well, nearly.<br>At this point you can give your hero/villain a name and write a short story about him/her/it. After this, you will have finally created your own hero/villain for Warhammer - Age of Sigmar.<br>You can save your warscroll as pdf or jpg, to use in your games or as you like to.</p>
      <br>
      <div  style="overflow-x:auto;">
        <table class="" style="border: none; width: 100%">
          <tr>
            <td>Choose a format fitting for your warscroll:</td>
            <td><select id="cardFormats" onchange="changeSize()" style="width: 350px; height: 30px;">
              <option value="a6" data-card-width="148" data-card-height="105" data-card-orientation="landscape">A6 Page (148mm × 105mm)</option>
              <option value="⅓-A4" selected="selected" data-card-width="210" data-card-height="99" data-card-orientation="portrait">⅓ A4 Page (210mm × 99mm)</option><!-- &#189; -->
              <option value="A5" data-card-width="210" data-card-height="148" data-card-orientation="portrait">A5 (½ A4) Page (210mm × 148mm)</option><!-- &#8531; -->
              <option value="full-page" data-card-width="210" data-card-height="297" data-card-orientation="portrait">A4 Page (210mm × 297mm)</option>
              <option value="large-card" data-card-width="146" data-card-height="89" data-card-orientation="landscape">Large Card (146mm × 89mm)</option>
              <option value="autosize-card" data-card-width="210" data-card-height="59" data-card-orientation="landscape" selected>automatic Size (210mm × ??mm)</option>
          </select></td>
          </tr>
          <tr>
            <td width=30%></td>
            <td width=70%></td>
          </tr>
          <tr>
            <td>Name your hero:</td>
            <td><input type="text" id="heroesName" oninput="nameYourHero()" style="width: 100%; height: 30px;" placeholder="Enter your heros name here"></td>
          </tr>
          <tr>
            <td></td>
            <td></td>
          </tr>
          <tr>
            <td>Describe your hero:</td>
            <td><textarea type="text" id="heroesDescr" oninput="describeYourHero()" style="width: 100%; height: 130px;" placeholder="Enter your heros description here"></textarea></td>
          </tr>
        </table>
      </div>
      <br>
  
      <div class="row">
        <div>
          <table class="gwTable des" style="border: 1px solid rgb(185 178 137); width: 100%">
            <tr>
              <th class="headCap" id="h0_ohWs_c1" colspan=2 style="background-color: rgb(145 136 77); padding: 6px 14px;";><t1>USING YOUR HERO IN BATTLE</t1></th>
            </tr>
              <td colspan=2 style="padding: 15px;">Once you have created your hero, you are ready to field them in narrative play battles. Below are a number of ideas of how to incorporate your hero into your games of Age of Sigmar.</td>
            <tr>
            </tr>
            <tr>
              <td style="width: 50%; padding: 15px; border: 1px solid rgb(185 178 137); border-style: none solid none none;"><b>Campaign Games:</b> If you are playing a campaign, you could agree that after each battle, players accrue D3 destiny points with which to improve their hero.
                <br><b>Open Play Games:</b> With your opponent’s permission, if you are using the Open War army generator, your hero can be picked to be a Champion or Conqueror in your army depending on the destiny point limit for that hero.</td>
              <td style="width: 50%; padding: 15px;"><b>Matched Play Games:</b> Using these heroes in matched play is strictly a house rule and requires your opponent’s permission. If you do so, count the number of destiny points you have spent on your hero and multiply the total by 10. This is the Pitched Battle points cost of that hero. In addition, your hero has the Leader battlefield role, unless it has the <t1>MONSTER</t1> keyword, in which case it has the Leader and Behemoth battlefield roles.</td>
            </tr>
          </table>
        </div>
      </div>
  
      <br><br>
      <p>Unfortunately, there is no possibility to save your warscroll yet.<br>But you can make a screenshot of your heros warscroll and save it using other programs.</p>
      <div id="saveButtons" style="display: none;">
      
      
      
      
      <a class="grandButton" id="download_your_warscroll" href="#">Save as PNG</a>
      <button id="download_your_warscroll2" href="#" onclick="testButton()">Save as PNG</button>
      <br>
      <button onclick="downloadWS()" class="clickbtn">Click To Download Image</button>
      
      
      
      </div>
    </div>
  </div>
</div>

</div>

<br>
<div style="overflow:auto;">
  <div style="text-align:center;">  <!-- style="float:right;" -->
    <button class="navButton" id="prevBtn" onclick="nextPrev(-1)">Previous</button>
    <button class="navButton" id="resetBtn" onclick="nextPrev(0)">Reset</button>
    <button class="navButton" id="nextBtn" onclick="nextPrev(1)">Next</button>
  </div>
</div>
<!-- Circles which indicates the steps of the form: -->
<div style="text-align: center; margin-top: 25px;">
  <span class="step" style="display: none;">0</span>
  <span class="step">1</span>
  <span class="step">2</span>
  <span class="step">3</span>
  <span class="step">4</span>
  <span class="step">5</span>
  <!--<span class="step">6</span>--><!-- step 4 (archetypes) is only used in Anvil of Apotheosis -->
  <span class="step" style="display: none;">7</span>
</div>
<br>

<div id="originalStatsDatas" style="display: none;">
<div id="orgHeroAncestry"></div>

<button onclick="displayOrgStats()">Show/Hide OriginalStats</button>

<div id="orgStatsTable">
  <table style="width: 300px; font-size: 10px; border: 1px solid black;">
    <tr>
      <th width=28%>Stat</th>
      <th width=12%>Step 1</th>
      <th width=12%>Step 2</th>
      <th width=12%>Step 3</th>
      <th width=12%>Step 4</th>
      <th width=12%>Step 5</th>
      <th width=12%>Step 6</th>
    </tr>
    <tr>
      <td>Move</td>
      <td id="orgMove01">0</td>
      <td id="orgMove02">0</td>
      <td id="orgMove03">0</td>
      <td id="orgMove04">0</td>
      <td id="orgMove05">0</td>
      <td id="orgMove06">0</td>
    </tr>
    <tr>
      <td>Save</td>
      <td id="orgSave01">0</td>
      <td id="orgSave02">0</td>
      <td id="orgSave03">0</td>
      <td id="orgSave04">0</td>
      <td id="orgSave05">0</td>
      <td id="orgSave06">0</td>
    </tr>
    <tr>
      <td>Bravery</td>
      <td id="orgBrav01">0</td>
      <td id="orgBrav02">0</td>
      <td id="orgBrav03">0</td>
      <td id="orgBrav04">0</td>
      <td id="orgBrav05">0</td>
      <td id="orgBrav06">0</td>
    </tr>
    <tr>
      <td>Wounds</td>
      <td id="orgWoun01">0</td>
      <td id="orgWoun02">0</td>
      <td id="orgWoun03">0</td>
      <td id="orgWoun04">0</td>
      <td id="orgWoun05">0</td>
      <td id="orgWoun06">0</td>
    </tr>
    <tr>
      <td>keywords</td>
      <td id="orgKeys01"></td>
      <td id="orgKeys02"></td>
      <td id="orgKeys03"></td>
      <td id="orgKeys04"></td>
      <td id="orgKeys05"></td>
      <td id="orgKeys06"></td>
    </tr>
    <tr>
      <td>actual points</td>
      <td id="orgPts01">0</td>
      <td id="orgPts02">0</td>
      <td id="orgPts03">0</td>
      <td id="orgPts04">0</td>
      <td id="orgPts05">0</td>
      <td id="orgPts06">0</td>
    </tr>
  </table>
</div>

<button onclick="resetWeaDisplay()">Reset WeaDisplayTable</button>
<button onclick="showWeaDisplay()">Show WeaDisplayTable</button>

<div id="orgWeaponTable">
  <div id="missileTable" style="display: none">
    <table id="missileWeaTable" style="width: 700px; font-size: 10px; border: 1px solid black;">
      <tr>
        <th width=40%>MISSILE WEAPONS</th>
        <th width=10%>Rng</th>
        <th width=10%>Att</th>
        <th width=10%>Hit</th>
        <th width=10%>Wnd</th>
        <th width=10%>Rnd</th>
        <th width=10%>Dmg</th>
      </tr>
    </table>
  </div>
  <div id="meleeTable" style="display: none">
    <table id="meleeWeaTable" style="width: 700px; font-size: 10px; border: 1px solid black;">
      <tr>
        <th width=40%>MELEE WEAPONS</th>
        <th width=10%>Rng</th>
        <th width=10%>Att</th>
        <th width=10%>Hit</th>
        <th width=10%>Wnd</th>
        <th width=10%>Rnd</th>
        <th width=10%>Dmg</th>
      </tr>
    </table>
  </div>
</div>

<button onclick="resetBeaDisplay()">Reset BeaDisplayTable</button>
<button onclick="showBeaDisplay()">Show BeaDisplayTable</button>

<div id="orgBeastTable">
  <div id="meleeBeastTable" style="display: none;">
    <table id="meleeWeaBeastTable" style="width: 700px; font-size: 10px; border: 1px solid black;">
      <tr>
        <th width=40%>MELEE WEAPONS</th>
        <th width=10%>Rng</th>
        <th width=10%>Att</th>
        <th width=10%>Hit</th>
        <th width=10%>Wnd</th>
        <th width=10%>Rnd</th>
        <th width=10%>Dmg</th>
      </tr>
    </table>
  </div>
</div>

<button onclick="resetSpiritDisplay()">Reset SpiritDisplayTable</button>
<button onclick="showSpiritDisplay()">Show SpiritDisplayTable</button>

<div id="orgSpiritTable">
  <div id="meleeSpiritTable" style="display: none;">
    <table id="meleeWeaSpiritTable" style="width: 700px; font-size: 10px; border: 1px solid black;">
      <tr>
        <th width=40%>MELEE WEAPONS</th>
        <th width=10%>Rng</th>
        <th width=10%>Att</th>
        <th width=10%>Hit</th>
        <th width=10%>Wnd</th>
        <th width=10%>Rnd</th>
        <th width=10%>Dmg</th>
      </tr>
    </table>
  </div>
</div>
<br>

<p>DmgTable: <span id="dmgTable99check">false</span></p>
<div id="dmgTable99" class="dmgTable99">
</div>

<p id="triggeredBy">triggered by: ...</p>
<p id="demo1">1)</p>
</div>  <!-- end of originalStatsDatas -->
<br>

<div class="footer">
  <p>Disclaimer: This web application is in no way endorsed or sanctioned by Games Workshop – it is entirely unofficial in every sense. Images, logos, colour schemes etc have been sourced from a variety of locations and I take absolutely no credit for their creation. Should the owner wish to authorise or cease useage then please contact me.</p>

  <p>The Anvil of Apotheosis web application is my own work in mostly every part, supported by things and stuff which can be found and were freely accessable in the world wide web, and as such I claim and retain copyright on code and concept.</p>

  <p>This application was build under Modzilla Firefox and works there appropriately. If using another Browser, there might be issues on display, style and/or function. So using Modzilla Firefox is highly recommended.</p>
  
  <p>GW, Games Workshop, Warhammer, Warhammer Age of Sigmar, and all associated logos, illustrations, images, names, creatures, races, locations and the distinctive likenesses thereof are either ® or TM, and/or © Games Workshop Limited, variably registered around the world.</p>
</div><!-- end of class "footer" -->


<!-- ------- SCRIPT area ------- -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/0.4.1/html2canvas.min.js"></script>
<script src="https://html2canvas.hertzen.com/dist/html2canvas.js"></script>
<script>

//   ||||||   ||||||||  ||||||||  |||||||         |||
//  ||    ||     ||     ||        ||    ||       ||||
//  ||           ||     ||        ||    ||      || ||
//   ||||||      ||     ||||||    |||||||   ||     ||
//        ||     ||     ||        ||               ||
//  ||    ||     ||     ||        ||        ||     ||
//   ||||||      ||     ||||||||  ||            ||||||||

// --- scripts on step 1 ------------------------------
// set points limit ------------------------------
function setPointLimit(ptLimit) {
  if (ptLimit == "20") {
    document.getElementById("champion").checked = true;
    document.getElementById("conqueror").checked = false;
  } else {
    document.getElementById("champion").checked = false;
    document.getElementById("conqueror").checked = true;
  };
  document.getElementById("ptsMax").innerHTML = ptLimit;
  document.getElementById("validateStep" + currentTab).innerHTML = "validated";
};

function resetStep1() {
  document.getElementById("ptsMax").innerHTML = "-";
  document.getElementById("champion").checked = false;
  document.getElementById("conqueror").checked = false;
  document.getElementById("validateStep" + currentTab).innerHTML = "not valid";
};
// --- end of scripts on step 1 ------------------------------

//   ||||||   ||||||||  ||||||||  |||||||        ||||||
//  ||    ||     ||     ||        ||    ||      ||    ||
//  ||           ||     ||        ||    ||            ||
//   ||||||      ||     ||||||    |||||||   ||      |||
//        ||     ||     ||        ||              |||
//  ||    ||     ||     ||        ||        ||  |||
//   ||||||      ||     ||||||||  ||            ||||||||

// --- scripts on step 2 ------------------------------
// chose char and display stats ------------------------------
function clickChar(charId) {
  document.getElementById("dmgTable99check").innerHTML = "false";
  resetStep2();
  document.getElementById(charId).style.backgroundColor = "rgb(185 178 137)";
  var charN = document.getElementById(charId).getElementsByClassName("charName")[0].innerHTML;
  var charNclear = charN.replace("<b>", "");
      charNclear = charN.replace("</b>", "");
  var char1 = document.getElementById(charId).getElementsByClassName("q1")[0].innerHTML;
  var char2 = document.getElementById(charId).getElementsByClassName("q2")[0].innerHTML;
  var char3 = document.getElementById(charId).getElementsByClassName("q3")[0].innerHTML;
  var char4 = document.getElementById(charId).getElementsByClassName("q4")[0].innerHTML;
  var char5 = document.getElementById(charId).getElementsByClassName("p1")[0].innerHTML;
  var charK = document.getElementById(charId).getElementsByClassName("charKeys")[0].innerHTML;
  
  var charTab = document.getElementById(charId).getElementsByTagName("tr")
  for (i = 1; i < charTab.length; i++) {
    for (j = 0; j < charTab[i].cells.length; j++) {
      actCell = charTab[i].cells[j].innerHTML;
      if (actCell.includes("Ability") === true) { /*document.getElementById("demo1").innerHTML = charTab[i].cells[j + 1].innerHTML;*/ };
    };
  };
  
  document.getElementById("heroName").innerHTML = charN;
  document.getElementById("yourHerosName").innerHTML = charNclear;
  document.getElementById("move").innerHTML = char1;
  document.getElementById("save").innerHTML = char2;
  document.getElementById("brav").innerHTML = char3;
  document.getElementById("woun").innerHTML = char4;
  document.getElementById("ptsAct").innerHTML = char5;
  document.getElementById("heroKeys").innerHTML = charK;
  document.getElementById("orgHeroAncestry").innerHTML = charN;
  
  if (char1.substr(char1.length - 1,1) == '"') {
    document.getElementById("orgMove02").innerHTML = char1.substr(0,char1.length - 1); } 
  else {document.getElementById("orgMove02").innerHTML = char1; };
  if (char2 == "-") {
    document.getElementById("orgSave02").innerHTML = "0" } 
  else if (char2.substr(char2.length - 1,1) == "+") {
    document.getElementById("orgSave02").innerHTML = char2.substr(0,char2.length - 1); } 
  else {document.getElementById("orgSave02").innerHTML = char2; };
  document.getElementById("orgBrav02").innerHTML = char3;
  document.getElementById("orgWoun02").innerHTML = char4;
  document.getElementById("orgPts02").innerHTML = char5;
  document.getElementById("orgKeys02").innerHTML = charK;
  
  if (charK.includes("ARMY") === false && charK.includes("WIZARD") === false) {
    document.getElementById("validateStep" + currentTab).innerHTML = "validated";
  };
  
  document.getElementById("allCommandAbilities").style.display = "none";
  document.getElementById("allSpells").style.display = "none";
  document.getElementById("damageTable").style.display = "none";
  if (charK.includes("ABHORRANT") === true) {
    document.getElementById("allSpells").style.display = "block";
    document.getElementById("dmgTable99check").innerHTML = "true";
    addToWS(CommAbi_ABHORRANT, "command", currentTab); }
  else if (charK.includes("COURTIER") === true) {
    addToWS(Abi_COURTIER, "abilities", currentTab); }
  else if (charK.includes("MORTISAN") === true) {
    document.getElementById("allSpells").style.display = "block";}
  else if (charK.includes("LIEGE") === true) {
    addToWS(CommAbi_LIEGE, "command", currentTab); };
};

// add command abilities  and spells to warscroll ------------------------------
function extendedAddToWS(theNameExt, wsPartExt, theTabExt, checkIdExt) {
  charK = document.getElementById("orgKeys0" + currentTab);
  actSpellName = document.getElementById("r1_" + checkIdExt + "c1").innerHTML
  if (currentTab == 2) { remStepFromWS() };

  if (document.getElementById("spe_01").checked == true 
  || document.getElementById("spe_02").checked == true 
  || document.getElementById("spe_03").checked == true 
  || document.getElementById("spe_04").checked == true 
  || document.getElementById("spe_05").checked == true 
  || document.getElementById("spe_06").checked == true) { 
    document.getElementById("rewriteSpellsCommand").innerHTML = ""
    var clone = Magic_Abi0.cloneNode(true);
    clone.id = Magic_Abi0.id + "1";
    document.getElementById("rewriteSpellsCommand").appendChild(clone);
    document.getElementById("Magic_Abi01").innerHTML = document.getElementById("Magic_Abi01").innerHTML.replace(" and Mystic Shield spells. In addition, they know any spells you have picked for them from the Spell Table.", ", Mystic Shield and " + actSpellName + " spells.");    
    addToWS(Magic_Abi01, "magic", theTabExt);
  };
  //document.getElementById("demo1").innerHTML = theNameExt + wsPartExt + theTabExt + checkIdExt
  //document.getElementById("orgKeys0" + currentTab).innerHTML = actKeys;
  document.getElementById("validateStep" + currentTab).innerHTML = "validated";
  addToWS(theNameExt, wsPartExt, theTabExt, checkIdExt);
};

// change <ARMY> keyword to next keyword on list ------------------------------
function selectArmy(charId, charInner) {
  var actId = charId.substr(3, charId.length)
  var armies = ["ARMY"]
  var armiesAll = charInner.split("&gt;, &lt;");
  for (i = 0; i < armiesAll.length; i++) {
    armiesAll[i] = armiesAll[i].replace(/&lt;/g, "");
    armiesAll[i] = armiesAll[i].replace(/&gt;/g, "");
    armiesAll[i] = armiesAll[i].toUpperCase()
  };
  //armies.push(armiesAll);  // join a single string ------------------------------
  armies = armies.concat(armiesAll); // concat two arrays
  armiesCur = document.getElementById("Keys" + actId).innerHTML.replace("&lt;ARMY&gt;", "ARMY");
  for (i = 0; i < armies.length; i++) {
    j = i + 1
    n = armiesCur.includes(armies[i])
    if (n === true) {
      if (j >= armies.length) {
        armiesNew = armiesCur.replace(armies[i], armies[0]);
      } else {
        armiesNew = armiesCur.replace(armies[i], armies[j]);
      };
      break;
    };
  };
  
  n = armiesNew.includes("ARMY")
  if (n === true) {
    armiesNew = armiesNew.replace("ARMY", "&lt;ARMY&gt;")
  };
  document.getElementById("Keys" + actId).innerHTML = armiesNew;
  showChange(actId);
};

// show changes by highlight for 1 second
function showChange(actID) {
  var el = document.getElementById("Keys" + actID);
  el.style.animation = 'none';
  el.offsetHeight; /* trigger reflow */
  el.style.animation = null; 
}

// show/hide choosen alliance(ancestries) ------------------------------
function showAlliance(allianceId) {
  alli = allianceId.substr(5, allianceId.length);
  
  resetAllianceShown();
 
  var squares = document.getElementsByClassName("charSquare")
  if (alli == "ALL") {
    resetAllianceShown();
  } else {
    for (i = 0; i < squares.length; i++) {
      squareId = squares[i].id;
      squareKey = document.getElementById("Keys" + squareId).innerHTML;
      if (squareKey.includes(alli) === false) {
        squares[i].style.display = "none";        
      } else {
        squares[i].style.display = "block";
      };
    };
  };
  fixAlliIndicator(allianceId)
};

// reset shown alliance(ancestries) ------------------------------
function resetAllianceShown() {
  var squares = document.getElementsByClassName("charSquare")
  for (i = 0; i < squares.length; i++) {
    squares[i].style.display = "block";
  };
};

// fix shown alliance(ancestries) ------------------------------
function fixAlliIndicator(allianceId) {  // This function removes the "active" class of all steps...
  var i, x = document.getElementsByClassName("grandButton");
  for (i = 0; i < x.length; i++) {
    x[i].className = x[i].className.replace(" active", "");
  }
  document.getElementById(allianceId).className += " active";  //... and adds the "active" class on the current step
};

// reset Step 2 ------------------------------
function resetStep2() {
  document.getElementById("dmgTable99check").innerHTML = "false";
  var cBoxes = document.getElementById("commandAbilitiesForm").getElementsByTagName("input")
  for (i = 0; i < cBoxes.length; i++) {
    if (cBoxes[i].type == 'radio') {
      cBoxes[i].checked = false;
      cBoxes[i].disabled = false;
    }
  };
  var cBoxes = document.getElementById("spellsForm").getElementsByTagName("input")
  for (i = 0; i < cBoxes.length; i++) {
    if (cBoxes[i].type == 'radio' || cBoxes[i].type == 'checkbox') {
      cBoxes[i].checked = false;
      cBoxes[i].disabled = false;
    }
  };

  document.getElementById("allCommandAbilities").style.display = "none";
  document.getElementById("allSpells").style.display = "none";
  
  var charT = document.getElementById("step2chars").getElementsByClassName("charSquare")
  for (i = 0; i < charT.length; i++) {
    charT[i].style.backgroundColor = "";
  };
  document.getElementById("heroName").innerHTML = "your heros name";
  document.getElementById("yourHerosName").innerHTML = "Your hero";
  document.getElementById("yourHeroArmoury").innerHTML = "currently unarmed";
  document.getElementById("validateStep" + currentTab).innerHTML = "not valid";
  document.getElementById("orgHeroAncestry").innerHTML = "";
  
  resetAllStats();
  remStepFromWS();
};
// --- end of scripts on step 2 ------------------------------

//   ||||||   ||||||||  ||||||||  |||||||        ||||||
//  ||    ||     ||     ||        ||    ||      ||    ||
//  ||           ||     ||        ||    ||            ||
//   ||||||      ||     ||||||    |||||||   ||   ||||||
//        ||     ||     ||        ||                  ||
//  ||    ||     ||     ||        ||        ||  ||    ||
//   ||||||      ||     ||||||||  ||             ||||||

// --- scripts on step 3 ------------------------------
// set variables ------------------------------
var ohW = 0  // one Hand Wea
var oh2 = 0  // one Hand Wea 2nd
var thW = 0  // two Hand Wea
var ohM = 0  // one Hand Mi-Wea
var thM = 0  // two Hand Mi-Wea
var shi = 0  // shield

var ohWs = ["ohW_01", "ohW_02", "ohW_03", "ohW_04", "ohW_05", "ohW_06", "ohW_07", "ohW_08", "ohW_09", "ohW_10"]
var oh2s = ["oh2_01"]
var thWs = ["thW_01", "thW_02", "thW_03", "thW_04", "thW_05", "thW_06", "thW_07"]
var ohMs = []
var thMs = []
var shis = ["shi_01"]
var weaCh = [" • 1 one-handed melee weapon.", 
       " • 2 different one-handed melee weapons.", 
       " • 2 of the same one-handed melee weapon (+1 DP).", 
       " • 1 one-handed melee weapon and a shield.", 
       " • 1 two-handed melee weapon."]
var weaChV = 99

// reset checkboxes to uncheck & reset weapon names ------------------------------
function resetCheckStep3() {
  var cBoxes = document.getElementById("weaponsForm").getElementsByTagName("input")
  for (i = 0; i < cBoxes.length; i++) {
    if (cBoxes[i].type == 'checkbox') {
      cBoxes[i].checked = false;
      cBoxes[i].disabled = false;
    }
  };
  for (i = 0; i < oh2s.length; i++) { document.getElementById(oh2s[i]).disabled = true; };
  document.getElementById("yourHeroArmoury").innerHTML = "currently unarmed";
  text = weaChTxt(99);
  ohW = 0; oh2 = 0; thW = 0; ohM = 0; thM = 0; shi = 0;
  var weaponCode = "0-" + ohW + oh2 + thW + ohM + thM + shi;
  
  resetWeaName();
  resetWeaDisplay();
  resetRestrictionsStep3();
};

// reset weapon names to origin ------------------------------
function resetWeaName() {
  var hideCol = document.getElementById("weaponsForm").getElementsByTagName("tr")
  for (i = 0; i < hideCol.length; i++) {
    for (j = 1; j < hideCol[i].cells.length; j++) {
      if (hideCol[i].cells[j].id.substr(hideCol[i].cells[j].id.length - 2,2) == "hi" 
      && hideCol[i].cells[j].id.substr(0,2) == "r1"
      && hideCol[i].cells[j].id.substr(3,3) != "shi"
      && hideCol[i].cells[j].id.substr(3,3) != "oh2") {
        document.getElementById(hideCol[i].cells[j].id.substr(0,hideCol[i].cells[j].id.length -3) + "1").innerHTML = hideCol[i].cells[j].innerHTML
       };
    };    
  };
};

// reset/hide displayed weaponTable ------------------------------
function resetWeaDisplay() {
  var wTables = ["melee", "missile"]
  for (w = 0; w < wTables.length; w++) {
    var wTable = document.getElementById(wTables[w] + "WeaTable")
    var rows = wTable.getElementsByTagName("tr").length
    var wTablePre = document.getElementById(wTables[w] + "WeaTablePre")
    var rowsPre = wTablePre.getElementsByTagName("tr").length

    text = "wTable:" + rows;
    do {
      if (rows > 1) {
        wTable.deleteRow(1);
      };
      rows = wTable.getElementsByTagName("tr").length;
    }
    while (rows > 1);
    
    do {
      if (rowsPre > 1) {
        wTablePre.deleteRow(1);
      };
      rowsPre = wTablePre.getElementsByTagName("tr").length;
    }
    while (rowsPre > 1);
    
    document.getElementById(wTables[w] + "Table").style.display = "none";
    document.getElementById(wTables[w] + "TablePre").style.display = "none";
  };  
  //document.getElementById("missileTable").style.display = "none";
  //document.getElementById("meleeTable").style.display = "none";
};

// check & reset restrictions ------------------------------
function resetRestrictionsStep3() {
  var str = document.getElementById("heroKeys").innerHTML;
  if (str.includes("OSSIARCH BONEREAPERS") === true) {
    for (i = 5; i < ohWs.length; i++) { document.getElementById(ohWs[i]).disabled = true; };
    for (i = 4; i < thWs.length; i++) { document.getElementById(thWs[i]).disabled = true; };
  };
  if (str.includes("FLESH-EATER COURTS") === true) {
    for (i = 0; i < 5/*ohWs.length*/; i++) { document.getElementById(ohWs[i]).disabled = true; };
    for (i = 0; i < 4/*thWs.length*/; i++) { document.getElementById(thWs[i]).disabled = true; };
  };
};

// display weaponTable ------------------------------
function showWeaDisplay() {
  var weas = [thMs, ohMs, thWs, ohWs]
  for (w = 0; w < weas.length; w++) {
        
  };
  
  for (i = 0; i < thMs.length; i++) {
    var checkBox = document.getElementById(thMs[i]);
    if (checkBox.checked == true) {
      var table = document.getElementById("missileWeaTable");
      var row = table.insertRow(1);
      var tablePre = document.getElementById("missileWeaTablePre");
      var rowPre = tablePre.insertRow(1);

      for (n = 1; n < 8; n++) {
        cellId = "r1_" + checkBox.id + "c" + n;
        cellTxt = document.getElementById(cellId).innerHTML;
        row.insertCell(n - 1).innerHTML = cellTxt;
        rowPre.insertCell(n - 1).innerHTML = cellTxt;
      };
      document.getElementById("missileTable").style.display = "block";
      document.getElementById("missileTablePre").style.display = "block";
    };
  };
  
  for (i = 0; i < ohMs.length; i++) {
    var checkBox = document.getElementById(ohMs[i]);
    if (checkBox.checked == true) {
      var table = document.getElementById("missileWeaTable");
      var row = table.insertRow(1);
      var tablePre = document.getElementById("missileWeaTablePre");
      var rowPre = tablePre.insertRow(1);

      for (n = 1; n < 8; n++) {
        cellId = "r1_" + checkBox.id + "c" + n;
        cellTxt = document.getElementById(cellId).innerHTML;
        row.insertCell(n - 1).innerHTML = cellTxt;
        rowPre.insertCell(n - 1).innerHTML = cellTxt;
      };
      document.getElementById("missileTable").style.display = "block";
      document.getElementById("missileTablePre").style.display = "block";
    };
  };
  
  for (i = 0; i < thWs.length; i++) {
    var checkBox = document.getElementById(thWs[i]);
    if (checkBox.checked == true) {
      var table = document.getElementById("meleeWeaTable");
      var row = table.insertRow(1);
      var tablePre = document.getElementById("meleeWeaTablePre");
      var rowPre = tablePre.insertRow(1);

      for (n = 1; n < 8; n++) {
        cellId = "r1_" + checkBox.id + "c" + n;
        cellTxt = document.getElementById(cellId).innerHTML;
        row.insertCell(n - 1).innerHTML = cellTxt;
        rowPre.insertCell(n - 1).innerHTML = cellTxt;
      };
      document.getElementById("meleeTable").style.display = "block";
      document.getElementById("meleeTablePre").style.display = "block";
    };
  };
  
  for (i = 0; i < ohWs.length; i++) {
    var checkBox = document.getElementById(ohWs[i]);
    if (checkBox.checked == true) {
      var table = document.getElementById("meleeWeaTable");
      var row = table.insertRow(1);
      var tablePre = document.getElementById("meleeWeaTablePre");
      var rowPre = tablePre.insertRow(1);

      for (n = 1; n < 8; n++) {
        cellId = "r1_" + checkBox.id + "c" + n;
        cellTxt = document.getElementById(cellId).innerHTML;
        row.insertCell(n - 1).innerHTML = cellTxt;
        rowPre.insertCell(n - 1).innerHTML = cellTxt;
      };
      document.getElementById("meleeTable").style.display = "block";
      document.getElementById("meleeTablePre").style.display = "block";
    };
  };
};

// select weapon with checkboxes & disabled other checkboxes
function clickWea(checkId) {  
  var checkBox = document.getElementById(checkId);  // Get the checkbox
  var nameCheck = document.getElementById("r1_" + checkId + "c1").innerHTML;
      nameCheck = nameCheck.replace("*", "");
      document.getElementById("r1_" + checkId + "c1").innerHTML = nameCheck;
  var nameOrg = document.getElementById("r1_" + checkId + "c9hi").innerHTML;
  var n = nameCheck.search("<button");
 
  if (n != -1) {
    document.getElementById("r1_" + checkId + "c1").innerHTML = nameOrg;
  };
  
  var heroArmoury = ""
  var txtArmed = document.getElementById("yourHeroArmoury")
  var aeiou = nameCheck.lastIndexOf(" ");  // find first letter
  if (aeiou != -1) { firstL = nameCheck.substr(aeiou + 1, 1) }
  else { firstL = nameCheck.substr(0, 1) };
  firstL = firstL.toUpperCase();
  var weaPrefix = "a "
  if (firstL == "A" || firstL == "E" || firstL == "I" || firstL == "O" || firstL == "U") { weaPrefix = "an " };
  if (checkBox.checked == true && checkId.includes("shi") == false && checkId.includes("oh2") == false) {
    if (txtArmed.innerHTML == "currently unarmed") {
      heroArmoury = "armed with " + weaPrefix + nameCheck;
      txtArmed.innerHTML = heroArmoury;
    } else if (txtArmed.innerHTML.includes(" and ") == false) {
      txtArmed.innerHTML = txtArmed.innerHTML + " and " + weaPrefix + nameCheck;
    };
  } else if (checkBox.checked == false && checkId.includes("shi") == false && checkId.includes("oh2") == false) {
    if (txtArmed.innerHTML.includes(" and ") == false) {
      txtArmed.innerHTML = "currently unarmed"
    } else if (txtArmed.innerHTML.includes(" and " + weaPrefix + nameCheck) == true) {
      heroArmoury = txtArmed.innerHTML.replace(" and " + weaPrefix + nameCheck, "");
      txtArmed.innerHTML = heroArmoury;
    } else {
      heroArmoury = txtArmed.innerHTML.replace(weaPrefix + nameCheck + " and ", "");
      txtArmed.innerHTML = heroArmoury;
    };
  } else if (checkId.includes("oh2") == true) {
    if (checkBox.checked == true) {
      weaPreCheck = txtArmed.innerHTML.lastIndexOf("with a ");
      if (weaPreCheck != -1) { weaPreCheck = "with a "; } else { weaPreCheck = "with an "; };
      heroArmoury = txtArmed.innerHTML.replace(weaPreCheck, "with 2 ");
      heroArmoury = heroArmoury + "s";
      txtArmed.innerHTML = heroArmoury;
    } else {
      nameCheck = txtArmed.innerHTML
      aeiou = nameCheck.lastIndexOf(" ");  // find first letter
      if (aeiou != -1) { firstL = nameCheck.substr(aeiou + 1, 1) }
      else { firstL = nameCheck.substr(0, 1) };
      firstL = firstL.toUpperCase();
      weaPrefix = "a "
      if (firstL == "A" || firstL == "E" || firstL == "I" || firstL == "O" || firstL == "U") { weaPrefix = "an " };
      heroArmoury = txtArmed.innerHTML.replace("2 ", weaPrefix);
      heroArmoury = heroArmoury.substr(0, heroArmoury.length - 1);
      txtArmed.innerHTML = heroArmoury;
    };
  };

  resetWeaDisplay();
  showWeaDisplay();
  remStepFromWS();
  if (document.getElementById("ohW_02").checked == true || document.getElementById("ohW_04").checked == true) { addToWS(Abi_NADIRITE, "abilities", currentTab); };
  
  var pointCell = document.getElementById("orgPts0" + currentTab);  
  var DPs = document.getElementById("r1_" + checkId + "c8").innerHTML;
  // If the checkbox is checked, display the output text
  if (checkId.substring(0,3) == "ohW") {    
    if (checkBox.checked == true) { ohW += 1; } else { ohW -= 1; };
  } else if (checkId.substring(0,3) == "oh2") {
    if (checkBox.checked == true) { oh2 += 1; } else { oh2 -= 1; };    
  } else if (checkId.substring(0,3) == "thW") {
    if (checkBox.checked == true) { thW += 1; } else { thW -= 1; };    
  } else if (checkId.substring(0,3) == "ohM") {    
    if (checkBox.checked == true) { ohM += 1; } else { ohM -= 1; };
  } else if (checkId.substring(0,3) == "thM") {    
    if (checkBox.checked == true) { thM += 1; } else { thM -= 1; };
  } else if (checkId.substring(0,3) == "shi") {
    if (checkBox.checked == true) {
      shi += 1;
      document.getElementById("orgSave0" + currentTab).innerHTML = 1;
    } else {
      shi -= 1;
      document.getElementById("orgSave0" + currentTab).innerHTML = 0;
    };
  };
  // If the checkbox is checked, add destiny points
  if (checkBox.checked == true) {
    pointCell.innerHTML = parseInt(pointCell.innerHTML) + parseInt(DPs);
  } else {
    pointCell.innerHTML = parseInt(pointCell.innerHTML) - parseInt(DPs);
  };

  var weaponCode = "0-" + ohW + oh2 + thW + ohM + thM + shi;
  var i = 0
  
  switch (weaponCode) {
    case "0-100000":  // • 1 one-handed melee weapon.
      for (i = 0; i < ohWs.length; i++) {document.getElementById(ohWs[i]).disabled = false;};
      for (i = 0; i < oh2s.length; i++) {document.getElementById(oh2s[i]).disabled = false;};
      for (i = 0; i < thWs.length; i++) {document.getElementById(thWs[i]).disabled = true;};
      for (i = 0; i < ohMs.length; i++) {document.getElementById(ohMs[i]).disabled = false;};
      for (i = 0; i < thMs.length; i++) {document.getElementById(thMs[i]).disabled = false;};
      for (i = 0; i < shis.length; i++) {document.getElementById(shis[i]).disabled = false;};
      if (checkId == "oh2_01") { DPs = parseInt(DPs) - 1 };
      document.getElementById("r1_oh2_01c8").innerHTML = parseInt(DPs) + 1;
      text = weaChTxt(0);  // text = " • 1 one-handed melee weapons.";   
      break;
    case "0-200000":  // • 2 different one-handed melee weapons.
      weaSwitch(ohWs)  // ohWs
      for (i = 0; i < oh2s.length; i++) {document.getElementById(oh2s[i]).disabled = true;};
      for (i = 0; i < thWs.length; i++) {document.getElementById(thWs[i]).disabled = true;};
      for (i = 0; i < ohMs.length; i++) {document.getElementById(ohMs[i]).disabled = true;};
      for (i = 0; i < thMs.length; i++) {document.getElementById(thMs[i]).disabled = true;};
      for (i = 0; i < shis.length; i++) {document.getElementById(shis[i]).disabled = true;};
      resetSecondOneHW();
      text = weaChTxt(1);  // text = " • 2 one-handed melee weapons.";     
      break;
    case "0-110000":  // • 2 of the same one-handed melee weapon.
      weaSwitch(ohWs)  // ohWs
      weaSwitch(oh2s)  // ohWs
      for (i = 0; i < thWs.length; i++) {document.getElementById(thWs[i]).disabled = true;};
      for (i = 0; i < ohMs.length; i++) {document.getElementById(ohMs[i]).disabled = true;};
      for (i = 0; i < thMs.length; i++) {document.getElementById(thMs[i]).disabled = true;};
      for (i = 0; i < shis.length; i++) {document.getElementById(shis[i]).disabled = true;};
      rows = document.getElementById("meleeWeaTable").getElementsByTagName("tr");
      dblAtt = rows[1].cells[2].innerHTML;
      rows[1].cells[2].innerHTML = parseInt(dblAtt) * 2;
      rows = document.getElementById("meleeWeaTablePre").getElementsByTagName("tr");
      dblAtt = rows[1].cells[2].innerHTML;
      rows[1].cells[2].innerHTML = parseInt(dblAtt) * 2;
      text = weaChTxt(2);  // text = " • 2 of the same one-handed melee weapon.";     
      break;
    case "0-100001":  // • 1 one-handed melee weapon and a shield.
      weaSwitch(ohWs)  // ohWs
      for (i = 0; i < oh2s.length; i++) {document.getElementById(oh2s[i]).disabled = true;};
      for (i = 0; i < thWs.length; i++) {document.getElementById(thWs[i]).disabled = true;};
      for (i = 0; i < ohMs.length; i++) {document.getElementById(ohMs[i]).disabled = true;};
      for (i = 0; i < thMs.length; i++) {document.getElementById(thMs[i]).disabled = true;};
      weaSwitch(shis)  // shis
      resetSecondOneHW();
      text = weaChTxt(3);  // text = " • 1 one-handed melee weapon and a shield.";
      break;
    case "0-001000":  // • 1 two-handed melee weapon.
      for (i = 0; i < ohWs.length; i++) {document.getElementById(ohWs[i]).disabled = true;};
      for (i = 0; i < oh2s.length; i++) {document.getElementById(oh2s[i]).disabled = true;};
      weaSwitch(thWs)  // thWs
      for (i = 0; i < ohMs.length; i++) {document.getElementById(ohMs[i]).disabled = true;};
      for (i = 0; i < thMs.length; i++) {document.getElementById(thMs[i]).disabled = true;};
      for (i = 0; i < shis.length; i++) {document.getElementById(shis[i]).disabled = true;};
      resetSecondOneHW();
      text = weaChTxt(4);  //text = " • 1 two-handed melee weapon.";
      break;
    case "0-100100":  // • 1 Handbow and 1 one-handed melee weapon.
      weaSwitch(ohWs)  // ohWs
      for (i = 0; i < oh2s.length; i++) {document.getElementById(oh2s[i]).disabled = true;};
      for (i = 0; i < thWs.length; i++) {document.getElementById(thWs[i]).disabled = true;};
      weaSwitch(ohMs)  // ohMs      
      for (i = 0; i < thMs.length; i++) {document.getElementById(thMs[i]).disabled = true;};
      for (i = 0; i < shis.length; i++) {document.getElementById(shis[i]).disabled = true;};
      resetSecondOneHW();
      text = weaChTxt(99);  // text = " • 1 missile weapon and 1 one-handed melee weapon.";
      break;
    case "0-100010":  // • 1 Bow and 1 one-handed melee weapon.
      weaSwitch(ohWs)  // ohWs
      for (i = 0; i < oh2s.length; i++) {document.getElementById(oh2s[i]).disabled = true;};
      for (i = 0; i < thWs.length; i++) {document.getElementById(thWs[i]).disabled = true;};
      for (i = 0; i < ohMs.length; i++) {document.getElementById(ohMs[i]).disabled = true;};
      weaSwitch(thMs)  // thMs      
      for (i = 0; i < shis.length; i++) {document.getElementById(shis[i]).disabled = true;};
      resetSecondOneHW();
      text = weaChTxt(99);  // text = " • 1 missile weapon and 1 one-handed melee weapon.";
      break;
    case "0-000001":  // only a shield.
      for (i = 0; i < oh2s.length; i++) {document.getElementById(oh2s[i]).disabled = true;};
      for (i = 0; i < ohWs.length; i++) {document.getElementById(ohWs[i]).disabled = false;};
      for (i = 0; i < thWs.length; i++) {document.getElementById(thWs[i]).disabled = true;};
      for (i = 0; i < ohMs.length; i++) {document.getElementById(ohMs[i]).disabled = true;};
      for (i = 0; i < thMs.length; i++) {document.getElementById(thMs[i]).disabled = true;};
      weaSwitch(shis)  // shis
      resetSecondOneHW();
      text = weaChTxt(99);  // text = " • only a shield.";
      break;
    case "0-000100":  // only a one-handed missile weapon.
      for (i = 0; i < ohWs.length; i++) {document.getElementById(ohWs[i]).disabled = false;};
      for (i = 0; i < oh2s.length; i++) {document.getElementById(oh2s[i]).disabled = true;};
      for (i = 0; i < thWs.length; i++) {document.getElementById(thWs[i]).disabled = true;};
      weaSwitch(ohMs)  // ohMs
      for (i = 0; i < thMs.length; i++) {document.getElementById(thMs[i]).disabled = true;};
      for (i = 0; i < shis.length; i++) {document.getElementById(shis[i]).disabled = true;};
      resetSecondOneHW();
      text = weaChTxt(99);  // text = " • only a missile weapon.";
      break;
    case "0-000010":  // only a two-handed missile weapon.
      for (i = 0; i < ohWs.length; i++) {document.getElementById(ohWs[i]).disabled = false;};
      for (i = 0; i < oh2s.length; i++) {document.getElementById(oh2s[i]).disabled = true;};
      for (i = 0; i < thWs.length; i++) {document.getElementById(thWs[i]).disabled = true;};
      for (i = 0; i < ohMs.length; i++) {document.getElementById(ohMs[i]).disabled = true;};
      weaSwitch(thMs)  // thMs      
      for (i = 0; i < shis.length; i++) {document.getElementById(shis[i]).disabled = true;};
      resetSecondOneHW();
      text = weaChTxt(99);  // text = " • only a missile weapon.";
      break;
    default:
      for (i = 0; i < ohWs.length; i++) {document.getElementById(ohWs[i]).disabled = false;};
      for (i = 0; i < oh2s.length; i++) {document.getElementById(oh2s[i]).disabled = true;};
      for (i = 0; i < thWs.length; i++) {document.getElementById(thWs[i]).disabled = false;};
      for (i = 0; i < ohMs.length; i++) {document.getElementById(ohMs[i]).disabled = false;};
      for (i = 0; i < thMs.length; i++) {document.getElementById(thMs[i]).disabled = false;};
      for (i = 0; i < shis.length; i++) {document.getElementById(shis[i]).disabled = false;};
      resetSecondOneHW();
      text = weaChTxt(99);  // text = "No weapons choosen yet.";
  };
  displayAllSteps();
  resetRestrictionsStep3();
};

// resset if 2nd same one-hand weapon without a one-hand weapon ------------------------------
function resetSecondOneHW() {
  checkId = "oh2_01"
  var checkBox = document.getElementById(checkId);  // Get the checkbox
  var pointCell = document.getElementById("orgPts0" + currentTab);  
  var DPs = document.getElementById("r1_" + checkId + "c8").innerHTML;
  // If the checkbox is checked, add destiny points
  if (checkBox.checked == true) {
    oh2 = 0;
    checkBox.checked = false;
    document.getElementById("r1_oh2_01c8").innerHTML = "0";
    pointCell.innerHTML = parseInt(pointCell.innerHTML) - parseInt(DPs);
  };
};

// change enabled/disabled checkboxes ------------------------------
function weaSwitch(weaArray) {
  for (i = 0; i < weaArray.length; i++) {
    var checkBox = document.getElementById(weaArray[i]);
    if (checkBox.checked == true) {
      document.getElementById(weaArray[i]).disabled = false;
    } else {document.getElementById(weaArray[i]).disabled = true;};
  };
};

// highlight text depending on chosen weapons ------------------------------
function weaChTxt(weaChV) {
  document.getElementById("validateStep" + currentTab).innerHTML = "not valid";
  var text = "";
  var i;
  for (i = 0; i < weaCh.length; i++) {
    if (i === weaChV) {
      document.getElementById("validateStep" + currentTab).innerHTML = "validated";
      text += "<b>" + weaCh[i] + "</b><br>"; continue;
    }
    text += weaCh[i] + "<br>";
  }
  document.getElementById("weaChosen").innerHTML = text;
};

// identify header, weapons, shield ------------------------------
var rows = document.getElementById("weaponsTable")/*.getElementsByTagName('tbody')[0]*/.getElementsByTagName("tr");
for (i = 0; i < rows.length; i++) {
  rows[i].addEventListener('click', function() {
    //this.classList.toggle('marked');
    actRow = this.rowIndex;
    var weaProperties = ""

    if (rows[actRow].cells[0].id.substr(0,1) == "h") {
       weaProperties = "none (header)";
    } else if (rows[actRow].cells[0].id.substr(3,3) == "shi") {
       weaProperties = "none (shield)";
    } else {
      weaProperties = "";
      for (j = 1; j < rows[actRow].cells.length; j++) {
        if (weaProperties == "") {
          weaProperties = rows[actRow].cells[j].innerHTML;
        } else {
          weaProperties = weaProperties + " | " + rows[actRow].cells[j].innerHTML;
          // rows[actRow].cells[j].style.display="none";
        }
      }
    }
  });
};
// --- end of scripts on step 3 ------------------------------

//   ||||||   ||||||||  ||||||||  |||||||          ||
//  ||    ||     ||     ||        ||    ||        ||
//  ||           ||     ||        ||    ||       ||
//   ||||||      ||     ||||||    |||||||   ||  ||  ||
//        ||     ||     ||        ||            ||||||||
//  ||    ||     ||     ||        ||        ||      ||
//   ||||||      ||     ||||||||  ||                ||

// --- scripts on step 4 ------------------------------
// add prayers and spells to warscroll ------------------------------
function extAddToWS(theNameExt, wsPartExt, theTabExt, checkIdExt) {
  charK = document.getElementById("orgKeys0" + currentTab);
  actKeys = charK.innerHTML;
  actSpellPrayName = document.getElementById("r1_" + checkIdExt + "c1").innerHTML
  if (currentTab == 4) { remStepFromWS() };
  
  if (document.getElementById("arc_03").checked == true 
  || document.getElementById("arc_04").checked == true) { 
    addToWS(Divine_Prayers, "abilities", theTabExt);
    if (actKeys.includes("PRIEST") === false) { actKeys = actKeys + ", PRIEST" };
  } else {
    if (actKeys.includes("PRIEST") === true) { actKeys = actKeys.replace(", PRIEST", ""); };
  };
  if (document.getElementById("arc_05").checked == true 
  || document.getElementById("arc_06").checked == true 
  || document.getElementById("arc_07").checked == true 
  || document.getElementById("arc_08").checked == true) { 
    
    document.getElementById("rewriteSpellsPrayers").innerHTML = ""
    var clone = Magic_Abi.cloneNode(true);
  clone.id = Magic_Abi.id + "1";
  document.getElementById("rewriteSpellsPrayers").appendChild(clone);
    document.getElementById("Magic_Abi1").innerHTML = document.getElementById("Magic_Abi1").innerHTML.replace(" and Mystic Shield spells. In addition, they know any spells you have picked for them from the Spell Table.", ", Mystic Shield and " + actSpellPrayName + " spells.");    
    addToWS(Magic_Abi1, "magic", theTabExt);
    
    if (actKeys.includes("WIZARD") === false) { actKeys = actKeys + ", WIZARD" };
  } else {
    if (actKeys.includes("WIZARD") === true) { actKeys = actKeys.replace(", WIZARD", ""); };
  };
  document.getElementById("orgKeys0" + currentTab).innerHTML = actKeys;
  addToWS(theNameExt, wsPartExt, theTabExt, checkIdExt);
  document.getElementById("validateStep" + currentTab).innerHTML = "validated";
};

// reset checkboxes to uncheck & reset archetype names ------------------------------
function resetCheckStep4() {
  var cBoxes = document.getElementById("archetypeForm").getElementsByTagName("input")
  for (i = 0; i < cBoxes.length; i++) {
    if (cBoxes[i].type == 'radio') {
      cBoxes[i].checked = false;
      cBoxes[i].disabled = false;
    }
  };
  document.getElementById("validateStep" + currentTab).innerHTML = "not valid";
  resetDescrName("archetypeForm");
  resetRestrictionsStep4();
};

// check & reset restrictions ------------------------------
function resetRestrictionsStep4() {
  var str = document.getElementById("heroKeys").innerHTML
  if (str.includes("DEATHMAGE") === true 
  || str.includes("MASTERCLAN") === true) {
    document.getElementById("arc_01").disabled = true;
    document.getElementById("arc_02").disabled = true;
  };
  if (str.includes("DAEMON") === true 
  || str.includes("DEATHMAGE") === true 
  || str.includes("SAURUS") === true 
  || str.includes("MASTERCLAN") === true 
  || str.includes("CLANS VERMINUS") === true 
  || str.includes("CALNS SKRYRE") === true 
  || str.includes("CLANS MOULDER") === true 
  || str.includes("CLANS ESHIN") === true) {
    document.getElementById("arc_03").disabled = true;
    document.getElementById("arc_04").disabled = true;
  };
  if (str.includes("DUARDIN") === true 
  || str.includes("KHORNE") === true 
  || str.includes("SAURUS") === true) {
    document.getElementById("arc_05").disabled = true;
    document.getElementById("arc_06").disabled = true;
    document.getElementById("arc_07").disabled = true;
    document.getElementById("arc_08").disabled = true;
  };  
};
// --- end of scripts on step 4 ------------------------------

//   ||||||   ||||||||  ||||||||  |||||||       ||||||||
//  ||    ||     ||     ||        ||    ||      ||
//  ||           ||     ||        ||    ||      ||
//   ||||||      ||     ||||||    |||||||   ||   ||||||
//        ||     ||     ||        ||                  ||
//  ||    ||     ||     ||        ||        ||  ||    ||
//   ||||||      ||     ||||||||  ||             ||||||

// --- scripts on step 5 ------------------------------
// add beastial companion to warscroll ------------------------------
function beastAddToWS(theNameExt, wsPartExt, theTabExt, checkIdExt) {
  charK = document.getElementById("orgKeys0" + currentTab);
  actKeys = charK.innerHTML;
  document.getElementById("rewriteBeasts").innerHTML = "";
  //actBeastName = document.getElementById("r1_" + checkIdExt + "c1").innerHTML
  //if (currentTab == 5) { remStepFromWS() };
  remStepFromWS();
  resetCheckStep5_2();
  resetStepWeaponStats("orgBeastTable");
  
  if (typeof checkIdExt !== "undefined" && theNameExt.innerHTML != "x") {
    for (s = 0; s <= 3; s++) {
      if (s === 1) { continue; }
      var subCheckId = checkIdExt.substr(0, (checkIdExt.length - 1)) + s;
      var nameCheck = document.getElementById("r1_" + subCheckId + "c1").innerHTML;
      var nameOrg = document.getElementById("r1_" + subCheckId + "c9hi").innerHTML;
      var n = nameCheck.search("<button");
      if (n != -1) { document.getElementById("r1_" + subCheckId + "c1").innerHTML = nameOrg };
    };
  };
  
  document.getElementById("dmgTable99").innerHTML = "";
  resetBeaDisplay();
  showBeaDisplay();
  
  var move = 0, wounds = 0, DPs = 0
  if (document.getElementById("noB_01").checked == true) { 
    move = 0;
    wounds = 0;
    DPs = 0;
    //document.getElementById("rewriteBeasts").innerHTML = "none chosen"
    document.getElementById("showBeaAbis").style.display = "none";
  } else {
    DPs = document.getElementById("r1_" + checkIdExt + "c8").innerHTML;
    document.getElementById("showBeaAbis").style.display = "block";
  };
  
  if (document.getElementById("miB_01").checked == true) { 
    wounds = 1;
    //document.getElementById("rewriteBeasts").innerHTML = "";
    var clone = Minor_Beast.cloneNode(true);
    clone.id = Minor_Beast.id + "1";
    document.getElementById("rewriteBeasts").appendChild(clone);
    actBeaName = document.getElementById("r1_" + checkIdExt.substr(0, 5) + "0c1").innerHTML;
    if (actBeaName != "[double-click here to name your beast]") {
      document.getElementById("Minor_Beast1").innerHTML = document.getElementById("Minor_Beast1").innerHTML.replace("Minor Beast", actBeaName);
    } else { actBeaName = "Minor Beast" };
    actClaName = document.getElementById("r1_" + checkIdExt.substr(0, 5) + "2c1").innerHTML;
    actMawName = document.getElementById("r1_" + checkIdExt.substr(0, 5) + "3c1").innerHTML;
    document.getElementById("Minor_Beast1").innerHTML = document.getElementById("Minor_Beast1").innerHTML.replace("Claws and Maw.", actClaName + " and " + actMawName + ".");
    addToWS(Minor_Beast1, "description", theTabExt);
  };
  
  if (document.getElementById("moB_01").checked == true) { 
    wounds = 2;
    var actMove = 0;
    for (m = 1; m < currentTab; m++) { 
      actMove = parseInt(actMove) + parseInt(document.getElementById("orgMove0" + m).innerHTML);
    };
    if (actMove < 8) { move = 8 - parseInt(actMove) };  
    //document.getElementById("rewriteBeasts").innerHTML = "";
    var clone = Mounted_Beast.cloneNode(true);
    clone.id = Mounted_Beast.id + "1";
    document.getElementById("rewriteBeasts").appendChild(clone);
    actBeaName = document.getElementById("r1_" + checkIdExt.substr(0, 5) + "0c1").innerHTML;
    if (actBeaName != "[double-click here to name your beast]") {
      document.getElementById("Mounted_Beast1").innerHTML = document.getElementById("Mounted_Beast1").innerHTML.replace("Mounted Beast", actBeaName);
    } else { actBeaName = "Mounted Beast" };
    actClaName = document.getElementById("r1_" + checkIdExt.substr(0, 5) + "2c1").innerHTML;
    actMawName = document.getElementById("r1_" + checkIdExt.substr(0, 5) + "3c1").innerHTML;
    document.getElementById("Mounted_Beast1").innerHTML = document.getElementById("Mounted_Beast1").innerHTML.replace("Claws and Maw.", actClaName + " and " + actMawName + ".");
    str = document.getElementById("heroKeys").innerHTML
    if (actKeys.includes("LIEGE-KAVALOS") === false 
    && str.includes("LIEGE") === true) { actKeys = actKeys + ", LIEGE-KAVALOS" };
    addToWS(Mounted_Beast1, "description", theTabExt);
  } else {
    if (actKeys.includes("MONSTER") === true) { actKeys = actKeys.replace(", LIEGE-KAVALOS", ""); };
  };
  
  if (document.getElementById("gaB_01").checked == true) { 
    wounds = 8;
    var blackstar = document.createElement("IMG");
    blackstar.setAttribute("src", "https://i.ibb.co/gPzxHNR/Ao-S-WS-blackstar.png");
    blackstar.setAttribute("alt", "WarhammerAoS");
    blackstar.setAttribute("style", "display:block; margin: auto auto -5px;");
    //document.getElementById("move").innerHTML = ""
    //document.getElementById("move").appendChild(blackstar);
    //<img src=https://i.ibb.co/gPzxHNR/Ao-S-WS-blackstar.png alt="WarhammerAoS" style="display:block; margin: auto auto -5px;";>
    //document.getElementById("rewriteBeasts").innerHTML = "";
    var clone = Gargantuan_Beast.cloneNode(true);
    clone.id = Gargantuan_Beast.id + "1";
    document.getElementById("rewriteBeasts").appendChild(clone);
    actBeaName = document.getElementById("r1_" + checkIdExt.substr(0, 5) + "0c1").innerHTML;
    if (actBeaName != "[double-click here to name your beast]") {
      document.getElementById("Gargantuan_Beast1").innerHTML = document.getElementById("Gargantuan_Beast1").innerHTML.replace("Gargantuan Beast", actBeaName);
    } else { actBeaName = "Gargantuan Beast" };
    actClaName = document.getElementById("r1_" + checkIdExt.substr(0, 5) + "2c1").innerHTML;
    actMawName = document.getElementById("r1_" + checkIdExt.substr(0, 5) + "3c1").innerHTML;
    document.getElementById("Gargantuan_Beast1").innerHTML = document.getElementById("Gargantuan_Beast1").innerHTML.replace("Claws and Maw.", actClaName + " and " + actMawName + ".");
    addToWS(Gargantuan_Beast1, "description", theTabExt);
    
    dmgTable = document.getElementById("GarBeast_DmgTable").getElementsByTagName("th")
    dmgTable[3].innerHTML = actClaName;
    dmgTable[4].innerHTML = actMawName;

    if (actKeys.includes("MONSTER") === false) { actKeys = actKeys + ", MONSTER" };
    addToWS(GarBeast_DmgTable, "damageTable", currentTab);
  } else {
    document.getElementById("move").innerHTML = "";
    dmgTable = document.getElementById("GarBeast_DmgTable").getElementsByTagName("th");
    dmgTable[3].innerHTML = "Claws";
    dmgTable[4].innerHTML = "Maw";

    if (actKeys.includes("MONSTER") === true) { 
      actKeys = actKeys.replace(", MONSTER", "");
      //remFromWS(GarBeast_DmgTable, "damageTable");
    };
  };
  document.getElementById("orgKeys0" + currentTab).innerHTML = actKeys;
  
  // overwrite actual values
  var moveCell = document.getElementById("orgMove0" + currentTab);
  var woundCell = document.getElementById("orgWoun0" + currentTab);
  var pointCell = document.getElementById("orgPts0" + currentTab);
  if (document.getElementById("gaB_01").checked == true) { moveCell.innerHTML =  ""; moveCell.appendChild(blackstar); } 
  else { moveCell.innerHTML = parseInt(move); };  
  woundCell.innerHTML = parseInt(wounds);
  pointCell.innerHTML = parseInt(DPs);
  
  //addToWS(theNameExt, wsPartExt, theTabExt, checkIdExt);
  displayAllSteps();        // remove if addToWS() is active
  document.getElementById("validateStep" + currentTab).innerHTML = "validated";
};

// add beasts characteristic enhancements ------------------------------
function addBeastEnh(checkId) {
  var checkBox = document.getElementById(checkId);  // Get the checkbox  
  if (checkId.endsWith("b") || checkId.endsWith("c")) {
    checkId = checkId.substr(0, checkId.length - 1)
  };
  
  var enhancement = document.getElementById("r1_" + checkId + "c1").innerHTML
  var pointCell = document.getElementById("orgPts0" + currentTab);
  var DPs = document.getElementById("r1_" + checkId + "c8").innerHTML;
  
  var addValue = 0
  var addTimes = 1
  var saveBreak = false
  
  // find weapon stats
  findWeaponStats("orgBeastTable");  
  var wea01nam = wea01nam0, wea01rng = wea01rng0, wea01att = wea01att0, wea01hit = wea01hit0, wea01wnd = wea01wnd0, wea01rnd = wea01rnd0, wea01dmg = wea01dmg0
  var wea02nam = wea02nam0, wea02rng = wea02rng0, wea02att = wea02att0, wea02hit = wea02hit0, wea02wnd = wea02wnd0, wea02rnd = wea02rnd0, wea02dmg = wea02dmg0
  
  if (checkBox.id.endsWith("b")) { addCount = document.getElementById(checkId + "c"); }
  else { addCount = document.getElementById(checkId + "a"); };
  
  if (addCount != null) {
    if (addCount.value > 3) { addCount.value = 3 };
    if (addCount.value <= 0) { addCount.value = 1 };
    addTimes = addCount.value;
  };
  bStar = false;
  
  switch (enhancement) {
    case "Savage Frenzy":    // attacks
      statCol = 2;
      if (checkBox.id.endsWith("b")) { 
        actWeaName = wea02nam;
        actStat = wea02att.search("http")       // check if blackstar
        if (actStat != -1) { bStar = true; };   // if blackstar then bStar=true and get dmgTable
        oldStat = parseInt(wea02att);
        newStat = parseInt(wea02att) + parseInt(addTimes); } 
      else { 
        actWeaName = wea01nam;
        actStat = wea01att.search("http")       // check if blackstar
        if (actStat != -1) { bStar = true; };   // if blackstar then bStar=true and get dmgTable
        oldStat = parseInt(wea01att);
        newStat = parseInt(wea01att) + parseInt(addTimes); };
      
      if (bStar == true && checkBox.checked == true) { changeDmgTable(actWeaName, addTimes, "add"); } 
      else if (bStar == true && checkBox.checked == false) { changeDmgTable(actWeaName, addTimes, "rem"); } 
      else { 
        if (checkBox.checked == true) { usedStat = newStat; } 
        else { usedStat = oldStat; };
        changeWeaStatPrev(actWeaName, usedStat, statCol);
      };
      break;
      
    case "Savage Ferocity":  // to hit
      statCol = 3;
      if (checkBox.id.endsWith("b")) { 
        actWeaName = wea02nam;
        actStat = wea02hit.search("http")       // check if blackstar
        if (actStat != -1) { bStar = true; };   // if blackstar then bStar=true and get dmgTable
        oldStat = parseInt(wea02hit);
        newStat = parseInt(wea02hit) - parseInt(addTimes); } 
      else { 
        actWeaName = wea01nam;
        actStat = wea01hit.search("http")       // check if blackstar
        if (actStat != -1) { bStar = true; };   // if blackstar then bStar=true and get dmgTable
        oldStat = parseInt(wea01hit);
        newStat = parseInt(wea01hit) - parseInt(addTimes); };
      
      if (bStar == true && checkBox.checked == true) { changeDmgTable(actWeaName, addTimes, "add"); } 
      else if (bStar == true && checkBox.checked == false) { changeDmgTable(actWeaName, addTimes, "rem"); } 
      else {
        if (newStat > 0) {  // restrict to 1+
          if (checkBox.checked == true) { usedStat = newStat; } 
          else { usedStat = oldStat; };
          changeWeaStatPrev(actWeaName, usedStat + "+", statCol) }
        else {
          checkBox.checked = false;
          saveBreak = true; };
      };
      break;
      
    case "Savage Strength":  // to wound
      statCol = 4;
      if (checkBox.id.endsWith("b")) { 
        actWeaName = wea02nam;
        actStat = wea02wnd.search("http")       // check if blackstar
        if (actStat != -1) { bStar = true; };   // if blackstar then bStar=true and get dmgTable
        oldStat = parseInt(wea02wnd);
        newStat = parseInt(wea02wnd) - parseInt(addTimes); } 
      else { 
        actWeaName = wea01nam;
        actStat = wea01wnd.search("http")       // check if blackstar
        if (actStat != -1) { bStar = true; };   // if blackstar then bStar=true and get dmgTable
        oldStat = parseInt(wea01wnd);
        newStat = parseInt(wea01wnd) - parseInt(addTimes); };
      
      if (bStar == true && checkBox.checked == true) { changeDmgTable(actWeaName, addTimes, "add"); } 
      else if (bStar == true && checkBox.checked == false) { changeDmgTable(actWeaName, addTimes, "rem"); } 
      else {
        if (newStat > 0) {  // restrict to 1+
          if (checkBox.checked == true) { usedStat = newStat; } 
          else { usedStat = oldStat; };
          changeWeaStatPrev(actWeaName, usedStat + "+", statCol) }
        else {
          checkBox.checked = false;
          saveBreak = true; };
      };
      break;
      
    case "Razor-sharp Claws":  // rend
      statCol = 5;
      if (checkBox.id.endsWith("b")) { 
        actWeaName = wea02nam;
        actStat = wea02rnd.search("http")       // check if blackstar
        if (actStat != -1) { bStar = true; };   // if blackstar then bStar=true and get dmgTable
        oldStat = parseInt(wea02rnd);
        newStat = parseInt(wea02rnd) + parseInt(addTimes); } 
      else { 
        actWeaName = wea01nam;
        actStat = wea01rnd.search("http")       // check if blackstar
        if (actStat != -1) { bStar = true; };   // if blackstar then bStar=true and get dmgTable
        oldStat = parseInt(wea01rnd);
        newStat = parseInt(wea01rnd) + parseInt(addTimes); };
      
      if (bStar == true && checkBox.checked == true) { changeDmgTable(actWeaName, addTimes, "add"); } 
      else if (bStar == true && checkBox.checked == false) { changeDmgTable(actWeaName, addTimes, "rem"); } 
      else {
        if (newStat <= 3) {  // restrict to -3
          if (checkBox.checked == true) { usedStat = "-" + newStat; } 
          else if (oldStat == 0) { usedStat = "-" } 
          else { usedStat = "-" + oldStat; };
          changeWeaStatPrev(actWeaName, usedStat, statCol) } 
        else {
          checkBox.checked = false;
          saveBreak = true; };
      };
      break;
      
    default:  // empty
  };  // end switch

  // if the checkbox is checked, add destiny points
  addDP = parseInt(DPs) * addTimes;
  if (checkBox.checked == true) {
    pointCell.innerHTML = parseInt(pointCell.innerHTML) + parseInt(addDP);
    if (addCount != null) { addCount.disabled = true; };
  } else {
    if (saveBreak == false) { pointCell.innerHTML = parseInt(pointCell.innerHTML) - parseInt(addDP); };
    if (addCount != null) { addCount.disabled = false; };
  };
  displayAllSteps();
};

// reset/hide displayed weaponTable ------------------------------
function resetBeaDisplay() {
  var wTable = document.getElementById("meleeWeaBeastTable")
  var rows = wTable.getElementsByTagName("tr").length
  var wTablePre = document.getElementById("meleeWeaTablePre")
  var rowsPre = wTablePre.getElementsByTagName("tr").length

  var bea01 = "", bea02 = ""
  do {
    if (rows > 1) { 
      if (bea01 == "") { bea01 = wTable.rows[1].cells[0].innerHTML }
      else if (bea02 == "") { bea02 = wTable.rows[1].cells[0].innerHTML };
      wTable.deleteRow(1);
    };
    rows = wTable.getElementsByTagName("tr").length;
  }
  while (rows > 1);
  
  rowsPre = wTablePre.getElementsByTagName("tr").length;
  for (r = 1; r < rowsPre; r++) {
    if (wTablePre.rows[r].cells[0].innerHTML == bea01 
    || wTablePre.rows[r].cells[0].innerHTML == bea02) { 
      wTablePre.deleteRow(r);
      r = r - 1;
    };
    rowsPre = wTablePre.getElementsByTagName("tr").length;
  };
  
  document.getElementById("showBeaAbis").style.display = "none";
  
  document.getElementById("meleeBeastTable").style.display = "none";
  if (rowsPre > 1) { document.getElementById("meleeTablePre").style.display = "block"; }
  else { document.getElementById("meleeTablePre").style.display = "none"; };
};

// display weaponTable ------------------------------
function showBeaDisplay() {
  var beWs = ["miB_01", "moB_01", "gaB_01"]
  for (i = 0; i < beWs.length; i++) {
    var checkBox = document.getElementById(beWs[i]);
    if (checkBox.checked == true) {
      var tableBea = document.getElementById("meleeWeaBeastTable");
      var tablePre = document.getElementById("meleeWeaTablePre");
      var actRows = 0
      
      for (b = 2; b <= 3; b++) {
        actRows = tablePre.getElementsByTagName("tr").length;
        var rowBea = tableBea.insertRow(b - 1);
        var rowPre = tablePre.insertRow(actRows);
        
        for (n = 1; n < 8; n++) {
          cellId = "r1_" + checkBox.id.substr(0, 5) + b + "c" + n;
          cellTxt = document.getElementById(cellId).innerHTML;
          rowBea.insertCell(n - 1).innerHTML = cellTxt;
          rowPre.insertCell(n - 1).innerHTML = cellTxt;
        };
      };
      document.getElementById("meleeBeastTable").style.display = "block";
      document.getElementById("meleeTablePre").style.display = "block";
    };
  };
};

// show/hide beastial companion enhancements & abilities ------------------------------
function showBeastAbis(thisId) {
  actText = document.getElementById(thisId);
  
  if (actText.innerHTML == "SHOW BEASTIAL COMPANION ENHANCEMENTS AND ABILITIES") {
    actText.innerHTML = "BACK TO BESTIAL COMPANIONS";
    //actText.setAttribute("style", "width: 320px;");
    //document.getElementById("resetBeastEnhAbis").style.display = "inline";
    document.getElementById("beastialCompanions1").style.display = "none";
    document.getElementById("beastialCompanions2").style.display = "block";
  } else {
    actText.innerHTML = "SHOW BEASTIAL COMPANION ENHANCEMENTS AND ABILITIES";
    //actText.setAttribute("style", "width: 500px;");
    //document.getElementById("resetBeastEnhAbis").style.display = "none";
    document.getElementById("beastialCompanions1").style.display = "block";
    document.getElementById("beastialCompanions2").style.display = "none";
  };
};

// reset checkboxes to uncheck beasts & reset claws'n'maw names ------------------------------
function resetCheckStep5() {
  var cBoxes = document.getElementById("beastsForm").getElementsByTagName("input")
  for (i = 0; i < cBoxes.length; i++) {
    if (cBoxes[i].type == 'radio') {
      cBoxes[i].checked = false;
      cBoxes[i].disabled = false;
    };
  };
  resetDescrName("beastsForm");

  dmgTable = document.getElementById("GarBeast_DmgTable").getElementsByTagName("th")
  dmgTable[3].innerHTML = "Claws";
  dmgTable[4].innerHTML = "Maw";
  //document.getElementById("move").innerHTML = "";
  document.getElementById("validateStep" + currentTab).innerHTML = "not valid";
  
  document.getElementById("beastEnhAbis").innerHTML = "SHOW BEASTIAL COMPANION ENHANCEMENTS AND ABILITIES";
  document.getElementById("beastEnhAbis").setAttribute("style", "width: 500px;");
  //document.getElementById("resetBeastEnhAbis").style.display = "none";
  document.getElementById("showBeaAbis").style.display = "none";
  document.getElementById("beastialCompanions1").style.display = "block";
  document.getElementById("beastialCompanions2").style.display = "none";
  document.getElementById("dmgTable99").innerHTML = "";
  
  resetBeaDisplay();
  resetCheckStep5_2();
  resetRestrictionsStep5();
};

// reset checkboxes to uncheck beasts enhancements & abis ------------------------------
function resetCheckStep5_2() {
  var cBoxes = document.getElementById("beastsAbiForm").getElementsByTagName("input")
  for (i = 0; i < cBoxes.length; i++) {
    if (cBoxes[i].type == 'checkbox' || cBoxes[i].type == 'number') {
      cBoxes[i].checked = false;
      cBoxes[i].disabled = false;
      if (cBoxes[i].type == 'number') { cBoxes[i].value = 1; };
    };
  };
  resetDescrName("beastsAbiForm");
  // set restrictions to beasts
  if (document.getElementById("gaB_01").checked != true) {
    document.getElementById("bea_06").disabled = true;
    document.getElementById("bea_09").disabled = true;
    document.getElementById("bea_10").disabled = true;
    document.getElementById("bea_11").disabled = true;
    document.getElementById("bea_12").disabled = true;
  };
  if (document.getElementById("miB_01").checked == true) {
    document.getElementById("bea_05").disabled = true;
  };
  // check if "FLY" is already shown
  var idCount = document.querySelectorAll('.warscroll [id*=Clone]').length;
  if (idCount > 0) {
    for (c = 0; c < idCount; c++) {
      idCloneName = document.querySelectorAll('.warscroll [id*=Clone]')[c].id;
      if (idCloneName.includes("Fly") === true) {
        document.getElementById("bea_05").disabled = true;
      };
    };
  };
};

// check & reset restrictions ------------------------------
function resetRestrictionsStep5() {
  var str = document.getElementById("heroKeys").innerHTML
  if (str.includes("BULLGOR") === true || str.includes("DRAGON OGOR") === true) {
    document.getElementById("moB_01").disabled = true;
    document.getElementById("gaB_01").disabled = true;
  };
};
// --- end of scripts on step 5 ------------------------------

//   ||||||   ||||||||  ||||||||  |||||||        ||||||
//  ||    ||     ||     ||        ||    ||      ||    ||
//  ||           ||     ||        ||    ||      ||
//   ||||||      ||     ||||||    |||||||   ||  |||||||
//        ||     ||     ||        ||            ||    ||
//  ||    ||     ||     ||        ||        ||  ||    ||
//   ||||||      ||     ||||||||  ||             ||||||

// --- scripts on step 6 ------------------------------
// add characteristic enhancements ------------------------------
function addCharEnh(checkId) {
  var checkBox = document.getElementById(checkId);  // Get the checkbox  
  if (checkId.endsWith("b") || checkId.endsWith("c")) {
    checkId = checkId.substr(0, checkId.length - 1)
  };
  
  var enhancement = document.getElementById("r1_" + checkId + "c1").innerHTML
  var pointCell = document.getElementById("orgPts0" + currentTab);
  var DPs = document.getElementById("r1_" + checkId + "c8").innerHTML;
  
  var addValue = 0
  var addTimes = 1
  var saveBreak = false
  
  // find weapon stats
  findWeaponStats("orgWeaponTable");  
  var wea01nam = wea01nam0, wea01rng = wea01rng0, wea01att = wea01att0, wea01hit = wea01hit0, wea01wnd = wea01wnd0, wea01rnd = wea01rnd0, wea01dmg = wea01dmg0
  var wea02nam = wea02nam0, wea02rng = wea02rng0, wea02att = wea02att0, wea02hit = wea02hit0, wea02wnd = wea02wnd0, wea02rnd = wea02rnd0, wea02dmg = wea02dmg0
  
  if (checkBox.id.endsWith("b")) { addCount = document.getElementById(checkId + "c"); }
  else { addCount = document.getElementById(checkId + "a"); };
  
  if (addCount != null) {
    if (addCount.value > 3) { addCount.value = 3 };
    if (addCount.value <= 0) { addCount.value = 1 };
    addTimes = addCount.value
  };
  bStar = false;
  
  switch (enhancement) {
    case "Unnatural Speed":   // move
      move = document.getElementById("orgMove0" + currentTab)
      if (checkBox.checked == true) { addValue = parseInt(move.innerHTML) + parseInt(addTimes); } 
      else { addValue = parseInt(move.innerHTML) - parseInt(addTimes); };
      move.innerHTML = addValue;
      
      actStat = document.getElementById("move").innerHTML.search("http")       // check if blackstar
      if (actStat != -1) { bStar = true; };   // if blackstar then bStar=true and get dmgTable
      actWeaName = "Move"
      if (bStar == true && checkBox.checked == true) { changeDmgTable(actWeaName, addTimes, "add"); } 
      else if (bStar == true && checkBox.checked == false) { changeDmgTable(actWeaName, addTimes, "rem"); };
      break;
      
    case "Dark Fortitude":   // wounds
      woun = document.getElementById("orgWoun0" + currentTab)
      if (checkBox.checked == true) { addValue = parseInt(woun.innerHTML) + parseInt(addTimes); } 
      else { addValue = parseInt(woun.innerHTML) - parseInt(addTimes); };
      woun.innerHTML = addValue;
      
      actStat = document.getElementById("woun").innerHTML.search("http")       // check if blackstar
      if (actStat != -1) { bStar = true; };   // if blackstar then bStar=true and get dmgTable
      actWeaName = "Wounds"
      if (bStar == true && checkBox.checked == true) { changeDmgTable(actWeaName, addTimes, "add"); } 
      else if (bStar == true && checkBox.checked == false) { changeDmgTable(actWeaName, addTimes, "rem"); };
      break;
      
    case "Superior Leadership":   // bravery
      brav = document.getElementById("orgBrav0" + currentTab)
      if (checkBox.checked == true) { addValue = parseInt(brav.innerHTML) + parseInt(addTimes); } 
      else { addValue = parseInt(brav.innerHTML) - parseInt(addTimes); };
      brav.innerHTML = addValue;
      
      actStat = document.getElementById("brav").innerHTML.search("http")       // check if blackstar
      if (actStat != -1) { bStar = true; };   // if blackstar then bStar=true and get dmgTable
      actWeaName = "Bravery"
      if (bStar == true && checkBox.checked == true) { changeDmgTable(actWeaName, addTimes, "add"); } 
      else if (bStar == true && checkBox.checked == false) { changeDmgTable(actWeaName, addTimes, "rem"); };
      break;
      
    case "Extra Armour":   // save
      save = document.getElementById("orgSave0" + currentTab)
      saveAll = ["orgSave02", "orgSave03", "orgSave04", "orgSave05", "orgSave06"]
      numTextN = 0;
      for (i = 0; i < saveAll.length; i++) {
        if (i == 0) {
          if (parseInt(document.getElementById(saveAll[i]).innerHTML) == 0) { numTextN = 7; }
          else { numTextN = parseInt(document.getElementById(saveAll[i]).innerHTML); };
        } else {
          numTextN = numTextN - parseInt(document.getElementById(saveAll[i]).innerHTML);
        };
      };
      addSave = addTimes
      numTextN = numTextN - addSave
      
      actStat = document.getElementById("save").innerHTML.search("http")       // check if blackstar
      if (actStat != -1) { bStar = true; };   // if blackstar then bStar=true and get dmgTable
      actWeaName = "Save"
      if (bStar == true && checkBox.checked == true) { changeDmgTable(actWeaName, addTimes, "add"); } 
      else if (bStar == true && checkBox.checked == false) { changeDmgTable(actWeaName, addTimes, "rem"); }
      else {
        if (checkBox.checked == true) {
          if (numTextN >= 3) { addValue = parseInt(save.innerHTML) + parseInt(addTimes); }
          else {
            checkBox.checked = false;
            saveBreak = true;
          };
        } else { addValue = parseInt(save.innerHTML) - parseInt(addTimes); };
        save.innerHTML = addValue;
      };
      break;
      
    case "Battle Standard Bearer":
      if (checkBox.checked == true) { addKey = document.getElementById("orgKeys0" + currentTab).innerHTML + ", TOTEM"; } 
      else { addKey = document.getElementById("orgKeys0" + currentTab).innerHTML.replace(", TOTEM", ""); };
      document.getElementById("orgKeys0" + currentTab).innerHTML = addKey;
      break;
      
    case "Ferocity":    // attacks
      statCol = 2;
      if (checkBox.id.endsWith("b")) { 
        actWeaName = wea02nam;
        actStat = wea02att.search("http")       // check if blackstar
        if (actStat != -1) { bStar = true; };   // if blackstar then bStar=true and get dmgTable
        oldStat = parseInt(wea02att);
        newStat = parseInt(wea02att) + parseInt(addTimes); } 
      else { 
        actWeaName = wea01nam;
        actStat = wea01att.search("http")       // check if blackstar
        if (actStat != -1) { bStar = true; };   // if blackstar then bStar=true and get dmgTable
        oldStat = parseInt(wea01att);
        newStat = parseInt(wea01att) + parseInt(addTimes); };
      
      if (bStar == true && checkBox.checked == true) { changeDmgTable(actWeaName, addTimes, "add"); } 
      else if (bStar == true && checkBox.checked == false) { changeDmgTable(actWeaName, addTimes, "rem"); } 
      else { 
        if (checkBox.checked == true) { usedStat = newStat; } 
        else { usedStat = oldStat; };
        changeWeaStatPrev(actWeaName, usedStat, statCol);
      };
      break;
      
    case "Weapon Master":  // to hit
      statCol = 3;
      if (checkBox.id.endsWith("b")) { 
        actWeaName = wea02nam;
        actStat = wea02hit.search("http")       // check if blackstar
        if (actStat != -1) { bStar = true; };   // if blackstar then bStar=true and get dmgTable
        oldStat = parseInt(wea02hit);
        newStat = parseInt(wea02hit) - parseInt(addTimes); } 
      else { 
        actWeaName = wea01nam;
        actStat = wea01hit.search("http")       // check if blackstar
        if (actStat != -1) { bStar = true; };   // if blackstar then bStar=true and get dmgTable
        oldStat = parseInt(wea01hit);
        newStat = parseInt(wea01hit) - parseInt(addTimes); };
      
      if (bStar == true && checkBox.checked == true) { changeDmgTable(actWeaName, addTimes, "add"); } 
      else if (bStar == true && checkBox.checked == false) { changeDmgTable(actWeaName, addTimes, "rem"); } 
      else {
        if (newStat > 0) {  // restrict to 1+
          if (checkBox.checked == true) { usedStat = newStat; } 
          else { usedStat = oldStat; };
          changeWeaStatPrev(actWeaName, usedStat + "+", statCol) }
        else {
          checkBox.checked = false;
          saveBreak = true; };
      };
      break;
      
    case "Unholy Strength":  // to wound
      statCol = 4;
      if (checkBox.id.endsWith("b")) { 
        actWeaName = wea02nam;
        actStat = wea02wnd.search("http")       // check if blackstar
        if (actStat != -1) { bStar = true; };   // if blackstar then bStar=true and get dmgTable
        oldStat = parseInt(wea02wnd);
        newStat = parseInt(wea02wnd) - parseInt(addTimes); } 
      else { 
        actWeaName = wea01nam;
        actStat = wea01wnd.search("http")       // check if blackstar
        if (actStat != -1) { bStar = true; };   // if blackstar then bStar=true and get dmgTable
        oldStat = parseInt(wea01wnd);
        newStat = parseInt(wea01wnd) - parseInt(addTimes); };
      
      if (bStar == true && checkBox.checked == true) { changeDmgTable(actWeaName, addTimes, "add"); } 
      else if (bStar == true && checkBox.checked == false) { changeDmgTable(actWeaName, addTimes, "rem"); } 
      else {
        if (newStat > 0) {  // restrict to 1+
          if (checkBox.checked == true) { usedStat = newStat; } 
          else { usedStat = oldStat; };
          changeWeaStatPrev(actWeaName, usedStat + "+", statCol) }
        else {
          checkBox.checked = false;
          saveBreak = true; };
      };
      break;
      
    case "Honed Edge":  // rend
      statCol = 5;
      if (checkBox.id.endsWith("b")) { 
        actWeaName = wea02nam;
        actStat = wea02rnd.search("http")       // check if blackstar
        if (actStat != -1) { bStar = true; };   // if blackstar then bStar=true and get dmgTable
        oldStat = parseInt(wea02rnd);
        newStat = parseInt(wea02rnd) + parseInt(addTimes); } 
      else { 
        actWeaName = wea01nam;
        actStat = wea01rnd.search("http")       // check if blackstar
        if (actStat != -1) { bStar = true; };   // if blackstar then bStar=true and get dmgTable
        oldStat = parseInt(wea01rnd);
        newStat = parseInt(wea01rnd) + parseInt(addTimes); };
      
      if (bStar == true && checkBox.checked == true) { changeDmgTable(actWeaName, addTimes, "add"); } 
      else if (bStar == true && checkBox.checked == false) { changeDmgTable(actWeaName, addTimes, "rem"); } 
      else {
        if (newStat <= 3) {  // restrict to -3
          if (checkBox.checked == true) { usedStat = "-" + newStat; } 
          else if (oldStat == 0) { usedStat = "-" } 
          else { usedStat = "-" + oldStat; };
          changeWeaStatPrev(actWeaName, usedStat, statCol) } 
        else {
          checkBox.checked = false;
          saveBreak = true; };
      };
      break;
      
    case "Mighty Weapon":  // damage
      statCol = 6;
      if (checkBox.id.endsWith("b")) { 
        if (wea02dmg == "D3") { 
          checkBox.checked = false;
          saveBreak = true;
          break; 
      };
        actWeaName = wea02nam;
        actStat = wea02dmg.search("http")       // check if blackstar
        if (actStat != -1) { bStar = true; };   // if blackstar then bStar=true and get dmgTable
        oldStat = parseInt(wea02dmg);
        newStat = parseInt(wea02dmg) + parseInt(addTimes); } 
      else { 
        if (wea01dmg == "D3") { 
          checkBox.checked = false;
          saveBreak = true;
          break; 
      };
        actWeaName = wea01nam;
        actStat = wea01dmg.search("http")       // check if blackstar
        if (actStat != -1) { bStar = true; };   // if blackstar then bStar=true and get dmgTable
        oldStat = parseInt(wea01dmg);
        newStat = parseInt(wea01dmg) + parseInt(addTimes); };
        
      if (bStar == true && checkBox.checked == true) { changeDmgTable(actWeaName, addTimes, "add"); } 
      else if (bStar == true && checkBox.checked == false) { changeDmgTable(actWeaName, addTimes, "rem"); } 
      else { 
        if (checkBox.checked == true) { usedStat = newStat; } 
        else { usedStat = oldStat; };
        changeWeaStatPrev(actWeaName, usedStat, statCol);
      };
      break;
      
    case "Master of Dark Magic":  // increase or decrease number of spells
      var actMagic = document.getElementById("magic");
      var actMaTxt = actMagic.innerHTML;
      if (actMaTxt.includes("attempt to cast 1") === true) {
        actMaTxt = actMaTxt.replace("attempt to cast 1", "attempt to cast 2");
        actMaTxt = actMaTxt.replace("attempt to unbind 1", "attempt to unbind 2");
		actMagic.innerHTML = actMaTxt;
      } 
      else if (actMaTxt.includes("attempt to cast 2") === true) { 
        actMaTxt = actMaTxt.replace("attempt to cast 2", "attempt to cast 1");
        actMaTxt = actMaTxt.replace("attempt to unbind 2", "attempt to unbind 1");
		actMagic.innerHTML = actMaTxt;
      };
      break;
      
    default:  
  };  // end switch

  // if the checkbox is checked, add destiny points
  addDP = parseInt(DPs) * addTimes;
  if (checkBox.checked == true) {
    pointCell.innerHTML = parseInt(pointCell.innerHTML) + parseInt(addDP);
    if (addCount != null) { addCount.disabled = true; };
  } else {
    if (saveBreak == false) { pointCell.innerHTML = parseInt(pointCell.innerHTML) - parseInt(addDP); };
    if (addCount != null) { addCount.disabled = false; };
  };
  displayAllSteps();
};

// add beastial companion to warscroll ------------------------------
function spiritAddToWS(theNameExt, wsPartExt, theTabExt, checkIdExt) {
  var checkBox = document.getElementById(checkIdExt);  // Get the checkbox
  var pointCell = document.getElementById("orgPts0" + currentTab);
  var DPs = document.getElementById("r1_" + checkIdExt + "c8").innerHTML;
  
  var addValue = 0
  var addTimes = 1
  
  addCount = document.getElementById(checkIdExt + "a");
  
  if (addCount != null) {
    if (addCount.value > 3) { addCount.value = 3 };
    if (addCount.value <= 0) { addCount.value = 1 };
    addTimes = addCount.value
  };
  
  resetSpiritDisplay();
  showSpiritDisplay();
  
  if (document.getElementById("spH_01").checked == true) { 
    addToWS(COMPANION, 'description', theTabExt);
    addToWS(Frightful_Touch, 'abilities', theTabExt); } 
  else if (document.getElementById("spH_01").checked == false) { 
    remFromWS(COMPANION, 'description');
    remFromWS(Frightful_Touch, 'abilities');    
  };

  // if the checkbox is checked, add destiny points
  addDP = parseInt(DPs);
  if (checkBox.checked == true) {
    pointCell.innerHTML = parseInt(pointCell.innerHTML) + parseInt(addDP);
    if (addCount != null) { addCount.disabled = true; };
  } else {
    pointCell.innerHTML = parseInt(pointCell.innerHTML) - parseInt(addDP);
    if (addCount != null) { addCount.disabled = false; };
  };
  //addToWS(theNameExt, wsPartExt, theTabExt, checkIdExt);
  displayAllSteps();        // remove if addToWS() is active
};

// add DPs and attacks to spirit host ------------------------------
function setSpiritHost(checkId) {
  if (checkId != null) { spiritH = "No°" + document.getElementById(checkId).value }
  else { spiritH = "No°1" };
  
  switch (spiritH) {
    case "No°1":
      document.getElementById("r1_spH_02c3").innerHTML = "2";
      document.getElementById("r1_spH_01c8").innerHTML = "4";
      break;
    case "No°2":
      document.getElementById("r1_spH_02c3").innerHTML = "4";
      document.getElementById("r1_spH_01c8").innerHTML = "6";
      break;
    case "No°3":
      document.getElementById("r1_spH_02c3").innerHTML = "6";
      document.getElementById("r1_spH_01c8").innerHTML = "8";
      break;      
    default:
  };
};

// reset/hide displayed weaponTable ------------------------------
function resetSpiritDisplay() {
  var wTable = document.getElementById("meleeWeaSpiritTable")
  var rows = wTable.getElementsByTagName("tr").length
  var wTablePre = document.getElementById("meleeWeaTablePre")
  var rowsPre = wTablePre.getElementsByTagName("tr").length

  var spi01 = ""
  do {
    if (rows > 1) { 
      spi01 = wTable.rows[1].cells[0].innerHTML;
      wTable.deleteRow(1);
    };
    rows = wTable.getElementsByTagName("tr").length;
  }
  while (rows > 1);
  
  rowsPre = wTablePre.getElementsByTagName("tr").length;
  for (r = 1; r < rowsPre; r++) {
    if (wTablePre.rows[r].cells[0].innerHTML == spi01) { 
      wTablePre.deleteRow(r);
      r = r - 1;
    };
    rowsPre = wTablePre.getElementsByTagName("tr").length;
  };
  
  document.getElementById("meleeSpiritTable").style.display = "none";
  if (rowsPre > 1) { document.getElementById("meleeTablePre").style.display = "block"; }
  else { document.getElementById("meleeTablePre").style.display = "none"; };
};

// display weaponTable ------------------------------
function showSpiritDisplay() {
  var spHs = ["spH_01"]
  for (i = 0; i < spHs.length; i++) {
    var checkBox = document.getElementById(spHs[i]);
    if (checkBox.checked == true) {
      var tableSpi = document.getElementById("meleeWeaSpiritTable");
      var tablePre = document.getElementById("meleeWeaTablePre");
      var actRows = 0
      
      //for (b = 2; b <= 3; b++) {
        actRows = tablePre.getElementsByTagName("tr").length;
        var rowSpi = tableSpi.insertRow(1);
        var rowPre = tablePre.insertRow(actRows);
        
        for (n = 1; n < 8; n++) {
          cellId = "r1_" + checkBox.id.substr(0, 5) + "2c" + n;
          cellTxt = document.getElementById(cellId).innerHTML;
          rowSpi.insertCell(n - 1).innerHTML = cellTxt;
          rowPre.insertCell(n - 1).innerHTML = cellTxt;
        };
      //};
      document.getElementById("meleeSpiritTable").style.display = "block";
      document.getElementById("meleeTablePre").style.display = "block";
    };
  };
};

// change weapon stats on warscroll
function changeWeaStatPrev(actWeaName, usedStat, statCol) {
  var prevRow = document.getElementById("weaTablePreview").getElementsByTagName("tr")      
  for (i = 0; i < prevRow.length; i++) {
    if (prevRow[i].cells[0].innerHTML == actWeaName) { prevRow[i].cells[statCol].innerHTML = usedStat };
  };
};

// reset checkboxes to uncheck & reset abilites names ------------------------------
function resetCheckStep6() {
  var cBoxes = document.getElementById("abilitiesForm").getElementsByTagName("input")
  for (i = 0; i < cBoxes.length; i++) {
    if (cBoxes[i].type == 'checkbox' || cBoxes[i].type == 'number') {
      cBoxes[i].checked = false;
      cBoxes[i].disabled = false;
      if (cBoxes[i].type == 'number') { cBoxes[i].value = 1; };
    };
  };
  var cBoxes = document.getElementById("spiritHostForm").getElementsByTagName("input")
  for (i = 0; i < cBoxes.length; i++) {
    if (cBoxes[i].type == 'checkbox' || cBoxes[i].type == 'number') {
      cBoxes[i].checked = false;
      cBoxes[i].disabled = false;
      if (cBoxes[i].type == 'number') { cBoxes[i].value = 1; };
    };
  };
  resetDescrName('abilitiesForm');
  setSpiritHost();
  resetSpiritDisplay();
  resetRestrictionsStep6();
};

// check & reset restrictions ------------------------------
function resetRestrictionsStep6() {
  var str = document.getElementById("heroKeys").innerHTML
  /*if (str.includes("MALIGNANT") === true) {
    document.getElementById("abi_01").disabled = true;
    document.getElementById("abi_03").disabled = true;
  };*/
  if (str.includes("WIZARD") === false) { 
    document.getElementById("abi_08").disabled = true;
    document.getElementById("enh_11").disabled = true; };
  if (document.getElementById("moB_01").checked === false) { document.getElementById("abi_09").disabled = true; };
  
  // check if "FLY" is already shown
  var idCount = document.querySelectorAll('.warscroll [id*=Clone]').length;
  if (idCount > 0) {
    for (c = 0; c < idCount; c++) {
      idCloneName = document.querySelectorAll('.warscroll [id*=Clone]')[c].id;
      if (idCloneName.includes("Fly") === true) { document.getElementById("abi_03").disabled = true; };
    };
  };
  
  var hideCol = document.getElementById("orgWeaponTable").getElementsByTagName("td")  
  weaCount = 7  // 7 stats for each weapon
  // hideCol.length -14 if bestial companion was chosen
  if (hideCol.length <= weaCount) {
    
    var input2nds = document.getElementById("abilitiesForm").getElementsByTagName("input")
    for (i = 0; i < input2nds.length; i++) {
      if ( (input2nds[i].type == 'checkbox' || input2nds[i].type == 'number') 
      && (input2nds[i].id.endsWith("b") || input2nds[i].id.endsWith("c") ) ) {
        input2nds[i].checked = false;
        input2nds[i].disabled = true;
        if (input2nds[i].type == 'number') { input2nds[i].value = 1; };
      };
    };
  };  
};
// --- end of scripts on step 6 ------------------------------

//   ||||||   ||||||||  ||||||||  |||||||       ||||||||
//  ||    ||     ||     ||        ||    ||      ||    ||
//  ||           ||     ||        ||    ||           ||
//   ||||||      ||     ||||||    |||||||   ||      ||
//        ||     ||     ||        ||               ||
//  ||    ||     ||     ||        ||        ||     ||
//   ||||||      ||     ||||||||  ||               ||

// --- scripts on step 7 ------------------------------
// change size of warscroll
function changeSize() {
  document.getElementById("warscrollcard").style.display = "block";
  
  var format = document.getElementById("cardFormats");
  var fIndex = format.selectedIndex;
  var fOptio = format.options;
  
  var V = fOptio[fIndex].value
  var W = fOptio[fIndex].getAttribute("data-card-width");
  var H = fOptio[fIndex].getAttribute("data-card-height");
  //var O = fOptio[fIndex].getAttribute("data-card-orientation");

  WS = document.getElementById("yourWarscroll");
  if (V == "autosize-card") { WS.setAttribute("style", "width: " + W + "mm; height: ''"); } 
  else { WS.setAttribute("style", "width: " + W + "mm; height: " + H + "mm;"); };   
  document.getElementById("showhideCard").checked = true;
};

// print warscroll as png ------------------------------
$(document).ready(function () {
  var element = $("#yourWarscroll"); // global variable
  var getCanvas; //global variable
  html2canvas(element, {
    onrendered: function (canvas) { getCanvas = canvas; }
  });
 
  $("#download_your_warscroll").on('click', function () {
    var imgageData = getCanvas.toDataURL("image/png");
    //Now browser starts downloading it instead of just showing it
    var newData = imgageData.replace(/^data:image\/png/, "data:application/octet-stream");
    $("#download_your_warscroll").attr("download", "your_AoS_hero.png").attr("href", newData);
  });
});


function downloadWS() {
  var container = document.getElementById("warscrollcard");
  html2canvas(container, { allowTaint: true }).then(function (canvas) {

    var link = document.createElement("a");
    document.body.appendChild(link);
    link.download = "html_image.jpg";
    link.href = canvas.toDataURL();
    link.target = '_blank';
    link.click();
  });
};

// name your hero ------------------------------
function nameYourHero() {
  var nameNew = document.getElementById("heroesName").value;
  var nameAct1 = document.getElementById("heroName");
  var nameAct2 = document.getElementById("yourHerosName");
  var nameOrg = document.getElementById("orgHeroAncestry").innerHTML
  if (nameNew == "") { 
    if (nameOrg != "") {
      nameAct1.innerHTML = nameOrg;
      nameAct2.innerHTML = nameOrg; }
    else {
      nameAct1.innerHTML = "your heros hame";
      nameAct2.innerHTML = "YOUR HERO"; }; }
  else {
    nameAct1.innerHTML = nameNew;
    nameAct2.innerHTML = nameNew; };
};
// describe your hero ------------------------------
function describeYourHero() {
  var descrNew = document.getElementById("heroesDescr").value;
  var descrAct = document.getElementById("heroDescr");
  var descrOrg = document.getElementById("heroDescr").value;
  if (descrNew == "") { descrAct.innerHTML = "a description of your hero"; }
  else { descrAct.innerHTML = descrNew; };
};
// --- end of scripts on step 7 ------------------------------

//    ||||    ||        ||
//   ||  ||   ||        ||
//  ||    ||  ||        ||
//  ||||||||  ||        ||
//  ||    ||  ||        ||
//  ||    ||  ||        ||
//  ||    ||  ||||||||  ||||||||

// --- scripts on all steps ------------------------------
// show or hide hidden column with weapon origin names ------------------------------
function show_hide(handler) {
  forms = ["commandAbilitiesForm", "spellsForm", "weaponsForm", /*"archetypeForm",*/ "beastsForm", "beastsAbiForm", "abilitiesForm", "spiritHostForm"]
    for (f = 0; f < forms.length; f++) {
    var hideCol = document.getElementById(forms[f]).getElementsByTagName("tr")
    var text = hideCol.length
    for (i = 0; i < hideCol.length; i++) {
      for (j = 1; j < hideCol[i].cells.length; j++) {
         if (hideCol[i].cells[j].id.substr(hideCol[i].cells[j].id.length - 2,2) == "hi") {
           var element = document.getElementById(hideCol[i].cells[j].id);
           element.style.display = handler;
         };
      };
    };
  };
};

// rename weapons/beast wepaons/abilties/etc ------------------------------
function renameOne(event) {
  var oneCellId = event.target.id;
  var oneName = document.getElementById(oneCellId).innerHTML;
  var oneNameOrgId = oneCellId.substr(0,oneCellId.length - 1) + "9hi";
  var oneNameOrg = document.getElementById(oneNameOrgId).innerHTML;
  var n = oneName.search("<input");
  var usedName = "";
  var cellWidth = Math.floor( ( (document.getElementById(oneCellId).offsetWidth * 0.48) ) / 5 )  // 0.48 = 48%

  var checkBox = document.getElementById(oneCellId.substr(3, 6));
  if (currentTab == 4 && checkBox === null) { checkBox = document.getElementById(oneCellId.substr(3, 5) + "1"); };
  if (checkBox.checked == true) { return; };
  if (checkBox.disabled == true) { return; };
  
  if (n == -1) {
    document.getElementById(oneCellId).innerHTML = "";
    var inputField = document.createElement("INPUT");
    var inputId = oneCellId + "Input"
    inputField.setAttribute("id", inputId);
    inputField.setAttribute("size", cellWidth);
    inputField.setAttribute("value", oneName);
    document.getElementById(oneCellId).appendChild(inputField);
    var newId = "setName" + inputId
    
    var setInput = document.createElement("BUTTON");
    setInput.setAttribute("id", newId);
    setInput.setAttribute("onclick", "enterName('" + oneCellId + "', '" + inputId + "', '" + oneNameOrgId + "')");
    setInput.setAttribute("class", "setButton");
    setInput.innerHTML = "set";
    document.getElementById(oneCellId).appendChild(setInput);
    
    var input = document.getElementById(inputId);
    input.addEventListener("keyup", function(event) {
      if (event.keyCode === 13) {
       event.preventDefault();
       document.getElementById(newId).click();
      }
    });  
  } else if (n == 0) {
    document.getElementById(oneCellId).innerHTML = oneNameOrg;
  };
};

// set new weapon/ability/etc name ------------------------------
function enterName(Ident, IdentNew, IdentOrg) {
  var nameNew = document.getElementById(IdentNew).value;
  var nameOrg = document.getElementById(IdentOrg).innerHTML;
  var nameUsed = "";
  if (nameNew != "") {
    nameUsed = nameNew;
  } else {
    nameUsed = nameOrg;
  };
  document.getElementById(Ident).innerHTML = nameUsed;

  if (currentTab == 2 || currentTab == 4 || currentTab == 5 || currentTab == 6) {
    //r1_abi_10c3
    var oneDescr = Ident.substr(0,Ident.length - 1) + "2";
    var onePart = document.getElementById(oneDescr).innerHTML;
    var beg = onePart.search("<t1>") + 4;
    var end = onePart.search("</t1>");
    var nameAct = onePart.substr((beg), (end - beg - 1))

  var res = onePart.replace("<t1>" + nameAct + ":</t1>", "<t1>" + nameUsed + ":</t1>");
    document.getElementById(oneDescr).innerHTML = res;
  };
  //document.getElementById("buttonHolder").innerHTML = "";
};

// reset archetype & abilities names to origin ------------------------------
function resetDescrName(usedForm) {
  var hideCol = document.getElementById(usedForm).getElementsByTagName("tr")
  for (i = 0; i < hideCol.length; i++) {
    for (j = 1; j < hideCol[i].cells.length; j++) {
      if (hideCol[i].cells[j].id.substr(hideCol[i].cells[j].id.length - 2,2) == "hi" 
      && hideCol[i].cells[j].id.substr(0,2) == "r1") {
        actAbiId = hideCol[i].cells[j].id;
        nameOrg = hideCol[i].cells[j].innerHTML;
        // reset name
        document.getElementById(actAbiId.substr(0,actAbiId.length -3) + "1").innerHTML = nameOrg;
        // resest name in text
        var oneDescr = actAbiId.substr(0,actAbiId.length - 3) + "2";
        if (document.getElementById(oneDescr) !== null) {
          var onePart = document.getElementById(oneDescr).innerHTML;
          var beg = onePart.search("<t1>") + 4;
          var end = onePart.search("</t1>");
          var nameAct = onePart.substr((beg), (end - beg - 1));
          var res = onePart.replace("<t1>" + nameAct + ":</t1>", "<t1>" + nameOrg + ":</t1>");
          document.getElementById(oneDescr).innerHTML = res;
        };        
      };
    };    
  };
};

// add text to Warscroll preview ------------------------------
function addToWS(theName, wsPart, theTab, checkId) {
  usedTab = theTab;
  if (typeof theTab === "undefined") {
    usedTab = currentTab;
  };
  if (typeof checkId !== "undefined") {
    var nameCheck = document.getElementById("r1_" + checkId + "c1").innerHTML;
    var nameOrg = document.getElementById("r1_" + checkId + "c9hi").innerHTML;
    var n = nameCheck.search("<button");
    if (n != -1) {
      document.getElementById("r1_" + checkId + "c1").innerHTML = nameOrg
    };
  };
  
  var clone = theName.cloneNode(true);
  clone.id = theName.id + "Clone" + usedTab;
  idCount = document.querySelectorAll('.warscroll [id=' + clone.id + ']').length;
  
  if (idCount == 0) {
    document.getElementById(wsPart).appendChild(clone);
    document.getElementById(clone.id).style.fontSize = "100%";
    if (theName.id == "Magic_Abi01") { 
      //document.getElementById("demo1").innerHTML = "the magic: " + theName.id;
      //document.getElementById(clone.id).style.backgroundColor = "blue";
      //document.getElementById(clone.id).style.fontSize = "98%";
    };
  };
  document.getElementById(wsPart).style.display = "block";
  
  if (typeof checkId === "undefined") {  }
  else {
    var checkBox = document.getElementById(checkId);  // Get the checkbox
    var pointCell = document.getElementById("orgPts0" + usedTab);
    if (usedTab != 99) { // on tab 4 select archetype, which do not cost DPs (only in original anvil)
      var DPs = document.getElementById("r1_" + checkId + "c8").innerHTML;

      // If the checkbox is checked, add destiny points
      if (checkBox.checked == true) {
        pointCell.innerHTML = parseInt(pointCell.innerHTML) + parseInt(DPs); }
      else {
        pointCell.innerHTML = parseInt(pointCell.innerHTML) - parseInt(DPs);
        remFromWS(theName, wsPart, checkId);
      };
    };
  };
  
  displayAllSteps();
};

// change stats in dmgTable ------------------------------
function changeDmgTable(actStatName, addTimes, operator) {
  // operator: "add" or "rem" , increase or decrease stats when added or removed
  var dmgTable = document.getElementById("damageTable").getElementsByTagName("tr")
  var colL = dmgTable.length
  var usedCol = ""
  var orgTableName = document.getElementById("damageTable").children[1].id
      //orgTableName = orgTableName.substr(0, (orgTableName.length - 6))
      orgTableName = orgTableName + "Clone99";
  idCount = document.querySelectorAll('.dmgTable99 [id=' + orgTableName + ']').length;
  if (idCount == 0) { 
    orgTableName = document.getElementById("damageTable").children[1].id;
    orgTableName = orgTableName.substr(0, (orgTableName.length - 6)); };
  var orgDmgTable = document.getElementById(orgTableName).getElementsByTagName("tr")
  
  for (j = 0; j < dmgTable[1].cells.length; j++) {
    cellT = dmgTable[1].cells[j].innerHTML;
    if (cellT == actStatName) { usedCol = j };
  };
  
  if (usedCol != "") {
    for (i = 2; i < colL; i++) {
      var plusV = "", minusV = "";
      cellV = dmgTable[i].cells[usedCol].innerHTML;
      
      if (operator == "add") { 
        // for: toHit, toWound
        if (cellV.substr((cellV.length - 1), 1) == "+" && actStatName != "Save") {
          cellV = cellV.substr(0, (cellV.length - 1));
          plusV = "+";
          cellVN = parseInt(cellV) - parseInt(addTimes);
          if (cellVN < 1) { cellVN = 1 };
        } 
        // for: move, range
        else if (cellV.substr((cellV.length - 1), 1) == '"') {
          cellV = cellV.substr(0, (cellV.length - 1));
          plusV = '"';
          cellVN = parseInt(cellV) + parseInt(addTimes);
        }
        // for: save
        else if (actStatName == "Save") {
          if (cellV == "-") { cellV = 7 }
          else { cellV = cellV.substr(0, (cellV.length - 1)); };
          plusV = "+";
          cellVN = parseInt(cellV) - parseInt(addTimes);
          if (cellVN < 3) { cellVN = 3 };
        }
        // for: rend
        else if (cellV.substr(0, 1) == "-") {
          if (cellV == "-") { cellV = 0 }
          else { cellV = cellV.substr(1, (cellV.length - 1)); };
          minusV = "-";
          cellVN = parseInt(cellV) + parseInt(addTimes);
          if (cellVN > 3) { cellVN = 3 };
        }
        // for: damage(random)
        else if (cellV.substr(0, 1) == "D") {
          cellVN = cellV + "+" + parseInt(addTimes);
        }
        // for: wounds, bravery, attacks, damage(normal)
        else {
          cellVN = parseInt(cellV) + parseInt(addTimes);
        };
        cellVN = minusV + cellVN + plusV;
      }
      else if (operator == "rem") { 
        cellVN = orgDmgTable[i].cells[usedCol].innerHTML;
      };
      
      dmgTable[i].cells[usedCol].innerHTML = cellVN;
    }; } 
  else {  };
};

// save changed dmgTable ------------------------------
function saveDmgTable() {
  // only used after step 5 was completed
  var getDmgT = document.getElementById("dmgTable99").getElementsByTagName("tr")
  var getDmgL = getDmgT.length
  if (getDmgL <= 0 ) {
    document.getElementById("dmgTable99").innerHTML = ""
  };  
  var dmgTable = document.getElementById("damageTable").getElementsByTagName("tr")
  var colL = dmgTable.length
  if (colL >= 1) {
    var orgTableName = document.getElementById("damageTable").children[1].id
        orgDmgTable = document.getElementById(orgTableName)
    addToWS(orgDmgTable, "dmgTable99", 99);
  };
};

// reset shown dmgTable completely ------------------------------
function resetDmgTable() {
  // only used on step 6
  var dmgTable = document.getElementById("damageTable").getElementsByTagName("tr")
  var colL = dmgTable.length
  if (colL >= 1) {
    var orgTableName = document.getElementById("damageTable").children[1].id
        //orgTableName = orgTableName.substr(0, (orgTableName.length - 6));
        orgTableName = orgTableName + "Clone99";
    var orgDmgTable = document.getElementById(orgTableName).getElementsByTagName("tr");
    
    for (i = 1; i < colL; i++) {
      for (j = 0; j < dmgTable[1].cells.length; j++) {
        cellVN = orgDmgTable[i].cells[j].innerHTML;
        dmgTable[i].cells[j].innerHTML = cellVN;
      };
    };
  };
};

// show/hide Warscroll ------------------------------
function clickCard() {
  if (document.getElementById("showhideCard").checked == true) { 
    document.getElementById("yourWarscroll").style.display = "block"
  } else { document.getElementById("yourWarscroll").style.display = "none" }
};

//  |||||||   ||||||||  ||    ||   ||||||   ||    ||  ||||||||
//  ||    ||  ||        |||  |||  ||    ||  ||    ||  ||
//  ||    ||  ||        ||||||||  ||    ||  ||    ||  ||
//  |||||||   ||||||    || || ||  ||    ||  ||    ||  ||||||
//  ||  ||    ||        ||    ||  ||    ||   ||  ||   ||
//  ||   ||   ||        ||    ||  ||    ||    ||||    ||
//  ||    ||  ||||||||  ||    ||   ||||||      ||     ||||||||

// remove single text to Warscroll preview ------------------------------
function remFromWS(theName, wsPart, checkId) {
  var clone = theName.id + "Clone" + currentTab
  idCount = document.querySelectorAll('.warscroll [id=' + clone + ']').length;
  
  if (idCount > 0) {
    do {
      document.getElementById(clone).remove();
      idCount = document.querySelectorAll('.warscroll [id=' + clone + ']').length;
    }
    while (idCount > 0);
    cloneCount = document.querySelectorAll('.' + wsPart + ' [id*=Clone]').length;
    if (cloneCount >  0) {
      document.getElementById(wsPart).style.display = "block";
    } else {
      if (wsPart != "description") { document.getElementById(wsPart).style.display = "none"; };
    };
  };
};

// remove all text from actual step on Warscroll preview ------------------------------
function remStepFromWS() {
  rangesWS = ["damageTable", "description", "abilities", "magic", "command"];
  /*
  [id^='someId'] will match all ids starting with someId.
  [id$='someId'] will match all ids ending with someId.
  [id*='someId'] will match all ids containing someId.
  */
  for (i = 0; i < rangesWS.length; i++) {
    var idCount = document.querySelectorAll('.' + rangesWS[i] + ' [id$=Clone' + currentTab + ']').length;
    if ( !(rangesWS[i] == "command" &&  document.getElementById("dmgTable99check").innerHTML == "true") ) {
      if (idCount > 0) {
        do {
          idCloneName = document.querySelectorAll('.' + rangesWS[i] + ' [id$=Clone' + currentTab + ']')[0].id;
          document.getElementById(idCloneName).remove();
          idCount = document.querySelectorAll('.' + rangesWS[i] + ' [id$=Clone' + currentTab + ']').length;
        }
        while (idCount > 0);
      };
    };
  };
  rangesWS = ["damageTable", "abilities", "magic", "command"];
  for (i = 0; i < rangesWS.length; i++) {
    cloneCount = document.querySelectorAll('.' + rangesWS[i] + ' [id*=Clone]').length;
    if (cloneCount >  0) { document.getElementById(rangesWS[i]).style.display = "block"; } 
    else { document.getElementById(rangesWS[i]).style.display = "none"; };
  };
};
// remove text from actual step on Warscroll preview, except dmgTable ------------------------------
function remStepFromWSspec() {
  rangesWS = ["abilities", "magic", "command"]
  /*
  [id^='someId'] will match all ids starting with someId.
  [id$='someId'] will match all ids ending with someId.
  [id*='someId'] will match all ids containing someId.
  */
  for (i = 0; i < rangesWS.length; i++) {
    var idCount = document.querySelectorAll('.' + rangesWS[i] + ' [id$=Clone' + currentTab + ']').length;
    if (idCount > 0) {
      do {
        idCloneName = document.querySelectorAll('.' + rangesWS[i] + ' [id$=Clone' + currentTab + ']')[0].id;
        document.getElementById(idCloneName).remove();
        idCount = document.querySelectorAll('.' + rangesWS[i] + ' [id$=Clone' + currentTab + ']').length;
      }
      while (idCount > 0);
    };
  };
  for (i = 0; i < rangesWS.length; i++) {
    cloneCount = document.querySelectorAll('.' + rangesWS[i] + ' [id*=Clone]').length;
    if (cloneCount >  0) { document.getElementById(rangesWS[i]).style.display = "block"; } 
    else { document.getElementById(rangesWS[i]).style.display = "none"; };
  };
};

// restore original weapon stats ------------------------------
function resetStepWeaponStats(orgTable) {
  // find weapon stats
  findWeaponStats(orgTable);  
  var wea01nam = wea01nam0, wea01rng = wea01rng0, wea01att = wea01att0, wea01hit = wea01hit0, wea01wnd = wea01wnd0, wea01rnd = wea01rnd0, wea01dmg = wea01dmg0
  var wea02nam = wea02nam0, wea02rng = wea02rng0, wea02att = wea02att0, wea02hit = wea02hit0, wea02wnd = wea02wnd0, wea02rnd = wea02rnd0, wea02dmg = wea02dmg0
  
  var weaXStatsFull = [wea01nam, wea01rng, wea01att, wea01hit, wea01wnd, wea01rnd, wea01dmg];
  actWeaName = weaXStatsFull[0];
  for (s = 2; s < (weaXStatsFull.length); s++) {
    usedStat = parseInt(weaXStatsFull[s]);
    statCol = parseInt(s);
    if (s == 3) { usedStat = usedStat + "+" }
    else if (s == 4) { usedStat = usedStat + "+" }
    else if (s == 5 && usedStat == 0 ) { usedStat = "-" }
    else if (s == 5 ) { usedStat = "-" + usedStat };
    if (weaXStatsFull[s]  != "D3") { changeWeaStatPrev(actWeaName, usedStat, statCol); };
  };

  var hideCol = document.getElementById(orgTable).getElementsByTagName("td")  
  weaCount = 7  // 7 stats for each weapon
  // hideCol.length -14 if bestial companion was chosen
  if (hideCol.length > weaCount) {
    var weaXStatsFull = [wea02nam, wea02rng, wea02att, wea02hit, wea02wnd, wea02rnd, wea02dmg];
    actWeaName = weaXStatsFull[0];
    for (s = 2; s <= (weaXStatsFull.length - 1); s++) {
      usedStat = parseInt(weaXStatsFull[s]);
      statCol = parseInt(s);
      if (s == 3) { usedStat = usedStat + "+" }
      else if (s == 4) { usedStat = usedStat + "+" }
      else if (s == 5 && usedStat == 0 ) { usedStat = "-" }
      else if (s == 5 ) { usedStat = "-" + usedStat };
      if (weaXStatsFull[s]  != "D3") { changeWeaStatPrev(actWeaName, usedStat, statCol); };
    };
  };
};

// find weapon stats to use and manipulate ------------------------------
function findWeaponStats(orgTable) {
  // find weapon stats
  var fullRow = document.getElementById(orgTable).getElementsByTagName("tr")
  var wea01nam = "", wea01rng = "", wea01att = "", wea01hit = "", wea01wnd = "", wea01rnd = "", wea01dmg = ""
  var wea02nam = "", wea02rng = "", wea02att = "", wea02hit = "", wea02wnd = "", wea02rnd = "", wea02dmg = ""
  for (i = 0; i < fullRow.length; i++) {
    if (fullRow[i].cells[0].innerHTML == "MELEE WEAPONS" || fullRow[i].cells[0].innerHTML == "MISSILE WEAPONS") {}
    else {

      for (j = 0; j < fullRow[i].cells.length; j++) {
        actUsedRow = fullRow[i].cells[j]
        if (j == 0 && wea01nam == "") { wea01nam = actUsedRow.innerHTML } 
        else if (j == 0 && wea02nam == "") { wea02nam = actUsedRow.innerHTML };

        if (j == 1 && wea01rng == "") { wea01rng = actUsedRow.innerHTML.substr(0, actUsedRow.innerHTML.length - 1) } 
        else if (j == 1 && wea02rng == "") { wea02rng = actUsedRow.innerHTML.substr(0, actUsedRow.innerHTML.length - 1) };

        if (j == 2 && wea01att == "") { wea01att = actUsedRow.innerHTML } 
        else if (j == 2 && wea02att == "") { wea02att = actUsedRow.innerHTML };

        if (j == 3 && wea01hit == "") { wea01hit = actUsedRow.innerHTML.substr(0, actUsedRow.innerHTML.length - 1) } 
        else if (j == 3 && wea02hit == "") { wea02hit = actUsedRow.innerHTML.substr(0, actUsedRow.innerHTML.length - 1) };

        if (j == 4 && wea01wnd == "") {wea01wnd = actUsedRow.innerHTML.substr(0, actUsedRow.innerHTML.length - 1) } 
        else if (j == 4 && wea02wnd == "") {wea02wnd = actUsedRow.innerHTML.substr(0, actUsedRow.innerHTML.length - 1) };

        if (j == 5 && wea01rnd == "") {
          wea01rnd = actUsedRow.innerHTML.substr(1, 1);
          if (wea01rnd == "") { wea01rnd = "0" };
        } else if (j == 5 && wea02rnd == "") {
          wea02rnd = actUsedRow.innerHTML.substr(1, 1);
          if (wea02rnd == "") { wea02rnd = "0" };
        };

        if (j == 6 && wea01dmg == "") { wea01dmg = actUsedRow.innerHTML } 
        else if (j == 6 && wea02dmg == "") { wea02dmg = actUsedRow.innerHTML };
      };    // end for
    };
  };    // end find weapon stats
  // new names needed to give back to former function
  wea01nam0 = wea01nam, wea01rng0 = wea01rng, wea01att0 = wea01att, wea01hit0 = wea01hit, wea01wnd0 = wea01wnd, wea01rnd0 = wea01rnd, wea01dmg0 = wea01dmg
  wea02nam0 = wea02nam, wea02rng0 = wea02rng, wea02att0 = wea02att, wea02hit0 = wea02hit, wea02wnd0 = wea02wnd, wea02rnd0 = wea02rnd, wea02dmg0 = wea02dmg
};

// remove completely all text on Warscroll preview ------------------------------
function remAllFromWS() {
  var idCount = document.querySelectorAll('.warscroll [id*=Clone]').length;
  /*
  [id^='someId'] will match all ids starting with someId.
  [id$='someId'] will match all ids ending with someId.
  [id*='someId'] will match all ids containing someId.
  */  
  if (idCount > 0) {
    do {
      idCloneName = document.querySelectorAll('.warscroll [id*=Clone]')[0].id;
      document.getElementById(idCloneName).remove();
      idCount = document.querySelectorAll('.warscroll [id*=Clone]').length;
    }
    while (idCount > 0);
  };
  document.getElementById("damageTable").style.display = "none";
  //document.getElementById("description").style.display = "none";
  document.getElementById("abilities").style.display = "none";
  document.getElementById("magic").style.display = "none";
  document.getElementById("command").style.display = "none";  
  
  // exception for MALIGNANT after step 2
  charK = document.getElementById("heroKeys").innerHTML
  if (currentTab > 2 && charK.includes("MALIGNANT") === true) {
    addToWS(Fly, "description", 2);
    addToWS(Ethereal, "abilities", 2);
  };
  if (currentTab > 4) {
    //arcTypes = ["arc_01", "arc_02", "arc_03", "arc_04", "arc_05", "arc_06", "arc_07", "arc_08"]
    if (document.getElementById("arc_01").checked == true) { addToWS(Lead_the_Attack, "command", 4); };
    if (document.getElementById("arc_02").checked == true) { addToWS(Lead_the_Defence, "command", 4); };
    if (document.getElementById("arc_03").checked == true) { 
      addToWS(Divine_Prayers, "abilities", 4);
      addToWS(Wrathful_Invocation, "abilities", 4);
    };
    if (document.getElementById("arc_04").checked == true) { 
      addToWS(Divine_Prayers, "abilities", 4);
      addToWS(Shield_of_Faith, "abilities", 4);
    };
    if (document.getElementById("arc_05").checked == true) { 
      addToWS(Magic_Abi1, "magic", 4);
      addToWS(Aura_of_Protection, "magic", 4);
    };
    if (document.getElementById("arc_06").checked == true) { 
      addToWS(Magic_Abi1, "magic", 4);
      addToWS(Curse_of_Damnation, "magic", 4);
    };
    if (document.getElementById("arc_07").checked == true) { 
      addToWS(Magic_Abi1, "magic", 4);
      addToWS(Wildfire, "magic", 4);
    };
    if (document.getElementById("arc_08").checked == true) { 
      addToWS(Magic_Abi1, "magic", 4);
      addToWS(Raise_Dead, "magic", 4);
    };
  };
  
  // find weapon stats
  var fullRow = document.getElementById("orgWeaponTable").getElementsByTagName("tr")
  var wea01nam = "", wea01rng = "", wea01att = "", wea01hit = "", wea01wnd = "", wea01rnd = "", wea01dmg = ""
  var wea02nam = "", wea02rng = "", wea02att = "", wea02hit = "", wea02wnd = "", wea02rnd = "", wea02dmg = ""
  for (i = 0; i < fullRow.length; i++) {
    if (fullRow[i].cells[0].innerHTML == "MELEE WEAPONS") {}
    else if (fullRow[i].cells[0].innerHTML == "MISSILE WEAPONS") {}
    else {

      for (j = 0; j < fullRow[i].cells.length; j++) {
        actUsedRow = fullRow[i].cells[j]
        if (j == 0 && wea01nam == "") { wea01nam = actUsedRow.innerHTML } 
        else if (j == 0 && wea02nam == "") { wea02nam = actUsedRow.innerHTML };

        if (j == 1 && wea01rng == "") { wea01rng = actUsedRow.innerHTML.substr(0, actUsedRow.innerHTML.length - 1) } 
        else if (j == 1 && wea02rng == "") { wea02rng = actUsedRow.innerHTML.substr(0, actUsedRow.innerHTML.length - 1) };

        if (j == 2 && wea01att == "") { wea01att = actUsedRow.innerHTML } 
        else if (j == 2 && wea02att == "") { wea02att = actUsedRow.innerHTML };

        if (j == 3 && wea01hit == "") { wea01hit = actUsedRow.innerHTML.substr(0, actUsedRow.innerHTML.length - 1) } 
        else if (j == 3 && wea02hit == "") { wea02hit = actUsedRow.innerHTML.substr(0, actUsedRow.innerHTML.length - 1) };

        if (j == 4 && wea01wnd == "") {wea01wnd = actUsedRow.innerHTML.substr(0, actUsedRow.innerHTML.length - 1) } 
        else if (j == 4 && wea02wnd == "") {wea02wnd = actUsedRow.innerHTML.substr(0, actUsedRow.innerHTML.length - 1) };

        if (j == 5 && wea01rnd == "") {
          wea01rnd = actUsedRow.innerHTML.substr(1, 1);
          if (wea01rnd == "") { wea01rnd = "0" };
        } else if (j == 5 && wea02rnd == "") {
          wea02rnd = actUsedRow.innerHTML.substr(1, 1);
          if (wea02rnd == "") { wea02rnd = "0" };
        };

        if (j == 6 && wea01dmg == "") { wea01dmg = actUsedRow.innerHTML } 
        else if (j == 6 && wea02dmg == "") { wea02dmg = actUsedRow.innerHTML };
      };  // end for
    };
  };  // end find weapon stats
  
  var weaXStatsFull = [wea01nam, wea01rng, wea01att, wea01hit, wea01wnd, wea01rnd, wea01dmg];
  actWeaName = weaXStatsFull[0];
  for (s = 2; s < (weaXStatsFull.length); s++) {
    usedStat = parseInt(weaXStatsFull[s]);
    statCol = parseInt(s);
    if (s == 3) { usedStat = usedStat + "+" }
    else if (s == 4) { usedStat = usedStat + "+" }
    else if (s == 5 && usedStat == 0 ) { usedStat = "-" }
    else if (s == 5 ) { usedStat = "-" + usedStat };
    if (weaXStatsFull[s]  != "D3") { changeWeaStatPrev(actWeaName, usedStat, statCol); };
  };

  var hideCol = document.getElementById("orgWeaponTable").getElementsByTagName("td")  
  weaCount = 7  // 7 stats for each weapon
  // hideCol.length -14 if bestial companion was chosen
  if (hideCol.length > weaCount) {
    var weaXStatsFull = [wea02nam, wea02rng, wea02att, wea02hit, wea02wnd, wea02rnd, wea02dmg];
    actWeaName = weaXStatsFull[0];
    for (s = 2; s <= (weaXStatsFull.length - 1); s++) {
      usedStat = parseInt(weaXStatsFull[s]);
      statCol = parseInt(s);
      if (s == 3) { usedStat = usedStat + "+" }
      else if (s == 4) { usedStat = usedStat + "+" }
      else if (s == 5 && usedStat == 0 ) { usedStat = "-" }
      else if (s == 5 ) { usedStat = "-" + usedStat };
      if (weaXStatsFull[s]  != "D3") { changeWeaStatPrev(actWeaName, usedStat, statCol); };
    };
  };
};

// reset all steps ------------------------------
function resetAllStats() {
  var actTab = currentTab;
  document.getElementById("orgMove0" + actTab).innerHTML = 0;
  document.getElementById("orgSave0" + actTab).innerHTML = 0;
  document.getElementById("orgBrav0" + actTab).innerHTML = 0;
  document.getElementById("orgWoun0" + actTab).innerHTML = 0;
  document.getElementById("orgKeys0" + actTab).innerHTML = "";
  document.getElementById("orgPts0" + actTab).innerHTML = 0;
  
  displayAllSteps();
};

// display all steps ------------------------------
function displayAllSteps() {
  var actTab = currentTab;
  var numTextP = 0;  // add+
  var numTextN = 0;  // sub-
  var onlyText = " ";
  var fullText = "";

  var blackstarM = document.createElement("IMG");
      blackstarM.setAttribute("src", "https://i.ibb.co/gPzxHNR/Ao-S-WS-blackstar.png");
      blackstarM.setAttribute("alt", "WarhammerAoS");
      blackstarM.setAttribute("style", "display:block; margin: auto auto -5px;");
  var blackstarS = document.createElement("IMG");
      blackstarS.setAttribute("src", "https://i.ibb.co/gPzxHNR/Ao-S-WS-blackstar.png");
      blackstarS.setAttribute("alt", "WarhammerAoS");
      blackstarS.setAttribute("style", "display:block; margin: auto auto -5px;");
  var blackstarB = document.createElement("IMG");
      blackstarB.setAttribute("src", "https://i.ibb.co/gPzxHNR/Ao-S-WS-blackstar.png");
      blackstarB.setAttribute("alt", "WarhammerAoS");
      blackstarB.setAttribute("style", "display:block; margin: auto auto -5px;");
  var blackstarW = document.createElement("IMG");
      blackstarW.setAttribute("src", "https://i.ibb.co/gPzxHNR/Ao-S-WS-blackstar.png");
      blackstarW.setAttribute("alt", "WarhammerAoS");
      blackstarW.setAttribute("style", "display:block; margin: auto auto -5px;");
      
  if (actTab == 1) {
    document.getElementById("move").innerHTML = "1" + '"'
    document.getElementById("save").innerHTML = "-"  //document.getElementById("save").value;
    document.getElementById("brav").innerHTML = "1"  //document.getElementById("brav").value;
    document.getElementById("woun").innerHTML = "1"  //document.getElementById("woun").value;
    document.getElementById("heroKeys").innerHTML = ""
    document.getElementById("ptsAct").innerHTML = "-"
  } else {
  
    var rows = document.getElementById("orgStatsTable").getElementsByTagName("tr");
    for (i = 1; i < rows.length; i++) {
      var blackRow = false;
      for (j = 2; j < actTab + 1; j++) {
        blackCheck = rows[i].cells[j].innerHTML;
        blackCheck = blackCheck.search("http");  // check if blackstar
        if (blackCheck != -1) { blackRow = true; };
        numTextP = numTextP + parseInt(rows[i].cells[j].innerHTML);
        if (i == 2) {
          if (j == 2) {
            if (parseInt(rows[i].cells[j].innerHTML) == 0) {
              numTextN = 7;
            } else {
              numTextN = parseInt(rows[i].cells[j].innerHTML);
            };
          } else {
            numTextN = numTextN - parseInt(rows[i].cells[j].innerHTML);
          };
        };
        if (i == 5) {
          if (rows[i].cells[j].innerHTML != "") {
            onlyText = onlyText + rows[i].cells[j].innerHTML;
          };
        };
      };
      if (i == 1) {
        if ( blackRow == true ) {
          document.getElementById("move").innerHTML = "";
          document.getElementById("move").appendChild(blackstarM);
          text = text + " move:done"; } 
        else { document.getElementById("move").innerHTML = numTextP + '"'; };
      };
      if (i == 2) {
        if ( blackRow == true ) { 
          document.getElementById("save").innerHTML = "";
          document.getElementById("save").appendChild(blackstarS);
          text = text + " save:done";
        } 
        else { 
          if (numTextN == 0 || numTextN >= 7) { document.getElementById("save").innerHTML = "-"; } 
          else { document.getElementById("save").innerHTML = numTextN + "+"; };
        };
      };
      if (i == 3) {
        if ( blackRow == true ) { 
          document.getElementById("brav").innerHTML = "";
          document.getElementById("brav").appendChild(blackstarB);
          text = text + " brav:done"; } 
        else { document.getElementById("brav").innerHTML = numTextP; };
      };
      if (i == 4) {
        if ( blackRow == true ) { 
          document.getElementById("woun").innerHTML = "";
          document.getElementById("woun").appendChild(blackstarW);
          text = text + " wound:done"; } 
        else { document.getElementById("woun").innerHTML = numTextP; };
      };
      if (i == 5) {
        //onlyText = onlyText.replace(/^\s+|\s+$/g, "");
        onlyText = onlyText.replace(/<br>/g, "");  // <br> = break
        onlyText = onlyText.replace(/\b/g, "");  // \b = backspace
        document.getElementById("heroKeys").innerHTML = onlyText;
      };
      if (i == 6) {
        document.getElementById("ptsAct").innerHTML = numTextP;
        if (parseInt(document.getElementById("ptsAct").innerHTML) > parseInt(document.getElementById("ptsMax").innerHTML)
        && document.getElementById("ptsMax").innerHTML != "-") { document.getElementById("ptsAct").setAttribute("style", "color: darkred"); }
        else { document.getElementById("ptsAct").setAttribute("style", "color: black"); };
      };
      fullText = fullText + numTextP + " | " + numTextN + "<br>";
      numTextP = 0;
      //numTextN = 0;
      onlyText = " ";
      //numText = parseInt(numText).toString()
    };
  };
    
};
// --- end of all steps ------------------------------

//  ||    ||    ||||    ||    ||  ||
//  |||   ||   ||  ||   ||    ||  ||
//  ||||  ||  ||    ||  ||    ||  ||
//  || || ||  ||||||||  ||    ||  ||
//  ||  ||||  ||    ||   ||  ||   ||
//  ||   |||  ||    ||    ||||    ||
//  ||    ||  ||    ||     ||     ||

// --- navigation ------------------------------
//
var currentTab = 0; // Current tab is set to be the first tab (0)
showTab(currentTab); // Display the current tab

function showTab(n) {  // This function will display the specified tab of the form...
  var x = document.getElementsByClassName("anvilSteps");
  x[n].style.display = "block";
  if (n == 0) {      //... and fix the Previous/Next buttons
    document.getElementById("prevBtn").style.display = "none";
    document.getElementById("resetBtn").style.display = "none";
    document.getElementById("nextBtn").style.width = "350px";
    document.getElementById("nextBtn").innerHTML = "Start creating your hero!";
    document.getElementById("warscrollcard").style.display = "none";
    document.getElementById("warscrollshow").style.display = "none";
  } else {
    document.getElementById("prevBtn").style.display = "inline";
    document.getElementById("resetBtn").style.display = "inline";
    document.getElementById("nextBtn").style.width = "";
    document.getElementById("resetBtn").innerHTML = "Reset";
    document.getElementById("nextBtn").innerHTML = "Next";
    document.getElementById("warscrollcard").style.display = "block";
    document.getElementById("warscrollshow").style.display = "block";
    document.getElementById("roleDP").style.display = "block";
  };
  if (n == (x.length - 1)) {
    document.getElementById("resetBtn").style.display = "none";
    //document.getElementById("resetBtn").innerHTML = "Start Anew";
    document.getElementById("nextBtn").innerHTML = "Your Warscroll!";
    //document.getElementById("warscrollcard").style.display = "none";
    document.getElementById("roleDP").style.display = "none";
  } else if (n != 0) {
    document.getElementById("resetBtn").style.display = "inline";
    document.getElementById("nextBtn").innerHTML = "Next";
  };
  fixStepIndicator(n);  //... and run a function that will display the correct step indicator
};

function nextPrev(n) {    // This function will figure out which tab to display
  var x = document.getElementsByClassName("anvilSteps");
  // Exit the function if any field in the current tab is invalid:
  //var step = document.getElementsByClassName("step");
  if (n == -1) {
    resetStep(0);
  };
  if(n == 0) {
    resetStep(0);
  };
  if (n == 1 && !validateStep()) return false;
  x[currentTab].style.display = "none";  // Hide the current tab
  currentTab = currentTab + n;           // Increase or decrease the current tab by 1
  if (currentTab >= x.length) {          // if you have reached the end of the form...
    return false;          // ... the form gets submitted:
  };
  showTab(currentTab);     // Otherwise, display the correct tab
  switch (currentTab) {
    case 0:   // start
      
      break;
    case 1:  // step 1
      if (n == 1) {resetStep1();};

      break;
    case 2:   // step 2
      if (n == 1) { showAlliance("grandALL"); };
      break;
    case 3:   // step 3
      if (n == 1) {
        saveDmgTable();
        resetCheckStep3();
      };
      resetRestrictionsStep3();
      break;
    /*case 4:   // step 4
      if (n == 1) {resetCheckStep4();};
      resetRestrictionsStep4();
      break;*/
    case 4:   // step 5
      if (n == 1) {
        resetCheckStep5();
        resetStepWeaponStats("orgBeastTable");
      };
      resetRestrictionsStep5();
      break;
    case 5:   // step 6
      if (n == 1) {
        saveDmgTable();
        resetDmgTable();
        resetCheckStep6();
        resetStepWeaponStats("orgWeaponTable");
      };
      resetRestrictionsStep6();
      break;
    default:  // default
      ;
  };
};

function resetStep(mod) {
  var x = document.getElementsByClassName("anvilSteps");
  //y = x[currentTab].id;
  step = document.getElementsByClassName("step");
  if ([currentTab] < step.length) {
    step[currentTab].className = step[currentTab].className.replace(" finish", "");
  };
  switch (currentTab) {
    case 0:   // start
      
      break;
    case 1:   // step 1
      resetStep1();
      break;
    case 2:   // step 2
      resetStep2();
      break;
    case 3:   // step 3
      remStepFromWS();
      resetCheckStep3();
      break;
    /*case 4:   // step 4
      remStepFromWS();
      resetCheckStep4();
      break;*/
    case 4:   // step 5
      remStepFromWS();
      resetCheckStep5();
      resetStepWeaponStats("orgBeastTable");
      break;
    case 5:   // step 6
      remStepFromWS();
      resetDmgTable();
      resetCheckStep6();
      resetStepWeaponStats("orgWeaponTable");
      break;
    default:  // default
      ;
  };
  if (currentTab != 6) {
    resetAllStats();
  };
};

function validateStep() {  // This function deals with validation of the form fields
  var x, y, i, valid = true;
  x = document.getElementsByClassName("anvilSteps");
  //y = x[currentTab].getElementsByTagName("input");
  checkValid = document.getElementById("validateStep" + [currentTab]).innerHTML;
  if (checkValid == "not valid") { valid = false; };
  // If the valid status is true, mark the step as finished and valid
  if (valid) { document.getElementsByClassName("step")[currentTab].className += " finish"; };
  return valid; // return the valid status
};

function fixStepIndicator(n) {  // This function removes the "active" class of all steps...
  var i, x = document.getElementsByClassName("step");
  for (i = 0; i < x.length; i++) { x[i].className = x[i].className.replace(" active", ""); };
  x[n].className += " active";  //... and adds the "active" class on the current step
};
// --- end of navigation ------------------------------



// show properties on mouseclick ------------------------------
function showTagProperty(event) { // triggered by...
  var x = event.target;
  test1 = x.id.substring(0,2)
  test2 = x.id.substring(x.id.length - 2)
  test3 = x.id.substr(3,3)
  if (x.id.substring(0,2) == "r1" && x.id.substring(x.id.length - 2) == "c1" && x.id.substr(3,3) != "shi") {
  text = "1) Triggered by a " + x.tagName + " element | eleID:" + x.id + " | weapon name found" + " | T1:" + test1 + " | T2:" + test2 + " | T3:" + test3;
  document.getElementById("triggeredBy").innerHTML = text
  } else if (x.id.substr(3,3) == "shi") {
  text =  "1) Triggered by a " + x.tagName + " element | eleID:" + x.id + " | shield found" + " | T1:" + test1 + " | T2:" + test2 + " | T3:" + test3;
  document.getElementById("triggeredBy").innerHTML = text
  } else {
  text =  "2) Triggered by a " + x.tagName + " element | eleID:" + x.id + " | T1:" + test1 + " | T2:" + test2 + " | T3:" + test3;
  document.getElementById("triggeredBy").innerHTML = text
  }  
};
</script>

</body>
</html>
